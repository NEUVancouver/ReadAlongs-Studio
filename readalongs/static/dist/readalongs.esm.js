(()=>{var e={896:(e,t,r)=>{"use strict";r.d(t,{b:()=>J,g:()=>I,h:()=>A,p:()=>c,r:()=>re});let n,i,s=!1,o=!1;const a="undefined"!=typeof window?window:{},l=a.document||{head:{}},u={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},c=e=>Promise.resolve(e),h=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),d=(e,t,r,n)=>{r&&r.map((([r,n,i])=>{const s=p(e,r),o=f(t,i),a=m(r);u.ael(s,n,o,a),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>u.rel(s,n,o,a)))}))},f=(e,t)=>r=>{try{256&e.$flags$?e.$lazyInstance$[t](r):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,r])}catch(e){se(e)}},p=(e,t)=>8&t?a:e,m=e=>0!=(2&e),g="http://www.w3.org/1999/xlink",v=new WeakMap,_=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,i=(t.$tagName$,()=>{}),s=((e,t,r,n)=>{let i=y(t),s=le.get(i);if(e=11===e.nodeType?e:l,s)if("string"==typeof s){e=e.head||e;let t,r=v.get(e);r||v.set(e,r=new Set),r.has(i)||(t=l.createElement("style"),t.innerHTML=s,e.insertBefore(t,e.querySelector("link")),r&&r.add(i))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i})(r.shadowRoot?r.shadowRoot:r.getRootNode(),t);10&n&&(r["s-sc"]=s,r.classList.add(s+"-h")),i()},y=(e,t)=>"sc-"+e.$tagName$,b={},w=e=>"object"===(e=typeof e)||"function"===e,A=(e,t,...r)=>{let n=null,i=null,s=!1,o=!1,a=[];const l=t=>{for(let r=0;r<t.length;r++)n=t[r],Array.isArray(n)?l(n):null!=n&&"boolean"!=typeof n&&((s="function"!=typeof e&&!w(n))&&(n=String(n)),s&&o?a[a.length-1].$text$+=n:a.push(s?E(null,n):n),o=s)};if(l(r),t){t.key&&(i=t.key);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,a,k);const u=E(e,null);return u.$attrs$=t,a.length>0&&(u.$children$=a),u.$key$=i,u},E=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null};return r},C={},k={forEach:(e,t)=>e.map(x).forEach(t),map:(e,t)=>e.map(x).map(t).map(F)},x=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),F=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),A(e.vtag,t,...e.vchildren||[])}const t=E(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},D=(e,t,r,n,i,s)=>{if(r!==n){let o=ie(e,t),l=t.toLowerCase();if("class"===t){const t=e.classList,i=P(r),s=P(n);t.remove(...i.filter((e=>e&&!s.includes(e)))),t.add(...s.filter((e=>e&&!i.includes(e))))}else if("style"===t){for(const t in r)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)r&&n[t]===r[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(o||"o"!==t[0]||"n"!==t[1]){const a=w(n);if((o||a&&null!==n)&&!i)try{if(e.tagName.includes("-"))e[t]=n;else{let i=null==n?"":n;"list"===t?o=!1:null!=r&&e[t]==i||(e[t]=i)}}catch(e){}let u=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,u=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(g,t):e.removeAttribute(t)):(!o||4&s||i)&&!a&&(n=!0===n?"":n,u?e.setAttributeNS(g,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):ie(a,l)?l.slice(2):l[2]+t.slice(3),r&&u.rel(e,t,r,!1),n&&u.ael(e,t,n,!1)}},B=/\s/,P=e=>e?e.split(B):[],S=(e,t,r,n)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||b,o=t.$attrs$||b;for(n in s)n in o||D(i,n,s[n],void 0,r,t.$flags$);for(n in o)D(i,n,s[n],o[n],r,t.$flags$)},T=(e,t,r,i)=>{let o,a,u=t.$children$[r],c=0;if(null!==u.$text$)o=u.$elm$=l.createTextNode(u.$text$);else{if(s||(s="svg"===u.$tag$),o=u.$elm$=l.createElementNS(s?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",u.$tag$),s&&"foreignObject"===u.$tag$&&(s=!1),S(null,u,s),null!=n&&o["s-si"]!==n&&o.classList.add(o["s-si"]=n),u.$children$)for(c=0;c<u.$children$.length;++c)a=T(e,u,c),a&&o.appendChild(a);"svg"===u.$tag$?s=!1:"foreignObject"===o.tagName&&(s=!0)}return o},O=(e,t,r,n,s,o)=>{let a,l=e;for(l.shadowRoot&&l.tagName===i&&(l=l.shadowRoot);s<=o;++s)n[s]&&(a=T(null,r,s),a&&(n[s].$elm$=a,l.insertBefore(a,t)))},$=(e,t,r,n,i)=>{for(;t<=r;++t)(n=e[t])&&(i=n.$elm$,L(n),i.remove())},R=(e,t)=>e.$tag$===t.$tag$&&e.$key$===t.$key$,M=(e,t)=>{const r=t.$elm$=e.$elm$,n=e.$children$,i=t.$children$,o=t.$tag$,a=t.$text$;null===a?(s="svg"===o||"foreignObject"!==o&&s,"slot"===o||S(e,t,s),null!==n&&null!==i?((e,t,r,n)=>{let i,s,o=0,a=0,l=0,u=0,c=t.length-1,h=t[0],d=t[c],f=n.length-1,p=n[0],m=n[f];for(;o<=c&&a<=f;)if(null==h)h=t[++o];else if(null==d)d=t[--c];else if(null==p)p=n[++a];else if(null==m)m=n[--f];else if(R(h,p))M(h,p),h=t[++o],p=n[++a];else if(R(d,m))M(d,m),d=t[--c],m=n[--f];else if(R(h,m))M(h,m),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++o],m=n[--f];else if(R(d,p))M(d,p),e.insertBefore(d.$elm$,h.$elm$),d=t[--c],p=n[++a];else{for(l=-1,u=o;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===p.$key$){l=u;break}l>=0?(s=t[l],s.$tag$!==p.$tag$?i=T(t&&t[a],r,l):(M(s,p),t[l]=void 0,i=s.$elm$),p=n[++a]):(i=T(t&&t[a],r,a),p=n[++a]),i&&h.$elm$.parentNode.insertBefore(i,h.$elm$)}o>c?O(e,null==n[f+1]?null:n[f+1].$elm$,r,n,a,f):a>f&&$(t,o,c)})(r,n,t,i):null!==i?(null!==e.$text$&&(r.textContent=""),O(r,null,t,i,0,i.length-1)):null!==n&&$(n,0,n.length-1),s&&"svg"===o&&(s=!1)):e.$text$!==a&&(r.data=a)},L=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(L)},j=(e,t)=>{const r=e.$hostElement$,s=e.$vnode$||E(null,null),o=(a=t)&&a.$tag$===C?t:A(null,null,t);var a;i=r.tagName,o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=s.$elm$=r.shadowRoot||r,n=r["s-sc"],M(s,o)},I=e=>te(e).$hostElement$,V=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))},W=(e,t)=>{if(e.$flags$|=16,4&e.$flags$)return void(e.$flags$|=512);V(e,e.$ancestorComponent$);return me((()=>U(e,t)))},U=(e,t)=>{const r=(e.$cmpMeta$.$tagName$,()=>{}),n=e.$lazyInstance$;let i;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((([e,t])=>G(n,e,t))),e.$queuedListeners$=null),i=G(n,"componentWillLoad")),r(),X(i,(()=>H(e,n,t)))},H=async(e,t,r)=>{const n=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),s=n["s-rc"];r&&_(e);const o=(e.$cmpMeta$.$tagName$,()=>{});N(e,t),s&&(s.map((e=>e())),n["s-rc"]=void 0),o(),i();{const t=n["s-p"],r=()=>z(e);0===t.length?r():(Promise.all(t).then(r),e.$flags$|=4,t.length=0)}},N=(e,t,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,j(e,t)}catch(t){se(t,e.$hostElement$)}return null},z=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$,r=()=>{},n=e.$lazyInstance$,i=e.$ancestorComponent$;64&e.$flags$?(G(n,"componentDidUpdate"),r()):(e.$flags$|=64,Y(t),G(n,"componentDidLoad"),r(),e.$onReadyResolve$(t),i||q()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&pe((()=>W(e,!1))),e.$flags$&=-517},q=e=>{Y(l.documentElement),pe((()=>((e,t,r)=>{const n=u.ce(t,r);return e.dispatchEvent(n),n})(a,"appload",{detail:{namespace:"read-along"}})))},G=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){se(e)}},X=(e,t)=>e&&e.then?e.then(t):t(),Y=e=>e.classList.add("hydrated"),Q=(e,t,r,n)=>{const i=te(e),s=i.$instanceValues$.get(t),o=i.$flags$,a=i.$lazyInstance$;var l,u;l=r,u=n.$members$[t][0],r=null==l||w(l)?l:4&u?"false"!==l&&(""===l||!!l):1&u?String(l):l,8&o&&void 0!==s||r===s||(i.$instanceValues$.set(t,r),a&&2==(18&o)&&W(i,!1))},Z=(e,t,r)=>{if(t.$members$){const n=Object.entries(t.$members$),i=e.prototype;if(n.map((([e,[n]])=>{(31&n||2&r&&32&n)&&Object.defineProperty(i,e,{get(){return t=e,te(this).$instanceValues$.get(t);var t},set(r){Q(this,e,r,t)},configurable:!0,enumerable:!0})})),1&r){const t=new Map;i.attributeChangedCallback=function(e,r,n){u.jmp((()=>{const r=t.get(e);this.hasOwnProperty(r)&&(n=this[r],delete this[r]),this[r]=(null!==n||"boolean"!=typeof this[r])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,r])=>{const n=r[1]||e;return t.set(n,e),n}))}}return e},K=async(e,t,r,n,i)=>{if(0==(32&t.$flags$)){{if(t.$flags$|=32,(i=ae(r)).then){const e=()=>{};i=await i,e()}i.isProxied||(Z(i,r,2),i.isProxied=!0);const e=(r.$tagName$,()=>{});t.$flags$|=8;try{new i(t)}catch(e){se(e)}t.$flags$&=-9,e()}if(i.style){let e=i.style;const t=y(r);if(!le.has(t)){const n=(r.$tagName$,()=>{});((e,t,r)=>{let n=le.get(e);h&&r?(n=n||new CSSStyleSheet,n.replace(t)):n=t,le.set(e,n)})(t,e,!!(1&r.$flags$)),n()}}}const s=t.$ancestorComponent$,o=()=>W(t,!0);s&&s["s-rc"]?s["s-rc"].push(o):o()},J=(e,t={})=>{const r=()=>{},n=[],i=t.exclude||[],s=a.customElements,o=l.head,c=o.querySelector("meta[charset]"),h=l.createElement("style"),f=[];let p,m=!0;Object.assign(u,t),u.$resourcesUrl$=new URL(t.resourcesUrl||"./",l.baseURI).href,e.map((e=>e[1].map((t=>{const r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};r.$members$=t[2],r.$listeners$=t[3];const o=r.$tagName$,a=class extends HTMLElement{constructor(e){super(e),ne(e=this,r),1&r.$flags$&&e.attachShadow({mode:"open"})}connectedCallback(){p&&(clearTimeout(p),p=null),m?f.push(this):u.jmp((()=>(e=>{if(0==(1&u.$flags$)){const t=te(e),r=t.$cmpMeta$,n=(r.$tagName$,()=>{});if(1&t.$flags$)d(e,t,r.$listeners$);else{t.$flags$|=1;{let r=e;for(;r=r.parentNode||r.host;)if(r["s-p"]){V(t,t.$ancestorComponent$=r);break}}r.$members$&&Object.entries(r.$members$).map((([t,[r]])=>{if(31&r&&e.hasOwnProperty(t)){const r=e[t];delete e[t],e[t]=r}})),K(0,t,r)}n()}})(this)))}disconnectedCallback(){u.jmp((()=>(e=>{if(0==(1&u.$flags$)){const t=te(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this)))}componentOnReady(){return te(this).$onReadyPromise$}};r.$lazyBundleId$=e[0],i.includes(o)||s.get(o)||(n.push(o),s.define(o,Z(a,r,1)))})))),h.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}",h.setAttribute("data-styles",""),o.insertBefore(h,c?c.nextSibling:o.firstChild),m=!1,f.length?f.map((e=>e.connectedCallback())):u.jmp((()=>p=setTimeout(q,30))),r()},ee=new WeakMap,te=e=>ee.get(e),re=(e,t)=>ee.set(t.$lazyInstance$=e,t),ne=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return r.$onReadyPromise$=new Promise((e=>r.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[],d(e,r,t.$listeners$),ee.set(e,r)},ie=(e,t)=>t in e,se=(e,t)=>(0,console.error)(e,t),oe=new Map,ae=(e,t,n)=>{const i=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$,o=oe.get(s);return o?o[i]:r(318)(`./${s}.entry.js`).then((e=>(oe.set(s,e),e[i])),se)},le=new Map,ue=[],ce=[],he=(e,t)=>r=>{e.push(r),o||(o=!0,t&&4&u.$flags$?pe(fe):u.raf(fe))},de=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){se(e)}e.length=0},fe=()=>{de(ue),de(ce),(o=ue.length>0)&&u.raf(fe)},pe=e=>c().then(e),me=he(ce,!0)},159:(e,t,r)=>{"use strict";r.r(t),r.d(t,{read_along:()=>U});var n=r(896);function i(e){return"function"==typeof e}let s=!1;const o={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function a(e){setTimeout((()=>{throw e}),0)}const l={closed:!0,next(e){},error(e){if(o.useDeprecatedSynchronousErrorHandling)throw e;a(e)},complete(){}},u=Array.isArray||(e=>e&&"number"==typeof e.length);const c=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map(((e,t)=>`${t+1}) ${e.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class h{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:r,_unsubscribe:n,_subscriptions:s}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof h)t.remove(this);else if(null!==t)for(let e=0;e<t.length;++e){t[e].remove(this)}if(i(n)){r&&(this._unsubscribe=void 0);try{n.call(this)}catch(t){e=t instanceof c?d(t.errors):[t]}}if(u(s)){let t=-1,r=s.length;for(;++t<r;){const r=s[t];if(null!==(o=r)&&"object"==typeof o)try{r.unsubscribe()}catch(t){e=e||[],t instanceof c?e=e.concat(d(t.errors)):e.push(t)}}}var o;if(e)throw new c(e)}add(e){let t=e;if(!e)return h.EMPTY;switch(typeof e){case"function":t=new h(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof h)){const e=t;t=new h,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=t;if(null===r)t._parentOrParents=this;else if(r instanceof h){if(r===this)return t;t._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return t;r.push(this)}const n=this._subscriptions;return null===n?this._subscriptions=[t]:n.push(t),t}remove(e){const t=this._subscriptions;if(t){const r=t.indexOf(e);-1!==r&&t.splice(r,1)}}}function d(e){return e.reduce(((e,t)=>e.concat(t instanceof c?t.errors:t)),[])}h.EMPTY=function(e){return e.closed=!0,e}(new h);const f="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class p extends h{constructor(e,t,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=l;break;case 1:if(!e){this.destination=l;break}if("object"==typeof e){e instanceof p?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new m(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new m(this,e,t,r)}}[f](){return this}static create(e,t,r){const n=new p(e,t,r);return n.syncErrorThrowable=!1,n}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class m extends p{constructor(e,t,r,n){let s;super(),this._parentSubscriber=e;let o=this;i(t)?s=t:t&&(s=t.next,r=t.error,n=t.complete,t!==l&&(o=Object.create(t),i(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=r,this._complete=n}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;o.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:r}=o;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):a(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;a(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);o.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),o.useDeprecatedSynchronousErrorHandling)throw e;a(e)}}__tryOrSetError(e,t,r){if(!o.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return o.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(a(t),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const g="function"==typeof Symbol&&Symbol.observable||"@@observable";function v(e){return e}class _{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const t=new _;return t.source=this,t.operator=e,t}subscribe(e,t,r){const{operator:n}=this,i=function(e,t,r){if(e){if(e instanceof p)return e;if(e[f])return e[f]()}return e||t||r?new p(e,t,r):new p(l)}(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||o.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),o.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i}_trySubscribe(e){try{return this._subscribe(e)}catch(t){o.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){const{closed:t,destination:r,isStopped:n}=e;if(t||n)return!1;e=r&&r instanceof p?r:null}return!0}(e)?console.warn(t):e.error(t)}}forEach(e,t){return new(t=y(t))(((t,r)=>{let n;n=this.subscribe((t=>{try{e(t)}catch(e){r(e),n&&n.unsubscribe()}}),r,t)}))}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[g](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?v:1===t.length?t[0]:function(e){return t.reduce(((e,t)=>t(e)),e)})(this);var t}toPromise(e){return new(e=y(e))(((e,t)=>{let r;this.subscribe((e=>r=e),(e=>t(e)),(()=>e(r)))}))}}function y(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}_.create=e=>new _(e);class b{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new w(e,this.compare,this.keySelector))}}class w extends p{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:r}=this;t=r?r(e):e}catch(e){return this.destination.error(e)}let r=!1;if(this.hasKey)try{const{compare:e}=this;r=e(this.key,t)}catch(e){return this.destination.error(e)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}const A=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})();class E extends h{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}class C extends p{constructor(e){super(e),this.destination=e}}class k extends _{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new C(this)}lift(e){const t=new x(this,this);return t.operator=e,t}next(e){if(this.closed)throw new A;if(!this.isStopped){const{observers:t}=this,r=t.length,n=t.slice();for(let t=0;t<r;t++)n[t].next(e)}}error(e){if(this.closed)throw new A;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,r=t.length,n=t.slice();for(let t=0;t<r;t++)n[t].error(e);this.observers.length=0}complete(){if(this.closed)throw new A;this.isStopped=!0;const{observers:e}=this,t=e.length,r=e.slice();for(let e=0;e<t;e++)r[e].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new A;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new A;return this.hasError?(e.error(this.thrownError),h.EMPTY):this.isStopped?(e.complete(),h.EMPTY):(this.observers.push(e),new E(this,e))}asObservable(){const e=new _;return e.source=this,e}}k.create=(e,t)=>new x(e,t);class x extends k{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):h.EMPTY}}class F extends k{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value}next(e){super.next(this._value=e)}}var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function B(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function P(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var S=P((function(e,t){
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
!function(){var e=function(){this.init()};e.prototype={init:function(){var e=this||r;return e._counter=1e3,e._html5AudioPool=[],e.html5PoolSize=10,e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e._canPlayEvent="canplaythrough",e._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,e.masterGain=null,e.noAudio=!1,e.usingWebAudio=!0,e.autoSuspend=!0,e.ctx=null,e.autoUnlock=!0,e._setup(),e},volume:function(e){var t=this||r;if(e=parseFloat(e),t.ctx||c(),void 0!==e&&e>=0&&e<=1){if(t._volume=e,t._muted)return t;t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),s=0;s<i.length;s++){var o=t._howls[n]._soundById(i[s]);o&&o._node&&(o._node.volume=o._volume*e)}return t}return t._volume},mute:function(e){var t=this||r;t.ctx||c(),t._muted=e,t.usingWebAudio&&t.masterGain.gain.setValueAtTime(e?0:t._volume,r.ctx.currentTime);for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var i=t._howls[n]._getSoundIds(),s=0;s<i.length;s++){var o=t._howls[n]._soundById(i[s]);o&&o._node&&(o._node.muted=!!e||o._muted)}return t},stop:function(){for(var e=this||r,t=0;t<e._howls.length;t++)e._howls[t].stop();return e},unload:function(){for(var e=this||r,t=e._howls.length-1;t>=0;t--)e._howls[t].unload();return e.usingWebAudio&&e.ctx&&void 0!==e.ctx.close&&(e.ctx.close(),e.ctx=null,c()),e},codecs:function(e){return(this||r)._codecs[e.replace(/^x-/,"")]},_setup:function(){var e=this||r;if(e.state=e.ctx&&e.ctx.state||"suspended",e._autoSuspend(),!e.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(e._canPlayEvent="canplay")}catch(t){e.noAudio=!0}else e.noAudio=!0;try{(new Audio).muted&&(e.noAudio=!0)}catch(e){}return e.noAudio||e._setupCodecs(),e},_setupCodecs:function(){var e=this||r,t=null;try{t="undefined"!=typeof Audio?new Audio:null}catch(t){return e}if(!t||"function"!=typeof t.canPlayType)return e;var n=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=e._navigator?e._navigator.userAgent:"",s=i.match(/OPR\/([0-6].)/g),o=s&&parseInt(s[0].split("/")[1],10)<33,a=-1!==i.indexOf("Safari")&&-1===i.indexOf("Chrome"),l=i.match(/Version\/(.*?) /),u=a&&l&&parseInt(l[1],10)<15;return e._codecs={mp3:!(o||!n&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!n,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(t.canPlayType('audio/wav; codecs="1"')||t.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!t.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(t.canPlayType("audio/x-m4b;")||t.canPlayType("audio/m4b;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(u||!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!t.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(t.canPlayType("audio/x-flac;")||t.canPlayType("audio/flac;")).replace(/^no$/,"")},e},_unlockAudio:function(){var e=this||r;if(!e._audioUnlocked&&e.ctx){e._audioUnlocked=!1,e.autoUnlock=!1,e._mobileUnloaded||44100===e.ctx.sampleRate||(e._mobileUnloaded=!0,e.unload()),e._scratchBuffer=e.ctx.createBuffer(1,1,22050);var t=function(r){for(;e._html5AudioPool.length<e.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,e._releaseHtml5Audio(n)}catch(r){e.noAudio=!0;break}for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var s=e._howls[i]._getSoundIds(),o=0;o<s.length;o++){var a=e._howls[i]._soundById(s[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}e._autoResume();var l=e.ctx.createBufferSource();l.buffer=e._scratchBuffer,l.connect(e.ctx.destination),void 0===l.start?l.noteOn(0):l.start(0),"function"==typeof e.ctx.resume&&e.ctx.resume(),l.onended=function(){l.disconnect(0),e._audioUnlocked=!0,document.removeEventListener("touchstart",t,!0),document.removeEventListener("touchend",t,!0),document.removeEventListener("click",t,!0),document.removeEventListener("keydown",t,!0);for(var r=0;r<e._howls.length;r++)e._howls[r]._emit("unlock")}};return document.addEventListener("touchstart",t,!0),document.addEventListener("touchend",t,!0),document.addEventListener("click",t,!0),document.addEventListener("keydown",t,!0),e}},_obtainHtml5Audio:function(){var e=this||r;if(e._html5AudioPool.length)return e._html5AudioPool.pop();var t=(new Audio).play();return t&&"undefined"!=typeof Promise&&(t instanceof Promise||"function"==typeof t.then)&&t.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(e){var t=this||r;return e._unlocked&&t._html5AudioPool.push(e),t},_autoSuspend:function(){var e=this;if(e.autoSuspend&&e.ctx&&void 0!==e.ctx.suspend&&r.usingWebAudio){for(var t=0;t<e._howls.length;t++)if(e._howls[t]._webAudio)for(var n=0;n<e._howls[t]._sounds.length;n++)if(!e._howls[t]._sounds[n]._paused)return e;return e._suspendTimer&&clearTimeout(e._suspendTimer),e._suspendTimer=setTimeout((function(){if(e.autoSuspend){e._suspendTimer=null,e.state="suspending";var t=function(){e.state="suspended",e._resumeAfterSuspend&&(delete e._resumeAfterSuspend,e._autoResume())};e.ctx.suspend().then(t,t)}}),3e4),e}},_autoResume:function(){var e=this;if(e.ctx&&void 0!==e.ctx.resume&&r.usingWebAudio)return"running"===e.state&&"interrupted"!==e.ctx.state&&e._suspendTimer?(clearTimeout(e._suspendTimer),e._suspendTimer=null):"suspended"===e.state||"running"===e.state&&"interrupted"===e.ctx.state?(e.ctx.resume().then((function(){e.state="running";for(var t=0;t<e._howls.length;t++)e._howls[t]._emit("resume")})),e._suspendTimer&&(clearTimeout(e._suspendTimer),e._suspendTimer=null)):"suspending"===e.state&&(e._resumeAfterSuspend=!0),e}};var r=new e,n=function(e){e.src&&0!==e.src.length?this.init(e):console.error("An array of source files must be passed with any new Howl.")};n.prototype={init:function(e){var t=this;return r.ctx||c(),t._autoplay=e.autoplay||!1,t._format="string"!=typeof e.format?e.format:[e.format],t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload&&"metadata"!==e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._xhr={method:e.xhr&&e.xhr.method?e.xhr.method:"GET",headers:e.xhr&&e.xhr.headers?e.xhr.headers:null,withCredentials:!(!e.xhr||!e.xhr.withCredentials)&&e.xhr.withCredentials},t._duration=0,t._state="unloaded",t._sounds=[],t._endTimers={},t._queue=[],t._playLock=!1,t._onend=e.onend?[{fn:e.onend}]:[],t._onfade=e.onfade?[{fn:e.onfade}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onplayerror=e.onplayerror?[{fn:e.onplayerror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._onmute=e.onmute?[{fn:e.onmute}]:[],t._onvolume=e.onvolume?[{fn:e.onvolume}]:[],t._onrate=e.onrate?[{fn:e.onrate}]:[],t._onseek=e.onseek?[{fn:e.onseek}]:[],t._onunlock=e.onunlock?[{fn:e.onunlock}]:[],t._onresume=[],t._webAudio=r.usingWebAudio&&!t._html5,void 0!==r.ctx&&r.ctx&&r.autoUnlock&&r._unlockAudio(),r._howls.push(t),t._autoplay&&t._queue.push({event:"play",action:function(){t.play()}}),t._preload&&"none"!==t._preload&&t.load(),t},load:function(){var e=this,t=null;if(r.noAudio)e._emit("loaderror",null,"No audio support.");else{"string"==typeof e._src&&(e._src=[e._src]);for(var n=0;n<e._src.length;n++){var s,a;if(e._format&&e._format[n])s=e._format[n];else{if("string"!=typeof(a=e._src[n])){e._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(a))||(s=/\.([^.]+)$/.exec(a.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&r.codecs(s)){t=e._src[n];break}}if(t)return e._src=t,e._state="loading","https:"===window.location.protocol&&"http:"===t.slice(0,5)&&(e._html5=!0,e._webAudio=!1),new i(e),e._webAudio&&o(e),e;e._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(e,t){var n=this,i=null;if("number"==typeof e)i=e,e=null;else{if("string"==typeof e&&"loaded"===n._state&&!n._sprite[e])return null;if(void 0===e&&(e="__default",!n._playLock)){for(var s=0,o=0;o<n._sounds.length;o++)n._sounds[o]._paused&&!n._sounds[o]._ended&&(s++,i=n._sounds[o]._id);1===s?e=null:i=null}}var a=i?n._soundById(i):n._inactiveSound();if(!a)return null;if(i&&!e&&(e=a._sprite||"__default"),"loaded"!==n._state){a._sprite=e,a._ended=!1;var l=a._id;return n._queue.push({event:"play",action:function(){n.play(l)}}),l}if(i&&!a._paused)return t||n._loadQueue("play"),a._id;n._webAudio&&r._autoResume();var u=Math.max(0,a._seek>0?a._seek:n._sprite[e][0]/1e3),c=Math.max(0,(n._sprite[e][0]+n._sprite[e][1])/1e3-u),h=1e3*c/Math.abs(a._rate),d=n._sprite[e][0]/1e3,f=(n._sprite[e][0]+n._sprite[e][1])/1e3;a._sprite=e,a._ended=!1;var p=function(){a._paused=!1,a._seek=u,a._start=d,a._stop=f,a._loop=!(!a._loop&&!n._sprite[e][2])};if(!(u>=f)){var m=a._node;if(n._webAudio){var g=function(){n._playLock=!1,p(),n._refreshBuffer(a);var e=a._muted||n._muted?0:a._volume;m.gain.setValueAtTime(e,r.ctx.currentTime),a._playStart=r.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,u,86400):m.bufferSource.noteGrainOn(0,u,c):a._loop?m.bufferSource.start(0,u,86400):m.bufferSource.start(0,u,c),h!==1/0&&(n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h)),t||setTimeout((function(){n._emit("play",a._id),n._loadQueue()}),0)};"running"===r.state&&"interrupted"!==r.ctx.state?g():(n._playLock=!0,n.once("resume",g),n._clearTimer(a._id))}else{var v=function(){m.currentTime=u,m.muted=a._muted||n._muted||r._muted||m.muted,m.volume=a._volume*r.volume(),m.playbackRate=a._rate;try{var i=m.play();if(i&&"undefined"!=typeof Promise&&(i instanceof Promise||"function"==typeof i.then)?(n._playLock=!0,p(),i.then((function(){n._playLock=!1,m._unlocked=!0,t?n._loadQueue():n._emit("play",a._id)})).catch((function(){n._playLock=!1,n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):t||(n._playLock=!1,p(),n._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void n._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==e||a._loop?n._endTimers[a._id]=setTimeout(n._ended.bind(n,a),h):(n._endTimers[a._id]=function(){n._ended(a),m.removeEventListener("ended",n._endTimers[a._id],!1)},m.addEventListener("ended",n._endTimers[a._id],!1))}catch(e){n._emit("playerror",a._id,e)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=n._src,m.load());var _=window&&window.ejecta||!m.readyState&&r._navigator.isCocoonJS;if(m.readyState>=3||_)v();else{n._playLock=!0,n._state="loading";var y=function(){n._state="loaded",v(),m.removeEventListener(r._canPlayEvent,y,!1)};m.addEventListener(r._canPlayEvent,y,!1),n._clearTimer(a._id)}}return a._id}n._ended(a)},pause:function(e){var t=this;if("loaded"!==t._state||t._playLock)return t._queue.push({event:"pause",action:function(){t.pause(e)}}),t;for(var r=t._getSoundIds(e),n=0;n<r.length;n++){t._clearTimer(r[n]);var i=t._soundById(r[n]);if(i&&!i._paused&&(i._seek=t.seek(r[n]),i._rateSeek=0,i._paused=!0,t._stopFade(r[n]),i._node))if(t._webAudio){if(!i._node.bufferSource)continue;void 0===i._node.bufferSource.stop?i._node.bufferSource.noteOff(0):i._node.bufferSource.stop(0),t._cleanBuffer(i._node)}else isNaN(i._node.duration)&&i._node.duration!==1/0||i._node.pause();arguments[1]||t._emit("pause",i?i._id:null)}return t},stop:function(e,t){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"stop",action:function(){r.stop(e)}}),r;for(var n=r._getSoundIds(e),i=0;i<n.length;i++){r._clearTimer(n[i]);var s=r._soundById(n[i]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,r._stopFade(n[i]),s._node&&(r._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),r._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&r._clearSound(s._node))),t||r._emit("stop",s._id))}return r},mute:function(e,t){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"mute",action:function(){n.mute(e,t)}}),n;if(void 0===t){if("boolean"!=typeof e)return n._muted;n._muted=e}for(var i=n._getSoundIds(t),s=0;s<i.length;s++){var o=n._soundById(i[s]);o&&(o._muted=e,o._interval&&n._stopFade(o._id),n._webAudio&&o._node?o._node.gain.setValueAtTime(e?0:o._volume,r.ctx.currentTime):o._node&&(o._node.muted=!!r._muted||e),n._emit("mute",o._id))}return n},volume:function(){var e,t,n,i=this,s=arguments;if(0===s.length)return i._volume;if(1===s.length||2===s.length&&void 0===s[1]){var o=i._getSoundIds(),a=o.indexOf(s[0]);a>=0?t=parseInt(s[0],10):e=parseFloat(s[0])}else s.length>=2&&(e=parseFloat(s[0]),t=parseInt(s[1],10));if(!(void 0!==e&&e>=0&&e<=1))return(n=t?i._soundById(t):i._sounds[0])?n._volume:0;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,s)}}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)(n=i._soundById(t[l]))&&(n._volume=e,s[2]||i._stopFade(t[l]),i._webAudio&&n._node&&!n._muted?n._node.gain.setValueAtTime(e,r.ctx.currentTime):n._node&&!n._muted&&(n._node.volume=e*r.volume()),i._emit("volume",n._id));return i},fade:function(e,t,n,i){var s=this;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"fade",action:function(){s.fade(e,t,n,i)}}),s;e=Math.min(Math.max(0,parseFloat(e)),1),t=Math.min(Math.max(0,parseFloat(t)),1),n=parseFloat(n),s.volume(e,i);for(var o=s._getSoundIds(i),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l){if(i||s._stopFade(o[a]),s._webAudio&&!l._muted){var u=r.ctx.currentTime,c=u+n/1e3;l._volume=e,l._node.gain.setValueAtTime(e,u),l._node.gain.linearRampToValueAtTime(t,c)}s._startFadeInterval(l,e,t,n,o[a],void 0===i)}}return s},_startFadeInterval:function(e,t,r,n,i,s){var o=this,a=t,l=r-t,u=Math.abs(l/.01),c=Math.max(4,u>0?n/u:n),h=Date.now();e._fadeTo=r,e._interval=setInterval((function(){var i=(Date.now()-h)/n;h=Date.now(),a+=l*i,a=Math.round(100*a)/100,a=l<0?Math.max(r,a):Math.min(r,a),o._webAudio?e._volume=a:o.volume(a,e._id,!0),s&&(o._volume=a),(r<t&&a<=r||r>t&&a>=r)&&(clearInterval(e._interval),e._interval=null,e._fadeTo=null,o.volume(r,e._id),o._emit("fade",e._id))}),c)},_stopFade:function(e){var t=this,n=t._soundById(e);return n&&n._interval&&(t._webAudio&&n._node.gain.cancelScheduledValues(r.ctx.currentTime),clearInterval(n._interval),n._interval=null,t.volume(n._fadeTo,e),n._fadeTo=null,t._emit("fade",e)),t},loop:function(){var e,t,r,n=this,i=arguments;if(0===i.length)return n._loop;if(1===i.length){if("boolean"!=typeof i[0])return!!(r=n._soundById(parseInt(i[0],10)))&&r._loop;e=i[0],n._loop=e}else 2===i.length&&(e=i[0],t=parseInt(i[1],10));for(var s=n._getSoundIds(t),o=0;o<s.length;o++)(r=n._soundById(s[o]))&&(r._loop=e,n._webAudio&&r._node&&r._node.bufferSource&&(r._node.bufferSource.loop=e,e&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop,n.playing(s[o])&&(n.pause(s[o],!0),n.play(s[o],!0)))));return n},rate:function(){var e,t,n,i=this,s=arguments;if(0===s.length)t=i._sounds[0]._id;else if(1===s.length){var o=i._getSoundIds(),a=o.indexOf(s[0]);a>=0?t=parseInt(s[0],10):e=parseFloat(s[0])}else 2===s.length&&(e=parseFloat(s[0]),t=parseInt(s[1],10));if("number"!=typeof e)return(n=i._soundById(t))?n._rate:i._rate;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,s)}}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var l=0;l<t.length;l++)if(n=i._soundById(t[l])){i.playing(t[l])&&(n._rateSeek=i.seek(t[l]),n._playStart=i._webAudio?r.ctx.currentTime:n._playStart),n._rate=e,i._webAudio&&n._node&&n._node.bufferSource?n._node.bufferSource.playbackRate.setValueAtTime(e,r.ctx.currentTime):n._node&&(n._node.playbackRate=e);var u=i.seek(t[l]),c=(i._sprite[n._sprite][0]+i._sprite[n._sprite][1])/1e3-u,h=1e3*c/Math.abs(n._rate);!i._endTimers[t[l]]&&n._paused||(i._clearTimer(t[l]),i._endTimers[t[l]]=setTimeout(i._ended.bind(i,n),h)),i._emit("rate",n._id)}return i},seek:function(){var e,t,n=this,i=arguments;if(0===i.length)n._sounds.length&&(t=n._sounds[0]._id);else if(1===i.length){var s=n._getSoundIds(),o=s.indexOf(i[0]);o>=0?t=parseInt(i[0],10):n._sounds.length&&(t=n._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return 0;if("number"==typeof e&&("loaded"!==n._state||n._playLock))return n._queue.push({event:"seek",action:function(){n.seek.apply(n,i)}}),n;var a=n._soundById(t);if(a){if(!("number"==typeof e&&e>=0)){if(n._webAudio){var l=n.playing(t)?r.ctx.currentTime-a._playStart:0,u=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(u+l*Math.abs(a._rate))}return a._node.currentTime}var c=n.playing(t);c&&n.pause(t,!0),a._seek=e,a._ended=!1,n._clearTimer(t),n._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=e);var h=function(){c&&n.play(t,!0),n._emit("seek",t)};if(c&&!n._webAudio){var d=function(){n._playLock?setTimeout(d,0):h()};setTimeout(d,0)}else h()}return n},playing:function(e){var t=this;if("number"==typeof e){var r=t._soundById(e);return!!r&&!r._paused}for(var n=0;n<t._sounds.length;n++)if(!t._sounds[n]._paused)return!0;return!1},duration:function(e){var t=this,r=t._duration,n=t._soundById(e);return n&&(r=t._sprite[n._sprite][1]/1e3),r},state:function(){return this._state},unload:function(){for(var e=this,t=e._sounds,n=0;n<t.length;n++)t[n]._paused||e.stop(t[n]._id),e._webAudio||(e._clearSound(t[n]._node),t[n]._node.removeEventListener("error",t[n]._errorFn,!1),t[n]._node.removeEventListener(r._canPlayEvent,t[n]._loadFn,!1),t[n]._node.removeEventListener("ended",t[n]._endFn,!1),r._releaseHtml5Audio(t[n]._node)),delete t[n]._node,e._clearTimer(t[n]._id);var i=r._howls.indexOf(e);i>=0&&r._howls.splice(i,1);var o=!0;for(n=0;n<r._howls.length;n++)if(r._howls[n]._src===e._src||e._src.indexOf(r._howls[n]._src)>=0){o=!1;break}return s&&o&&delete s[e._src],r.noAudio=!1,e._state="unloaded",e._sounds=[],e=null,null},on:function(e,t,r,n){var i=this["_on"+e];return"function"==typeof t&&i.push(n?{id:r,fn:t,once:n}:{id:r,fn:t}),this},off:function(e,t,r){var n=this,i=n["_on"+e],s=0;if("number"==typeof t&&(r=t,t=null),t||r)for(s=0;s<i.length;s++){var o=r===i[s].id;if(t===i[s].fn&&o||!t&&o){i.splice(s,1);break}}else if(e)n["_on"+e]=[];else{var a=Object.keys(n);for(s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(n[a[s]])&&(n[a[s]]=[])}return n},once:function(e,t,r){return this.on(e,t,r,1),this},_emit:function(e,t,r){for(var n=this,i=n["_on"+e],s=i.length-1;s>=0;s--)i[s].id&&i[s].id!==t&&"load"!==e||(setTimeout(function(e){e.call(this,t,r)}.bind(n,i[s].fn),0),i[s].once&&n.off(e,i[s].fn,i[s].id));return n._loadQueue(e),n},_loadQueue:function(e){var t=this;if(t._queue.length>0){var r=t._queue[0];r.event===e&&(t._queue.shift(),t._loadQueue()),e||r.action()}return t},_ended:function(e){var t=this,n=e._sprite;if(!t._webAudio&&e._node&&!e._node.paused&&!e._node.ended&&e._node.currentTime<e._stop)return setTimeout(t._ended.bind(t,e),100),t;var i=!(!e._loop&&!t._sprite[n][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id,!0).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._rateSeek=0,e._playStart=r.ctx.currentTime;var s=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),s)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,e._rateSeek=0,t._clearTimer(e._id),t._cleanBuffer(e._node),r._autoSuspend()),t._webAudio||i||t.stop(e._id,!0),t},_clearTimer:function(e){var t=this;if(t._endTimers[e]){if("function"!=typeof t._endTimers[e])clearTimeout(t._endTimers[e]);else{var r=t._soundById(e);r&&r._node&&r._node.removeEventListener("ended",t._endTimers[e],!1)}delete t._endTimers[e]}return t},_soundById:function(e){for(var t=this,r=0;r<t._sounds.length;r++)if(e===t._sounds[r]._id)return t._sounds[r];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new i(e)},_drain:function(){var e=this,t=e._pool,r=0,n=0;if(!(e._sounds.length<t)){for(n=0;n<e._sounds.length;n++)e._sounds[n]._ended&&r++;for(n=e._sounds.length-1;n>=0;n--){if(r<=t)return;e._sounds[n]._ended&&(e._webAudio&&e._sounds[n]._node&&e._sounds[n]._node.disconnect(0),e._sounds.splice(n,1),r--)}}},_getSoundIds:function(e){if(void 0===e){for(var t=[],r=0;r<this._sounds.length;r++)t.push(this._sounds[r]._id);return t}return[e]},_refreshBuffer:function(e){return e._node.bufferSource=r.ctx.createBufferSource(),e._node.bufferSource.buffer=s[this._src],e._panner?e._node.bufferSource.connect(e._panner):e._node.bufferSource.connect(e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop||0),e._node.bufferSource.playbackRate.setValueAtTime(e._rate,r.ctx.currentTime),this},_cleanBuffer:function(e){var t=r._navigator&&r._navigator.vendor.indexOf("Apple")>=0;if(r._scratchBuffer&&e.bufferSource&&(e.bufferSource.onended=null,e.bufferSource.disconnect(0),t))try{e.bufferSource.buffer=r._scratchBuffer}catch(e){}return e.bufferSource=null,this},_clearSound:function(e){/MSIE |Trident\//.test(r._navigator&&r._navigator.userAgent)||(e.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(e){this._parent=e,this.init()};i.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,n=r._muted||e._muted||e._parent._muted?0:e._volume;return t._webAudio?(e._node=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),e._node.gain.setValueAtTime(n,r.ctx.currentTime),e._node.paused=!0,e._node.connect(r.masterGain)):r.noAudio||(e._node=r._obtainHtml5Audio(),e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(r._canPlayEvent,e._loadFn,!1),e._endFn=e._endListener.bind(e),e._node.addEventListener("ended",e._endFn,!1),e._node.src=t._src,e._node.preload=!0===t._preload?"auto":t._preload,e._node.volume=n*r.volume(),e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._rate=t._rate,e._seek=0,e._rateSeek=0,e._paused=!0,e._ended=!0,e._sprite="__default",e._id=++r._counter,e},_errorListener:function(){var e=this;e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorFn,!1)},_loadListener:function(){var e=this,t=e._parent;t._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),e._node.removeEventListener(r._canPlayEvent,e._loadFn,!1)},_endListener:function(){var e=this,t=e._parent;t._duration===1/0&&(t._duration=Math.ceil(10*e._node.duration)/10,t._sprite.__default[1]===1/0&&(t._sprite.__default[1]=1e3*t._duration),t._ended(e)),e._node.removeEventListener("ended",e._endFn,!1)}};var s={},o=function(e){var t=e._src;if(s[t])return e._duration=s[t].duration,void u(e);if(/^data:[^;]+;base64,/.test(t)){for(var r=atob(t.split(",")[1]),n=new Uint8Array(r.length),i=0;i<r.length;++i)n[i]=r.charCodeAt(i);l(n.buffer,e)}else{var o=new XMLHttpRequest;o.open(e._xhr.method,t,!0),o.withCredentials=e._xhr.withCredentials,o.responseType="arraybuffer",e._xhr.headers&&Object.keys(e._xhr.headers).forEach((function(t){o.setRequestHeader(t,e._xhr.headers[t])})),o.onload=function(){var t=(o.status+"")[0];"0"===t||"2"===t||"3"===t?l(o.response,e):e._emit("loaderror",null,"Failed loading audio file with status: "+o.status+".")},o.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete s[t],e.load())},a(o)}},a=function(e){try{e.send()}catch(t){e.onerror()}},l=function(e,t){var n=function(){t._emit("loaderror",null,"Decoding audio data failed.")},i=function(e){e&&t._sounds.length>0?(s[t._src]=e,u(t,e)):n()};"undefined"!=typeof Promise&&1===r.ctx.decodeAudioData.length?r.ctx.decodeAudioData(e).then(i).catch(n):r.ctx.decodeAudioData(e,i,n)},u=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue())},c=function(){if(r.usingWebAudio){try{"undefined"!=typeof AudioContext?r.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?r.ctx=new webkitAudioContext:r.usingWebAudio=!1}catch(e){r.usingWebAudio=!1}r.ctx||(r.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(r._navigator&&r._navigator.platform),t=r._navigator&&r._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=t?parseInt(t[1],10):null;if(e&&n&&n<9){var i=/safari/.test(r._navigator&&r._navigator.userAgent.toLowerCase());r._navigator&&!i&&(r.usingWebAudio=!1)}r.usingWebAudio&&(r.masterGain=void 0===r.ctx.createGain?r.ctx.createGainNode():r.ctx.createGain(),r.masterGain.gain.setValueAtTime(r._muted?0:r._volume,r.ctx.currentTime),r.masterGain.connect(r.ctx.destination)),r._setup()}};t.Howler=r,t.Howl=n,void 0!==D?(D.HowlerGlobal=e,D.Howler=r,D.Howl=n,D.Sound=i):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=r,window.Howl=n,window.Sound=i)}(),
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
function(){var e;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;for(var r=t._howls.length-1;r>=0;r--)t._howls[r].stereo(e);return t},HowlerGlobal.prototype.pos=function(e,t,r){var n=this;return n.ctx&&n.ctx.listener?(t="number"!=typeof t?n._pos[1]:t,r="number"!=typeof r?n._pos[2]:r,"number"!=typeof e?n._pos:(n._pos=[e,t,r],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(e,t,r,n,i,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return t="number"!=typeof t?a[1]:t,r="number"!=typeof r?a[2]:r,n="number"!=typeof n?a[3]:n,i="number"!=typeof i?a[4]:i,s="number"!=typeof s?a[5]:s,"number"!=typeof e?a:(o._orientation=[e,t,r,n,i,s],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(e,t,r,n,i,s),o)},Howl.prototype.init=(e=Howl.prototype.init,function(t){var r=this;return r._orientation=t.orientation||[1,0,0],r._stereo=t.stereo||null,r._pos=t.pos||null,r._pannerAttr={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:360,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:360,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:0,distanceModel:void 0!==t.distanceModel?t.distanceModel:"inverse",maxDistance:void 0!==t.maxDistance?t.maxDistance:1e4,panningModel:void 0!==t.panningModel?t.panningModel:"HRTF",refDistance:void 0!==t.refDistance?t.refDistance:1,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:1},r._onstereo=t.onstereo?[{fn:t.onstereo}]:[],r._onpos=t.onpos?[{fn:t.onpos}]:[],r._onorientation=t.onorientation?[{fn:t.onorientation}]:[],e.call(this,t)}),Howl.prototype.stereo=function(e,r){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,r)}}),n;var i=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===r){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var s=n._getSoundIds(r),o=0;o<s.length;o++){var a=n._soundById(s[o]);if(a){if("number"!=typeof e)return a._stereo;a._stereo=e,a._pos=[e,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||t(a,i),"spatial"===i?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(e,0,0):a._panner.pan.setValueAtTime(e,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(e,r,n,i){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(e,r,n,i)}}),s;if(r="number"!=typeof r?0:r,n="number"!=typeof n?-.5:n,void 0===i){if("number"!=typeof e)return s._pos;s._pos=[e,r,n]}for(var o=s._getSoundIds(i),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l){if("number"!=typeof e)return l._pos;l._pos=[e,r,n],l._node&&(l._panner&&!l._panner.pan||t(l,"spatial"),void 0!==l._panner.positionX?(l._panner.positionX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setPosition(e,r,n)),s._emit("pos",l._id)}}return s},Howl.prototype.orientation=function(e,r,n,i){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(e,r,n,i)}}),s;if(r="number"!=typeof r?s._orientation[1]:r,n="number"!=typeof n?s._orientation[2]:n,void 0===i){if("number"!=typeof e)return s._orientation;s._orientation=[e,r,n]}for(var o=s._getSoundIds(i),a=0;a<o.length;a++){var l=s._soundById(o[a]);if(l){if("number"!=typeof e)return l._orientation;l._orientation=[e,r,n],l._node&&(l._panner||(l._pos||(l._pos=s._pos||[0,0,-.5]),t(l,"spatial")),void 0!==l._panner.orientationX?(l._panner.orientationX.setValueAtTime(e,Howler.ctx.currentTime),l._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),l._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):l._panner.setOrientation(e,r,n)),s._emit("orientation",l._id)}}return s},Howl.prototype.pannerAttr=function(){var e,r,n,i=this,s=arguments;if(!i._webAudio)return i;if(0===s.length)return i._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(n=i._soundById(parseInt(s[0],10)))?n._pannerAttr:i._pannerAttr;e=s[0],void 0===r&&(e.pannerAttr||(e.pannerAttr={coneInnerAngle:e.coneInnerAngle,coneOuterAngle:e.coneOuterAngle,coneOuterGain:e.coneOuterGain,distanceModel:e.distanceModel,maxDistance:e.maxDistance,refDistance:e.refDistance,rolloffFactor:e.rolloffFactor,panningModel:e.panningModel}),i._pannerAttr={coneInnerAngle:void 0!==e.pannerAttr.coneInnerAngle?e.pannerAttr.coneInnerAngle:i._coneInnerAngle,coneOuterAngle:void 0!==e.pannerAttr.coneOuterAngle?e.pannerAttr.coneOuterAngle:i._coneOuterAngle,coneOuterGain:void 0!==e.pannerAttr.coneOuterGain?e.pannerAttr.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.pannerAttr.distanceModel?e.pannerAttr.distanceModel:i._distanceModel,maxDistance:void 0!==e.pannerAttr.maxDistance?e.pannerAttr.maxDistance:i._maxDistance,refDistance:void 0!==e.pannerAttr.refDistance?e.pannerAttr.refDistance:i._refDistance,rolloffFactor:void 0!==e.pannerAttr.rolloffFactor?e.pannerAttr.rolloffFactor:i._rolloffFactor,panningModel:void 0!==e.pannerAttr.panningModel?e.pannerAttr.panningModel:i._panningModel})}else 2===s.length&&(e=s[0],r=parseInt(s[1],10));for(var o=i._getSoundIds(r),a=0;a<o.length;a++)if(n=i._soundById(o[a])){var l=n._pannerAttr;l={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:l.coneInnerAngle,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:l.coneOuterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:l.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:l.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:l.maxDistance,refDistance:void 0!==e.refDistance?e.refDistance:l.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:l.rolloffFactor,panningModel:void 0!==e.panningModel?e.panningModel:l.panningModel};var u=n._panner;u?(u.coneInnerAngle=l.coneInnerAngle,u.coneOuterAngle=l.coneOuterAngle,u.coneOuterGain=l.coneOuterGain,u.distanceModel=l.distanceModel,u.maxDistance=l.maxDistance,u.refDistance=l.refDistance,u.rolloffFactor=l.rolloffFactor,u.panningModel=l.panningModel):(n._pos||(n._pos=i._pos||[0,0,-.5]),t(n,"spatial"))}return i},Sound.prototype.init=function(e){return function(){var t=this,r=t._parent;t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,e.call(this),t._stereo?r.stereo(t._stereo):t._pos&&r.pos(t._pos[0],t._pos[1],t._pos[2],t._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var t=this,r=t._parent;return t._orientation=r._orientation,t._stereo=r._stereo,t._pos=r._pos,t._pannerAttr=r._pannerAttr,t._stereo?r.stereo(t._stereo):t._pos?r.pos(t._pos[0],t._pos[1],t._pos[2],t._id):t._panner&&(t._panner.disconnect(0),t._panner=void 0,r._refreshBuffer(t)),e.call(this)}}(Sound.prototype.reset);var t=function(e,t){"spatial"===(t=t||"spatial")?(e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOuterAngle=e._pannerAttr.coneOuterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.panningModel=e._pannerAttr.panningModel,void 0!==e._panner.positionX?(e._panner.positionX.setValueAtTime(e._pos[0],Howler.ctx.currentTime),e._panner.positionY.setValueAtTime(e._pos[1],Howler.ctx.currentTime),e._panner.positionZ.setValueAtTime(e._pos[2],Howler.ctx.currentTime)):e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),void 0!==e._panner.orientationX?(e._panner.orientationX.setValueAtTime(e._orientation[0],Howler.ctx.currentTime),e._panner.orientationY.setValueAtTime(e._orientation[1],Howler.ctx.currentTime),e._panner.orientationZ.setValueAtTime(e._orientation[2],Howler.ctx.currentTime)):e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2])):(e._panner=Howler.ctx.createStereoPanner(),e._panner.pan.setValueAtTime(e._stereo,Howler.ctx.currentTime)),e._panner.connect(e._node),e._paused||e._parent.pause(e._id,!0).play(e._id,!0)}}()}));function T(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.addEventListener("error",(function(e){console.log(e)})),t.send(),t.responseText}function O(e,t){let r=t.lookupNamespaceURI(null);let n=[],i=t.evaluate(e,t,(function(e){return{i:r}[e]||null}),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),s=i.iterateNext();for(;s;)n.push(s),s=i.iterateNext();return n}var $=function(e){var t=this;t.sounds=[],t._sprite=e.sprite,t._reading$=new k,t._tinySprite=Object.keys(e.sprite).map((e=>[t._sprite[e][0],e])),t._tinySprite.pop(),t._percentPlayed=new F("0%"),t.sound=new S.Howl({src:e.src,sprite:e.sprite,rate:e.rate}),requestAnimationFrame(t.step.bind(t))};function R(e,t){let r=function(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.addEventListener("error",(function(e){console.log(e)})),t.send(),t.responseXML}(e);for(let e of t){let t=M(r,`//w[@id='${e.id}']`).iterateNext(),n=r.createElement("anchor");n.setAttribute("time",`${e.time.toFixed(2)}s`),t.insertBefore(n,t.firstChild)}let n=(new XMLSerializer).serializeToString(r);return n=n.replace(/<w id="[a-z|0-9]*">/g,""),n=n.replace(/<\/w>/g,""),n}function M(e,t){return e.evaluate(t,e,null,XPathResult.ANY_TYPE,null)}$.prototype={play:function(e){var t=this;t._spriteLeft=t._tinySprite;var r=e;return t.sound.play(r)},pause:function(){return this.sound.pause(),this.sound.id},goBack:function(e,t){var r=this;if(r._spriteLeft=r._tinySprite,r.sound.seek(e=e)-t>0){e=r.sound.seek(r.sound.seek(e=e)-t,e);for(var n=r.sound.seek(e=e),i=0;i<r._spriteLeft.length;i++)1e3*n>=r._spriteLeft[i][0]&&(r._reading$.next(r._spriteLeft[i][1]),r._spriteLeft=r._spriteLeft.slice(i,r._spriteLeft.length))}else{e=r.sound.seek(0,e);r._reading$.next(r._spriteLeft[0][1])}return e},goTo:function(e,t){var r=this;r._spriteLeft=r._tinySprite;e=r.sound.seek(t,e);for(var n=r.sound.seek(e=e),i=0;i<r._spriteLeft.length;i++)1e3*n>=r._spriteLeft[i][0]&&(r._reading$.next(r._spriteLeft[i][1]),r._spriteLeft=r._spriteLeft.slice(i,r._spriteLeft.length));return e},stop:function(){return this._reading$.next(""),this.sound.stop()},step:function(){for(var e=this,t=0;t<e.sounds.length;t++){for(var r=e.sound.seek()||0,n=0;n<e._spriteLeft.length;n++)r>0&&1e3*r>=e._spriteLeft[n][0]&&(e._reading$.next(e._spriteLeft[n][1]),e._spriteLeft=e._spriteLeft.slice(n,e._spriteLeft.length));let i=(r/e.sound.duration()*100||0)+"%";e.sounds[t].style.width=i,e.sounds[t].setAttribute("offset",i)}requestAnimationFrame(e.step.bind(e))}};var L=P((function(e,t){
/*!
 * wavesurfer.js 6.1.0 (2022-03-31)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
var r;self,r=function(){return(()=>{var e={"./src/drawer.canvasentry.js":
/*!***********************************!*\
  !*** ./src/drawer.canvasentry.js ***!
  \***********************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(r(/*! ./util/style */"./src/util/style.js")),i=s(r(/*! ./util/get-id */"./src/util/get-id.js"));function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,r,s;return t=e,(r=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,r,i){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=r,this.wave.height=i;var s={width:e+"px"};(0,n.default)(this.wave,s),this.hasProgressCanvas&&(this.progress.width=r,this.progress.height=i,(0,n.default)(this.progress,s))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,e),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,t))}},{key:"getFillStyle",value:function(e,t){if("string"==typeof t||t instanceof CanvasGradient)return t;var r=e.createLinearGradient(0,0,0,e.canvas.height);return t.forEach((function(e,n){return r.addColorStop(n/t.length,e)})),r}},{key:"applyCanvasTransforms",value:function(e){e&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(e,t,r,n,i){this.fillRectToContext(this.waveCtx,e,t,r,n,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,r,n,i)}},{key:"fillRectToContext",value:function(e,t,r,n,i,s){e&&(s?this.drawRoundedRect(e,t,r,n,i,s):e.fillRect(t,r,n,i))}},{key:"drawRoundedRect",value:function(e,t,r,n,i,s){0!==i&&(i<0&&(r-=i*=-1),e.beginPath(),e.moveTo(t+s,r),e.lineTo(t+n-s,r),e.quadraticCurveTo(t+n,r,t+n,r+s),e.lineTo(t+n,r+i-s),e.quadraticCurveTo(t+n,r+i,t+n-s,r+i),e.lineTo(t+s,r+i),e.quadraticCurveTo(t,r+i,t,r+i-s),e.lineTo(t,r+s),e.quadraticCurveTo(t,r,t+s,r),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,r,n,i,s){this.drawLineToContext(this.waveCtx,e,t,r,n,i,s),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,r,n,i,s)}},{key:"drawLineToContext",value:function(e,t,r,n,i,s,o){if(e){var a,l,u,c=t.length/2,h=Math.round(c*this.start),d=h,f=Math.round(c*this.end)+1,p=this.wave.width/(f-d-1),m=n+i,g=r/n;for(e.beginPath(),e.moveTo((d-h)*p,m),e.lineTo((d-h)*p,m-Math.round((t[2*d]||0)/g)),a=d;a<f;a++)l=t[2*a]||0,u=Math.round(l/g),e.lineTo((a-h)*p+this.halfPixel,m-u);for(var v=f-1;v>=d;v--)l=t[2*v+1]||0,u=Math.round(l/g),e.lineTo((v-h)*p+this.halfPixel,m-u);e.lineTo((d-h)*p,m-Math.round((t[2*d+1]||0)/g)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,r){var n=this;return"blob"===r?new Promise((function(r){n.wave.toBlob(r,e,t)})):"dataURL"===r?this.wave.toDataURL(e,t):void 0}}])&&o(t.prototype,r),s&&o(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a,e.exports=t.default},"./src/drawer.js":
/*!***********************!*\
  !*** ./src/drawer.js ***!
  \***********************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(u,e);var t,r,n,s=l(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=s.call(this)).container=i.withOrientation(e,t.vertical),r.params=t,r.width=0,r.height=t.height*r.params.pixelRatio,r.lastPos=0,r.wrapper=null,r}return t=u,(r=[{key:"style",value:function(e,t){return i.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=i.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var r,n=i.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,s=this.wrapper.getBoundingClientRect(),o=this.width,a=this.getWidth(),l=this.getProgressPixels(s,n);return r=!this.params.fillParent&&o<a?l*(this.params.pixelRatio/o)||0:(l+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(r,0,1)}},{key:"getProgressPixels",value:function(e,t){return this.params.rtl?e.right-t:t-e.left}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var r=i.withOrientation(t,e.params.vertical),n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var s=e.wrapper.getBoundingClientRect();if(r.clientY>=s.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("dblclick",(function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){return e.fireEvent("scroll",t)}))}},{key:"drawPeaks",value:function(e,t,r,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,r,n):this.drawWave(e,0,r,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var r=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,s=e-n,o=s-r;if(0!=i){if(!t&&-n<=o&&o<n){var a=this.params.autoCenterRate;a/=n,a*=i,s=r+(o=Math.max(-a,Math.min(a,o)))}(s=Math.max(0,Math.min(i,s)))!=r&&(this.wrapper.scrollLeft=s)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(r,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e)return!1;if(this.width=e,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var t=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:t})}return this.updateSize(),!0}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,r=Math.round(e*this.width)*t;if(r<this.lastPos||r-this.lastPos>=t){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(r)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,r,n){}},{key:"drawWave",value:function(e,t,r,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Observer);t.default=h,e.exports=t.default},"./src/drawer.multicanvas.js":
/*!***********************************!*\
  !*** ./src/drawer.multicanvas.js ***!
  \***********************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(/*! ./drawer */"./src/drawer.js")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js")),o=l(r(/*! ./drawer.canvasentry */"./src/drawer.canvasentry.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(a,e);var t,r,n,i=h(a);function a(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),r.hasProgressCanvas=t.waveColor!=t.progressColor,r.halfPixel=.5/t.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=o.default,r.canvasContextAttributes=t.drawingContextAttributes,r.overlap=2*Math.ceil(t.pixelRatio/2),r.barRadius=t.barRadius||0,r.vertical=t.vertical,r}return t=a,r=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=s.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach((function(t,r){r==i&&(n=e.width-e.maxCanvasWidth*i),e.updateDimensions(t,n,e.height),t.clearWave()}))}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,r=s.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(r,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),e.initWave(r),this.hasProgressCanvas){var n=s.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(n,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),e.initProgress(n)}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave.domElement),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress.domElement),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,r){var n=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,i,t,r),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;s.frame((function(){e.canvases.forEach((function(e){return e.clearWave()}))}))()}},{key:"drawBars",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,(function(e){var t=e.absmax,s=e.hasMinVals,o=e.offsetY,a=e.halfH,l=e.peaks,u=e.channelIndex;if(void 0!==r)for(var c=s?2:1,h=l.length/c,d=i.params.barWidth*i.params.pixelRatio,f=d+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(d/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),p=h/i.width,m=n,g=r;g<m;g+=f){var v=0,_=Math.floor(g*p)*c,y=Math.floor((g+f)*p)*c;do{var b=Math.abs(l[_]);b>v&&(v=b),_+=c}while(_<y);var w=Math.round(v/t*a);0==w&&i.params.barMinHeight&&(w=i.params.barMinHeight),i.fillRect(g+i.halfPixel,a-w+o,d+i.halfPixel,2*w,i.barRadius,u)}}))}},{key:"drawWave",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,(function(e){var t=e.absmax,s=e.hasMinVals,o=e.offsetY,a=e.halfH,l=e.peaks,u=e.channelIndex;if(!s){for(var c=[],h=l.length,d=0;d<h;d++)c[2*d]=l[d],c[2*d+1]=-l[d];l=c}void 0!==r&&i.drawLine(l,t,a,o,r,n,u),i.fillRect(0,a+o-i.halfPixel,i.width,i.halfPixel,i.barRadius,u)}))}},{key:"drawLine",value:function(e,t,r,n,i,s,o){var a=this,l=this.params.splitChannelsOptions.channelColors[o]||{},u=l.waveColor,c=l.progressColor;this.canvases.forEach((function(o,l){a.setFillStyles(o,u,c),a.applyCanvasTransforms(o,a.params.vertical),o.drawLines(e,t,r,n,i,s)}))}},{key:"fillRect",value:function(e,t,r,n,i,s){for(var o=Math.floor(e/this.maxCanvasWidth),a=Math.min(Math.ceil((e+r)/this.maxCanvasWidth)+1,this.canvases.length),l=o;l<a;l++){var u=this.canvases[l],c=l*this.maxCanvasWidth,h={x1:Math.max(e,l*this.maxCanvasWidth),y1:t,x2:Math.min(e+r,l*this.maxCanvasWidth+u.wave.width),y2:t+n};if(h.x1<h.x2){var d=this.params.splitChannelsOptions.channelColors[s]||{},f=d.waveColor,p=d.progressColor;this.setFillStyles(u,f,p),this.applyCanvasTransforms(u,this.params.vertical),u.fillRects(h.x1-c,h.y1,h.x2-h.x1,h.y2-h.y1,i)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,r,n,i,o,a){var l=this;return s.frame((function(){if(e[0]instanceof Array){var u=e;if(l.params.splitChannels){var c,h=u.filter((function(e,t){return!l.hideChannel(t)}));return l.params.splitChannelsOptions.overlay||l.setHeight(Math.max(h.length,1)*l.params.height*l.params.pixelRatio),l.params.splitChannelsOptions&&l.params.splitChannelsOptions.relativeNormalization&&(c=s.max(u.map((function(e){return s.absMax(e)})))),u.forEach((function(e,t){return l.prepareDraw(e,t,r,n,i,h.indexOf(e),c)}))}e=u[0]}if(!l.hideChannel(t)){var d=1/l.params.barHeight;l.params.normalize&&(d=void 0===a?s.absMax(e):a);var f=[].some.call(e,(function(e){return e<0})),p=l.params.height*l.params.pixelRatio,m=p/2,g=p*o||0;return l.params.splitChannelsOptions&&l.params.splitChannelsOptions.overlay&&(g=0),i({absmax:d,hasMinVals:f,height:p,offsetY:g,halfH:m,peaks:e,channelIndex:t})}}))()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,r)}},{key:"applyCanvasTransforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.applyCanvasTransforms(t)}},{key:"getImage",value:function(e,t,r){if("blob"===r)return Promise.all(this.canvases.map((function(n){return n.getImage(e,t,r)})));if("dataURL"===r){var n=this.canvases.map((function(n){return n.getImage(e,t,r)}));return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}],r&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.default);t.default=p,e.exports=t.default},"./src/mediaelement-webaudio.js":
/*!**************************************!*\
  !*** ./src/mediaelement-webaudio.js ***!
  \**************************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i;function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(){return o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=a(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},o.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(a,e);var t,r,n,i=u(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=a,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,r){o(h(a.prototype),"_load",this).call(this,e,t,r),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),o(h(a.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){o(h(a.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(((i=r(/*! ./mediaelement */"./src/mediaelement.js"))&&i.__esModule?i:{default:i}).default);t.default=d,e.exports=t.default},"./src/mediaelement.js":
/*!*****************************!*\
  !*** ./src/mediaelement.js ***!
  \*****************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,s=(i=r(/*! ./webaudio */"./src/webaudio.js"))&&i.__esModule?i:{default:i},o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,r,n,i=d(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=s,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])}))}},{key:"createTimer",value:function(){var e=this;this.on("play",(function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),o.frame(t)())})),this.on("pause",(function(){e.fireEvent("audioprocess",e.getCurrentTime())}))}},{key:"load",value:function(e,t,r,n){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==n?"auto":n,i.src=e,i.style.width="100%";var s=t.querySelector(this.mediaType);s&&t.removeChild(s),t.appendChild(i),this._load(i,r,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,r){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==r||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null==e||isNaN(e)||(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var r=this.media.play();return t&&this.setPlayEnd(t),r}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(r){r>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,r){return this.buffer?u(p(s.prototype),"getPeaks",this).call(this,e,t,r):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(s.default);t.default=m,e.exports=t.default},"./src/peakcache.js":
/*!**************************!*\
  !*** ./src/peakcache.js ***!
  \**************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,i;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,r){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&n.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=r;)n.push(this.peakCacheRanges[i]),i++;i%2==0&&n.push(r),n=n.filter((function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort((function(e,t){return e-t})).filter((function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}));var s=[];for(i=0;i<n.length;i+=2)s.push([n[i],n[i+1]]);return s}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":
/*!****************************!*\
  !*** ./src/util/absMax.js ***!
  \****************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),r=(0,i.default)(e);return-r>t?-r:t};var n=s(r(/*! ./max */"./src/util/max.js")),i=s(r(/*! ./min */"./src/util/min.js"));function s(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":
/*!***************************!*\
  !*** ./src/util/clamp.js ***!
  \***************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return Math.min(Math.max(t,e),r)},e.exports=t.default},"./src/util/fetch.js":
/*!***************************!*\
  !*** ./src/util/fetch.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new i.default,r=new Headers,n=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach((function(e){r.append(e.key,e.value)}));var s=e.responseType||"json",a={method:e.method||"GET",headers:r,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(n,a).then((function(e){t.response=e;var r=!0;e.body||(r=!1);var n=e.headers.get("content-length");return null===n&&(r=!1),r?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new o(t,n,e)),a)):e})).then((function(e){var t;if(e.ok)switch(s){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+s}throw t||(t="HTTP error status: "+e.status),new Error(t)})).then((function(e){t.fireEvent("success",e)})).catch((function(e){t.fireEvent("error",e)})),t.fetchRequest=n,t};var n,i=(n=r(/*! ./observer */"./src/util/observer.js"))&&n.__esModule?n:{default:n};function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(r,10),this.loaded=0}var t,r,n;return t=e,(r=[{key:"start",value:function(e){var t=this;!function r(){t.instance._reader.read().then((function(n){var i=n.done,s=n.value;if(i)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=s.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(s),r()})).catch((function(t){e.error(t)}))}()}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=t.default},"./src/util/frame.js":
/*!***************************!*\
  !*** ./src/util/frame.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,i.default)((function(){return e.apply(void 0,r)}))}};var n,i=(n=r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js"))&&n.__esModule?n:{default:n};e.exports=t.default},"./src/util/get-id.js":
/*!****************************!*\
  !*** ./src/util/get-id.js ***!
  \****************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e="wavesurfer_"),e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":
/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ignoreSilenceMode",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function(){return m.default}});var n=v(r(/*! ./get-id */"./src/util/get-id.js")),i=v(r(/*! ./max */"./src/util/max.js")),s=v(r(/*! ./min */"./src/util/min.js")),o=v(r(/*! ./absMax */"./src/util/absMax.js")),a=v(r(/*! ./observer */"./src/util/observer.js")),l=v(r(/*! ./style */"./src/util/style.js")),u=v(r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js")),c=v(r(/*! ./frame */"./src/util/frame.js")),h=v(r(/*! debounce */"./node_modules/debounce/index.js")),d=v(r(/*! ./prevent-click */"./src/util/prevent-click.js")),f=v(r(/*! ./fetch */"./src/util/fetch.js")),p=v(r(/*! ./clamp */"./src/util/clamp.js")),m=v(r(/*! ./orientation */"./src/util/orientation.js")),g=v(r(/*! ./silence-mode */"./src/util/silence-mode.js"));function v(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":
/*!*************************!*\
  !*** ./src/util/max.js ***!
  \*************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach((function(r){e[r]>t&&(t=e[r])})),t},e.exports=t.default},"./src/util/min.js":
/*!*************************!*\
  !*** ./src/util/min.js ***!
  \*************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach((function(r){e[r]<t&&(t=e[r])})),t},e.exports=t.default},"./src/util/observer.js":
/*!******************************!*\
  !*** ./src/util/observer.js ***!
  \******************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,i;return t=e,n=[{key:"on",value:function(e,t){var r=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return r.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var r,n=this.handlers[e];if(n)if(t)for(r=n.length-1;r>=0;r--)n[r]==t&&n.splice(r,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var r=this;return this.on(e,(function n(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];t.apply(r,s),setTimeout((function(){r.un(e,n)}),0)}))}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var i=this.handlers[e];i&&i.forEach((function(e){e.apply(void 0,r)}))}}}],n&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=n,e.exports=t.default},"./src/util/orientation.js":
/*!*********************************!*\
  !*** ./src/util/orientation.js ***!
  \*********************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return t[i]?t:new Proxy(t,{get:function(t,s,o){if(s===i)return!0;if("domElement"===s)return t;if("style"===s)return e(t.style,r);if("canvas"===s)return e(t.canvas,r);if("getBoundingClientRect"===s)return function(){return e(t.getBoundingClientRect.apply(t,arguments),r)};if("getContext"===s)return function(){return e(t.getContext.apply(t,arguments),r)};var a=t[n(s,r)];return"function"==typeof a?a.bind(t):a},set:function(e,t,i){return e[n(t,r)]=i,!0}})};var r={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function n(e,t){return Object.prototype.hasOwnProperty.call(r,e)&&t?r[e]:e}var i=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js":
/*!***********************************!*\
  !*** ./src/util/prevent-click.js ***!
  \***********************************/(e,t)=>{function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",r,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":
/*!*********************************************!*\
  !*** ./src/util/request-animation-frame.js ***!
  \*********************************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},"./src/util/silence-mode.js":
/*!**********************************!*\
  !*** ./src/util/silence-mode.js ***!
  \**********************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.createElement("div");e.innerHTML='<audio x-webkit-airplay="deny"></audio>';var t=e.children.item(0);t.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",t.preload="auto",t.type="audio/mpeg",t.disableRemotePlayback=!0,t.play(),t.remove(),e.remove()},e.exports=t.default},"./src/util/style.js":
/*!***************************!*\
  !*** ./src/util/style.js ***!
  \***************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach((function(r){e.style[r]!==t[r]&&(e.style[r]=t[r])})),e},e.exports=t.default},"./src/wavesurfer.js":
/*!***************************!*\
  !*** ./src/wavesurfer.js ***!
  \***************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=s?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js")),s=c(r(/*! ./drawer.multicanvas */"./src/drawer.multicanvas.js")),o=c(r(/*! ./webaudio */"./src/webaudio.js")),a=c(r(/*! ./mediaelement */"./src/mediaelement.js")),l=c(r(/*! ./peakcache */"./src/peakcache.js")),u=c(r(/*! ./mediaelement-webaudio */"./src/mediaelement-webaudio.js"));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(h,e);var t,r,n,c=f(h);function h(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),v(m(t=c.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:s.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}}),v(m(t),"backends",{MediaElement:a.default,WebAudio:o.default,MediaElementWebAudio:u.default}),v(m(t),"util",i),t.params=Object.assign({},t.defaultParams,e),t.params.splitChannelsOptions=Object.assign({},t.defaultParams.splitChannelsOptions,e.splitChannelsOptions),t.container="string"==typeof e.container?document.querySelector(t.params.container):t.params.container,!t.container)throw new Error("Container element not found");if(null==t.params.mediaContainer?t.mediaContainer=t.container:"string"==typeof t.params.mediaContainer?t.mediaContainer=document.querySelector(t.params.mediaContainer):t.mediaContainer=t.params.mediaContainer,!t.mediaContainer)throw new Error("Media Container element not found");if(t.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(t.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===t.params.rtl&&(!0===t.params.vertical?i.style(t.container,{transform:"rotateX(180deg)"}):i.style(t.container,{transform:"rotateY(180deg)"})),t.params.backgroundColor&&t.setBackgroundColor(t.params.backgroundColor),t.savedVolume=0,t.isMuted=!1,t.tmpEvents=[],t.currentRequest=null,t.arraybuffer=null,t.drawer=null,t.backend=null,t.peakCache=null,"function"!=typeof t.params.renderer)throw new Error("Renderer parameter is invalid");t.Drawer=t.params.renderer,"AudioElement"==t.params.backend&&(t.params.backend="MediaElement"),"WebAudio"!=t.params.backend&&"MediaElementWebAudio"!==t.params.backend||o.default.prototype.supportsWebAudio.call(null)||(t.params.backend="MediaElement"),t.Backend=t.backends[t.params.backend],t.initialisedPluginList={},t.isDestroyed=!1,t.isReady=!1;var r=0;return t._onResize=i.debounce((function(){r==t.drawer.wrapper.clientWidth||t.params.scrollParent||(r=t.drawer.wrapper.clientWidth)&&t.drawer.fireEvent("redraw")}),"number"==typeof t.params.responsive?t.params.responsive:100),p(t,m(t))}return t=h,r=[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach((function(e){return t.addPlugin(e)})),e.forEach((function(e){e.deferInit||t.initPlugin(e.name)})),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach((function(r){t[r]=e.staticProps[r]}));var r=e.instance;return Object.getOwnPropertyNames(i.Observer.prototype).forEach((function(e){r.prototype[e]=i.Observer.prototype[e]})),this[e.name]=new r(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach((function(t){return e.destroyPlugin(t)}))}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())})),this.drawer.on("click",(function(t,r){setTimeout((function(){return e.seekTo(r)}),0)})),this.drawer.on("scroll",(function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)}))}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")})),this.backend.on("play",(function(){return e.fireEvent("play")})),this.backend.on("pause",(function(){return e.fireEvent("pause")})),this.backend.on("audioprocess",(function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){e.drawer.progress(e.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new l.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var r=this;return this.params.ignoreSilenceMode&&i.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return r.play(e,t)})),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,r=this.getCurrentTime()||0;r=Math.max(0,Math.min(t,r+(e||0))),this.seekAndCenter(r/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return t.seekTo(e)}));var r="WebAudio"===this.params.backend,n=this.backend.isPaused();r&&!n&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),r&&!n&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,t){this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,i.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),r=this.drawer.getWidth(),n=t,i=0,s=Math.max(i+r,n);if(this.params.fillParent&&(!this.params.scrollParent||t<r)&&(i=0,s=n=r),this.params.partialRender){var o,a=this.peakCache.addRangeToPeakCache(n,i,s);for(o=0;o<a.length;o++)e=this.backend.getPeaks(n,a[o][0],a[o][1]),this.drawer.drawPeaks(e,n,a[o][0],a[o][1])}else e=this.backend.getPeaks(n,i,s),this.drawer.drawPeaks(e,n,i,s);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,(function(e){t.isDestroyed||t.loadDecodedBuffer(e)}))}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,r=new FileReader;r.addEventListener("progress",(function(e){return t.onProgress(e)})),r.addEventListener("load",(function(e){return t.loadArrayBuffer(e.target.result)})),r.addEventListener("error",(function(){return t.fireEvent("error","Error reading file")})),r.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,r,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),r){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(r),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},s=Object.keys(i).filter((function(e){return i[e]}));s.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+s.join("\n\t- ")),r=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,r,n)}}},{key:"loadBuffer",value:function(e,t,r){var n=this,i=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,(function(e){return n.loadArrayBuffer(e)}))};if(!t)return i();this.backend.setPeaks(t,r),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(e,t,r,n){var i=this,s=e;if("string"==typeof e)this.backend.load(s,this.mediaContainer,t,r);else{var o=e;this.backend.loadElt(o,t),s=o.src}this.tmpEvents.push(this.backend.once("canplay",(function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))})),this.backend.once("error",(function(e){return i.fireEvent("error",e)}))),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(s,(function(e){i.decodeArrayBuffer(e,(function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(e,t){var r=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(n){r.isDestroyed||r.arraybuffer!=e||(t(n),r.arraybuffer=null)}),(function(){return r.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function(e,t){var r=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),s=i.fetchFile(n);return this.currentRequest=s,this.tmpEvents.push(s.on("progress",(function(e){r.onProgress(e)})),s.on("success",(function(e){t(e),r.currentRequest=null})),s.on("error",(function(e){r.fireEvent("error",e),r.currentRequest=null}))),s}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,r,n,i){e=e||1024,n=n||0,t=t||1e4,r=r||!1;var s=this.backend.getPeaks(e,n,i),o=[].map.call(s,(function(e){return Math.round(e*t)/t}));return new Promise((function(e,t){if(!r){var n=new Blob([JSON.stringify(o)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(n);window.open(i),URL.revokeObjectURL(i)}e(o)}))}},{key:"exportImage",value:function(e,t,r){return e||(e="image/png"),t||(t=1),r||(r="dataURL"),this.drawer.getImage(e,t,r)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(e){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],n=[{key:"create",value:function(e){return new h(e).init()}}],r&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.Observer);t.default=y,v(y,"VERSION","6.1.0"),v(y,"util",i),e.exports=t.default},"./src/webaudio.js":
/*!*************************!*\
  !*** ./src/webaudio.js ***!
  \*************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(i,a,l):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="playing",p="paused",m="finished",g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(s,e);var t,r,n,i=l(s);function s(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),d(c(n=i.call(this)),"audioContext",null),d(c(n),"offlineAudioContext",null),d(c(n),"stateBehaviors",(d(t={},f,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),d(t,p,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),d(t,m,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),n.params=e,n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{}),n.lastPlay=n.ac.currentTime,n.startPosition=0,n.scheduledPause=null,n.states=(d(r={},f,Object.create(n.stateBehaviors.playing)),d(r,p,Object.create(n.stateBehaviors.paused)),d(r,m,Object.create(n.stateBehaviors.finished)),r),n.buffer=null,n.filters=[],n.gainNode=null,n.mergedPeaks=null,n.offlineAc=null,n.peaks=null,n.playbackRate=1,n.analyser=null,n.scriptNode=null,n.source=null,n.splitPeaks=[],n.state=null,n.explicitDuration=e.duration,n.sinkStreamDestination=null,n.sinkAudioElement=null,n.destroyed=!1,n}return t=s,r=[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(p),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(s.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(s.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(m),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states.playing&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){return e?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(e)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,r){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(e,(function(e){return t(e)}),r):this.offlineAc.decodeAudioData(e).then((function(e){return t(e)})).catch((function(e){return r(e)}))}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,r=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<r;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,r){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,r=r||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var i,s=this.buffer.length/e,o=~~(s/10)||1,a=this.buffer.numberOfChannels;for(i=0;i<a;i++){var l=this.splitPeaks[i],u=this.buffer.getChannelData(i),c=void 0;for(c=t;c<=r;c++){var h=~~(c*s),d=~~(h+s),f=u[h],p=f,m=void 0;for(m=h;m<d;m+=o){var g=u[m];g>p&&(p=g),g<f&&(f=g)}l[2*c]=p,l[2*c+1]=f,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||f<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=f)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState(p),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var r=this.seekTo(e,t);e=r.start,t=r.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(f),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(e){}this.setState(p),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}],r&&o(t.prototype,r),n&&o(t,n),Object.defineProperty(t,"prototype",{writable:!1}),s}(i.Observer);t.default=g,d(g,"scriptBufferSize",256),e.exports=t.default},"./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/e=>{function t(e,t,r){var n,i,s,o,a;function l(){var u=Date.now()-o;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,r||(a=e.apply(s,i),s=i=null))}null==t&&(t=100);var u=function(){s=this,i=arguments,o=Date.now();var u=r&&!n;return n||(n=setTimeout(l,t)),u&&(a=e.apply(s,i),s=i=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=e.apply(s,i),s=i=null,clearTimeout(n),n=null)},u}t.debounce=t,e.exports=t}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}("./src/wavesurfer.js");return r})()},e.exports=r()}));const j=B(L);class I{constructor(e,t,r){this.wavesurfer=r,this.wrapper=r.drawer.wrapper,this.util=r.util,this.style=this.util.style,this.regionsUtil=t,this.vertical=r.drawer.params.vertical,this.id=null==e.id?r.util.getId():e.id,this.start=Number(e.start)||0,this.end=null==e.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(e.end),this.resize=void 0===e.resize||Boolean(e.resize),this.drag=void 0===e.drag||Boolean(e.drag),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(e.loop),this.color=e.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=e.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=e.data||{},this.attributes=e.attributes||{},this.showTooltip=e.showTooltip??!0,this.maxLength=e.maxLength,this.minLength=e.minLength,this._onRedraw=()=>this.updateRender(),this.scroll=!1!==e.scroll&&r.params.scrollParent,this.scrollSpeed=e.scrollSpeed||1,this.scrollThreshold=e.scrollThreshold||10,this.preventContextMenu=void 0!==e.preventContextMenu&&Boolean(e.preventContextMenu);let n=null==e.channelIdx?-1:parseInt(e.channelIdx);if(this.channelIdx=n,this.regionHeight="100%",this.marginTop="0px",-1!==n){let e=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;e>=0&&n<e&&(this.regionHeight=Math.floor(1/e*100)+"%",this.marginTop=this.wavesurfer.getHeight()*n+"px")}this.formatTimeCallback=e.formatTimeCallback,this.edgeScrollWidth=e.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}update(e,t){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.handleStyle&&(this.handleStyle=e.handleStyle),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize),this.updateHandlesResize(this.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,t)}remove(){this.element&&(this.wrapper.removeChild(this.element.domElement),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}play(e){const t=e||this.start;this.wavesurfer.play(t,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}playLoop(e){this.loop=!0,this.play(e)}setLoop(e){this.loop=e}render(){this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id);for(const e in this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";const e={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},t="none"!==this.handleStyle.left?Object.assign({left:"0px"},e,this.handleStyle.left):null,r="none"!==this.handleStyle.right?Object.assign({right:"0px"},e,this.handleStyle.right):null;t&&this.style(this.handleLeftEl,t),r&&this.style(this.handleRightEl,r)}this.updateRender(),this.bindEvents()}formatTime(e,t){return this.formatTimeCallback?this.formatTimeCallback(e,t):(e==t?[e]:[e,t]).map((e=>[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2)].join(":"))).join("-")}getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}updateRender(){const e=this.wavesurfer.getDuration(),t=this.getWidth();let r=this.start,n=this.end;if(r<0&&(r=0,n-=r),n>e&&(n=e,r=e-(n-r)),null!=this.minLength&&(n=Math.max(r+this.minLength,n)),null!=this.maxLength&&(n=Math.min(r+this.maxLength,n)),null!=this.element){const i=Math.round(r/e*t),s=Math.round(n/e*t)-i;this.style(this.element,{left:i+"px",width:s+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"});for(const e in this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}bindInOut(){this.firedIn=!1,this.firedOut=!1;const e=e=>{let t=Math.round(10*this.start)/10,r=Math.round(10*this.end)/10;e=Math.round(10*e)/10,!this.firedOut&&this.firedIn&&(t>e||r<=e)&&(this.firedOut=!0,this.firedIn=!1,this.fireEvent("out"),this.wavesurfer.fireEvent("region-out",this)),!this.firedIn&&t<=e&&r>e&&(this.firedIn=!0,this.firedOut=!1,this.fireEvent("in"),this.wavesurfer.fireEvent("region-in",this))};this.wavesurfer.backend.on("audioprocess",e),this.on("remove",(()=>{this.wavesurfer.backend.un("audioprocess",e)})),this.on("out",(()=>{if(this.loop){const e=this.wavesurfer.getCurrentTime();e>=this.start&&e<=this.end&&this.wavesurfer.play(this.start)}}))}bindEvents(){const e=this.preventContextMenu;this.element.addEventListener("mouseenter",(e=>{this.fireEvent("mouseenter",e),this.wavesurfer.fireEvent("region-mouseenter",this,e)})),this.element.addEventListener("mouseleave",(e=>{this.fireEvent("mouseleave",e),this.wavesurfer.fireEvent("region-mouseleave",this,e)})),this.element.addEventListener("click",(e=>{e.preventDefault(),this.fireEvent("click",e),this.wavesurfer.fireEvent("region-click",this,e)})),this.element.addEventListener("dblclick",(e=>{e.stopPropagation(),e.preventDefault(),this.fireEvent("dblclick",e),this.wavesurfer.fireEvent("region-dblclick",this,e)})),this.element.addEventListener("contextmenu",(t=>{e&&t.preventDefault(),this.fireEvent("contextmenu",t),this.wavesurfer.fireEvent("region-contextmenu",this,t)})),(this.drag||this.resize)&&this.bindDragEvents()}bindDragEvents(){const e=this.wavesurfer.drawer.container,t=this.scrollSpeed;let r,n,i,s,o,a,l,u,c,h=!1;const d=e=>{let n=this.util.withOrientation(e,this.vertical);const h=this.wavesurfer.getDuration();if(!a||!i&&!o)return;const f=n.clientX;let p=0,m=0,g=0,v=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e)*h);if(i)-1===a?(m=u*this.wavesurfer.params.minPxPerSec,p=f-l.left):(m=c*this.wavesurfer.params.minPxPerSec,p=l.right-f);else{let e=this.minLength;e||(e=0),"start"===o?(v>this.end-e&&(v=this.end-e,g=t*a),v<0&&(v=0)):"end"===o&&(v<this.start+e&&(v=this.start+e,g=t*a),v>h&&(v=h))}const _=this.wrapper.scrollLeft;if(-1===a){if(0===Math.round(_))return;if(Math.round(_-m+p)<=0)return}else{if(Math.round(_)===s)return;if(Math.round(_+m-p)>=s)return}let y=_-g+t*a;if(-1===a){const e=Math.max(0+m-p,y);this.wrapper.scrollLeft=y=e}else{const e=Math.min(s-m+p,y);this.wrapper.scrollLeft=y=e}const b=v-r;r=v,i?this.onDrag(b):this.onResize(b,o),window.requestAnimationFrame((()=>{d(e)}))},f=e=>{const t=this.wavesurfer.getDuration();e.touches&&e.touches.length>1||(n=e.targetTouches?e.targetTouches[0].identifier:null,(this.drag||this.resize)&&e.stopPropagation(),r=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(e,!0)*t),u=r-this.start,c=this.end-r,s=this.wrapper.scrollWidth-this.wrapper.clientWidth,l=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.isResizing=!1,this.isDragging=!1,"handle"===e.target.tagName.toLowerCase()?(this.isResizing=!0,o=e.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(this.isDragging=!0,i=!0,o=!1))},p=e=>{e.touches&&e.touches.length>1||((i||o)&&(this.isDragging=!1,this.isResizing=!1,i=!1,a=null,o=!1),h&&(h=!1,this.util.preventClick(),this.fireEvent("update-end",e),this.wavesurfer.fireEvent("region-update-end",this,e)))},m=t=>{const s=this.wavesurfer.getDuration();let f=this.util.withOrientation(t,this.vertical);if(t.touches&&t.touches.length>1)return;if(t.targetTouches&&t.targetTouches[0].identifier!=n)return;if(!i&&!o)return;let p=this.regionsUtil.getRegionSnapToGridValue(this.wavesurfer.drawer.handleEvent(t)*s);if(i){const e=this.wavesurfer.getDuration();p>e-c&&(p=e-c),p-u<0&&(p=u)}if(o){let e=this.minLength;e||(e=0),"start"===o?(p>this.end-e&&(p=this.end-e),p<0&&(p=0)):"end"===o&&(p<this.start+e&&(p=this.start+e),p>s&&(p=s))}let m=p-r;if(r=p,this.drag&&i&&(h=h||!!m,this.onDrag(m)),this.resize&&o&&(h=h||!!m,this.onResize(m,o)),this.scroll&&e.clientWidth<this.wrapper.scrollWidth){let e=f.clientX;a=e<l.left+this.edgeScrollWidth?-1:e>l.right-this.edgeScrollWidth?1:null,a&&d(t)}};this.element.addEventListener("mousedown",f),this.element.addEventListener("touchstart",f),document.body.addEventListener("mousemove",m),document.body.addEventListener("touchmove",m,{passive:!1}),document.addEventListener("mouseup",p),document.body.addEventListener("touchend",p),this.on("remove",(()=>{document.removeEventListener("mouseup",p),document.body.removeEventListener("touchend",p),document.body.removeEventListener("mousemove",m),document.body.removeEventListener("touchmove",m)})),this.wavesurfer.on("destroy",(()=>{document.removeEventListener("mouseup",p),document.body.removeEventListener("touchend",p)}))}onDrag(e){const t=this.wavesurfer.getDuration();this.end+e>t&&(e=t-this.end),this.start+e<0&&(e=-1*this.start);const r={direction:this._getDragDirection(e),action:"drag"};this.update({start:this.start+e,end:this.end+e},r)}_getDragDirection(e){return e<0?"left":e>0?"right":null}onResize(e,t){const r=this.wavesurfer.getDuration(),n={action:"resize",direction:"start"===t?"left":"right"};"start"===t?(e>0&&this.end-(this.start+e)<this.minLength&&(e=this.end-this.minLength-this.start),e<0&&this.end-(this.start+e)>this.maxLength&&(e=this.end-this.start-this.maxLength),e<0&&this.start+e<0&&(e=-1*this.start),this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)},n)):(e<0&&this.end+e-this.start<this.minLength&&(e=this.start+this.minLength-this.end),e>0&&this.end+e-this.start>this.maxLength&&(e=this.maxLength-(this.end-this.start)),e>0&&this.end+e>r&&(e=r-this.end),this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)},n))}updateHandlesResize(e){let t;t=e?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:t}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:t})}}class V{static create(e){return{name:"regions",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,staticProps:{addRegion(e){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(e)},clearRegions(){this.regions&&this.regions.clear()},enableDragSelection(e){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(e)},disableDragSelection(){this.regions.disableDragSelection()}},instance:V}}constructor(e,t){this.params=e,this.wavesurfer=t,this.util={...t.util,getRegionSnapToGridValue:t=>this.getRegionSnapToGridValue(t,e)},this.maxRegions=e.maxRegions,this.regionsMinLength=e.regionsMinLength||null;Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((e=>{I.prototype[e]=this.util.Observer.prototype[e]})),this.wavesurfer.Region=I;this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.orientation=this.wavesurfer.drawer.orientation,this.defaultEdgeScrollWidth=.05*this.wrapper.clientWidth,this.params.regions&&this.params.regions.forEach((e=>{this.add(e)}))},this.list={},this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.vertical=this.wavesurfer.drawer.params.vertical,this.params.dragSelection&&this.enableDragSelection(this.params),Object.keys(this.list).forEach((e=>{this.list[e].updateRender()}))}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}wouldExceedMaxRegions(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}add(e){if(this.wouldExceedMaxRegions())return null;!(e={edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth,...e}).formatTimeCallback&&this.params.formatTimeCallback&&(e={...e,formatTimeCallback:this.params.formatTimeCallback}),!e.minLength&&this.regionsMinLength&&(e={...e,minLength:this.regionsMinLength});const t=new this.wavesurfer.Region(e,this.util,this.wavesurfer);return this.list[t.id]=t,t.on("remove",(()=>{delete this.list[t.id]})),t}clear(){Object.keys(this.list).forEach((e=>{this.list[e].remove()}))}enableDragSelection(e){this.disableDragSelection();const t=e.slop||2,r=this.wavesurfer.drawer.container,n=!1!==e.scroll&&this.wavesurfer.params.scrollParent,i=e.scrollSpeed||1,s=e.scrollThreshold||10;let o,a,l,u,c,h,d,f=this.wavesurfer.getDuration(),p=0;const m=e=>{if(!u||!h)return;let t=this.wrapper.scrollLeft+i*h;this.wrapper.scrollLeft=t=Math.min(a,Math.max(0,t));const r=this.wavesurfer.drawer.handleEvent(e);u.update({start:Math.min(r*f,l*f),end:Math.max(r*f,l*f)}),t<a&&t>0&&window.requestAnimationFrame((()=>{m(e)}))},g=t=>{if(!(t.touches&&t.touches.length>1)){if(f=this.wavesurfer.getDuration(),c=t.targetTouches?t.targetTouches[0].identifier:null,a=this.wrapper.scrollWidth-this.wrapper.clientWidth,d=this.util.withOrientation(this.wrapper.getBoundingClientRect(),this.vertical),this.wavesurfer.params.splitChannels){const r=(t.touches?t.touches[0].clientY:t.clientY)-d.top,n=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:1,i=this.wrapper.clientHeight/n,s=Math.floor(r/i);e.channelIdx=s;const o=this.wavesurfer.params.splitChannelsOptions.channelColors[s];o&&o.dragColor&&(e.color=o.dragColor)}o=!0,l=this.wavesurfer.drawer.handleEvent(t,!0),u=null,h=null}};this.wrapper.addEventListener("mousedown",g),this.wrapper.addEventListener("touchstart",g),this.on("disable-drag-selection",(()=>{this.wrapper.removeEventListener("touchstart",g),this.wrapper.removeEventListener("mousedown",g)}));const v=e=>{e.touches&&e.touches.length>1||(o=!1,p=0,h=null,u&&(this.util.preventClick(),u.fireEvent("update-end",e),this.wavesurfer.fireEvent("region-update-end",u,e)),u=null)};this.wrapper.addEventListener("mouseleave",v),this.wrapper.addEventListener("mouseup",v),this.wrapper.addEventListener("touchend",v),document.body.addEventListener("mouseup",v),document.body.addEventListener("touchend",v),this.on("disable-drag-selection",(()=>{document.body.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v),this.wrapper.removeEventListener("touchend",v),this.wrapper.removeEventListener("mouseup",v),this.wrapper.removeEventListener("mouseleave",v)}));const _=i=>{if(!o)return;if(++p<=t)return;if(i.touches&&i.touches.length>1)return;if(i.targetTouches&&i.targetTouches[0].identifier!=c)return;if(!u&&(u=this.add(e||{}),!u))return;const a=this.wavesurfer.drawer.handleEvent(i),g=this.wavesurfer.regions.util.getRegionSnapToGridValue(l*f),v=this.wavesurfer.regions.util.getRegionSnapToGridValue(a*f);u.update({start:Math.min(v,g),end:Math.max(v,g)});let _=this.util.withOrientation(i,this.vertical);if(n&&r.clientWidth<this.wrapper.scrollWidth){const e=_.clientX-d.left;h=e<=s?-1:e>=d.right-s?1:null,h&&m(i)}};this.wrapper.addEventListener("mousemove",_),this.wrapper.addEventListener("touchmove",_),this.on("disable-drag-selection",(()=>{this.wrapper.removeEventListener("touchmove",_),this.wrapper.removeEventListener("mousemove",_)})),this.wavesurfer.on("region-created",(e=>{this.regionsMinLength&&(e.minLength=this.regionsMinLength)}))}disableDragSelection(){this.fireEvent("disable-drag-selection")}getCurrentRegion(){const e=this.wavesurfer.getCurrentTime();let t=null;return Object.keys(this.list).forEach((r=>{const n=this.list[r];n.start<=e&&n.end>=e&&(!t||n.end-n.start<t.end-t.start)&&(t=n)})),t}getRegionSnapToGridValue(e,t){if(t.snapToGridInterval){const r=t.snapToGridOffset||0;return Math.round((e-r)/t.snapToGridInterval)*t.snapToGridInterval+r}return e}}class W{static create(e){return{name:"markers",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,staticProps:{addMarker(e){return this.initialisedPluginList.markers||this.initPlugin("markers"),this.markers.add(e)},clearMarkers(){this.markers&&this.markers.clear()}},instance:W}}constructor(e,t){this.params=e,this.wavesurfer=t,this.util=t.util,this.style=this.util.style,this.markerLineWidth=1,this.markerWidth=11,this.markerHeight=22,this.dragging=!1,this._onResize=()=>{this._updateMarkerPositions()},this._onBackendCreated=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this.params.markers&&this.params.markers.forEach((e=>this.add(e))),window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0),this.wavesurfer.on("zoom",this._onResize),this.markers.find((e=>e.draggable))&&(this.onMouseMove=e=>this._onMouseMove(e),window.addEventListener("mousemove",this.onMouseMove),this.onMouseUp=e=>this._onMouseUp(e),window.addEventListener("mouseup",this.onMouseUp))},this.markers=[],this._onReady=()=>{this.wrapper=this.wavesurfer.drawer.wrapper,this._updateMarkerPositions()}}init(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}destroy(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.un("zoom",this._onResize),window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0),this.onMouseMove&&window.removeEventListener("mousemove",this.onMouseMove),this.onMouseUp&&window.removeEventListener("mouseup",this.onMouseUp),this.clear()}add(e){let t={time:e.time,label:e.label,color:e.color||"#D8D8D8",position:e.position||"bottom",draggable:!!e.draggable};return t.el=this._createMarkerElement(t,e.markerElement),this.wrapper.appendChild(t.el),this.markers.push(t),this._updateMarkerPositions(),t}remove(e){let t=this.markers[e];t&&(this.wrapper.removeChild(t.el),this.markers.splice(e,1))}_createPointerSVG(e,t){const r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg"),i=document.createElementNS(r,"polygon");return n.setAttribute("viewBox","0 0 40 80"),i.setAttribute("id","polygon"),i.setAttribute("stroke","#979797"),i.setAttribute("fill",e),i.setAttribute("points","20 0 40 30 40 80 0 80 0 30"),"top"==t&&i.setAttribute("transform","rotate(180, 20 40)"),n.appendChild(i),this.style(n,{width:this.markerWidth+"px",height:this.markerHeight+"px","min-width":this.markerWidth+"px","margin-right":"5px","z-index":4}),n}_createMarkerElement(e,t){let r=e.label;const n=document.createElement("marker");n.className="wavesurfer-marker",this.style(n,{position:"absolute",height:"100%",display:"flex",overflow:"hidden","flex-direction":"top"==e.position?"column-reverse":"column"});const i=document.createElement("div"),s=t?t.width:this.markerWidth;e.offset=(s-this.markerLineWidth)/2,this.style(i,{"flex-grow":1,"margin-left":e.offset+"px",background:"black",width:this.markerLineWidth+"px",opacity:.1}),n.appendChild(i);const o=document.createElement("div"),a=t||this._createPointerSVG(e.color,e.position);if(e.draggable&&(a.draggable=!1),o.appendChild(a),r){const e=document.createElement("span");e.innerText=r,this.style(e,{"font-family":"monospace","font-size":"90%"}),o.appendChild(e)}return this.style(o,{display:"flex","align-items":"center",cursor:"pointer"}),n.appendChild(o),o.addEventListener("click",(t=>{t.stopPropagation(),this.dragging||(this.wavesurfer.setCurrentTime(e.time),this.wavesurfer.fireEvent("marker-click",e,t))})),e.draggable&&o.addEventListener("mousedown",(t=>{this.selectedMarker=e})),n}_updateMarkerPositions(){for(let e=0;e<this.markers.length;e++){let t=this.markers[e];this._updateMarkerPosition(t)}}_updateMarkerPosition(e){const t=this.wavesurfer.getDuration(),r=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,n=r*Math.min(e.time/t,1)-e.offset;this.style(e.el,{left:n+"px","max-width":r-n+"px"})}_onMouseMove(e){this.selectedMarker&&(this.dragging||(this.dragging=!0,this.wavesurfer.fireEvent("marker-drag",this.selectedMarker,e)),this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(e)*this.wavesurfer.getDuration(),this._updateMarkerPositions())}_onMouseUp(e){if(this.selectedMarker&&setTimeout((()=>{this.selectedMarker=!1,this.dragging=!1}),0),!this.dragging)return;e.stopPropagation();const t=this.wavesurfer.getDuration();this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(e)*t,this._updateMarkerPositions(),this.wavesurfer.fireEvent("marker-drop",this.selectedMarker,e)}clear(){for(;this.markers.length>0;)this.remove(0)}}const U=class{constructor(e){(0,n.r)(this,e),this.theme="light",this.language="eng",this.useAssetsFolder=!0,this.mode="READING",this.pageScrolling="horizontal",this.playing=!1,this.playback_rate=1,this.fullscreen=!1,this.autoScroll=!0,this.isLoaded=!1,this.isPreviewed=!1,this.showGuide=!1,this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,XML:0,SMIL:0},this.anchors=[],this.Guide=()=>(0,n.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,n.h)("span",{class:"scroll-guide__text theme--"+this.theme},this.returnTranslation("re-align",this.language))),this.Overlay=()=>(0,n.h)("object",{onClick:e=>this.goToSeekFromProgress(e),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.Img=e=>(0,n.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,n.h)("img",{alt:"image",class:"image",src:this.urlTransform(e.url)})),this.PageCount=e=>(0,n.h)("div",{class:"page__counter color--"+this.theme},"Page"," ",(0,n.h)("span",{"data-cy":"page-count__current"},e.currentPage)," / ",(0,n.h)("span",{"data-cy":"page-count__total"},e.pgCount)),this.Page=e=>(0,n.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(e.pageData.attributes.class?e.pageData.attributes.class.value:""),id:e.pageData.id},this.parsed_text.length>1?(0,n.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(e.pageData)+1}):null,e.pageData.img?(0,n.h)(this.Img,{url:e.pageData.img}):null,(0,n.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},e.pageData.paragraphs.map((e=>(0,n.h)(this.Paragraph,{sentences:Array.from(e.childNodes),attributes:e.attributes}))))),this.Paragraph=e=>(0,n.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(e.attributes.class?e.attributes.class.value:"")},e.sentences.map((e=>e.childNodes.length>0&&(0,n.h)(this.Sentence,{words:Array.from(e.childNodes),attributes:e.attributes})))),this.Sentence=e=>{!this.hasTextTranslations&&e.attributes.class&&(this.hasTextTranslations=null!=e.attributes.class.value.match("translation"));let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("div",Object.assign({},t,{class:"sentence "+(e.attributes.class?e.attributes.class.value:"")}),e.words.map(((t,r)=>{if("#text"===t.nodeName)return(0,n.h)(this.NonWordText,{text:t.textContent,attributes:t.attributes,id:(e.attributes.id?e.attributes.id.value:"P")+"text"+r});if("w"===t.nodeName)return(0,n.h)(this.Word,{text:t.textContent,id:t.id,attributes:t.attributes});if(t){let i={};return t.attributes["xml:lang"]&&(i.lang=e.attributes["xml:lang"].value),t.attributes.lang&&(i.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},i,{class:"sentence__text theme--"+this.theme+" "+t.className,id:t.id?t.id:"text_"+r}),t.textContent)}})))},this.NonWordText=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},t,{class:"sentence__text theme--"+this.theme,id:e.id}),e.text)},this.Word=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},t,{class:"sentence__word theme--"+this.theme+" "+(e&&e.attributes.class?e.attributes.class.value:""),id:e.id,onClick:e=>this.handleWord(e)}),e.text)},this.PlayControl=()=>(0,n.h)("button",{"data-cy":"play-button",disabled:!this.isLoaded,"aria-label":"Play",onClick:()=>{this.playing?this.pause():this.play()},class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},this.playing?"pause":"play_arrow"),(0,n.h)("span",{class:"tooltiptext"},this.playing?"Pause":"Play")),this.ReplayControl=()=>(0,n.h)("button",{"data-cy":"replay-button",disabled:!this.isLoaded,"aria-label":"Rewind",onClick:()=>this.goBack(5),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},"replay_5"),(0,n.h)("span",{class:"tooltiptext"},"Rewind")),this.StopControl=()=>(0,n.h)("button",{"data-cy":"stop-button",disabled:!this.isLoaded,"aria-label":"Stop",onClick:()=>this.stop(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},"stop"),(0,n.h)("span",{class:"tooltiptext"},"Stop")),this.PlaybackSpeedControl=()=>(0,n.h)("div",null,(0,n.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},this.returnTranslation("speed",this.language)),(0,n.h)("input",{type:"range",min:"75",max:"125",value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange",onInput:e=>this.changePlayback(e)})),this.StyleControl=()=>(0,n.h)("button",{"aria-label":"Change theme",onClick:()=>this.changeTheme(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"style"),(0,n.h)("span",{class:"tooltiptext right"},"Change theme")),this.FullScreenControl=()=>(0,n.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen"),(0,n.h)("span",{class:"tooltiptext right"},"Toogle screen mode")),this.TextTranslationDisplayControl=()=>(0,n.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",onClick:()=>this.toggleTextTranslation(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"subtitles"),(0,n.h)("span",{class:"tooltiptext right"},"Toggle translation")),this.ControlPanel=()=>(0,n.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,n.h)("div",{class:"control-panel__buttons--left"},(0,n.h)(this.PlayControl,null),(0,n.h)(this.ReplayControl,null),(0,n.h)(this.StopControl,null),"PREVIEW"===this.mode&&(0,n.h)(this.ExportPreviewControl,null)),(0,n.h)("div",{class:"control-panel__buttons--center"},(0,n.h)(this.PlaybackSpeedControl,null)),(0,n.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,n.h)(this.TextTranslationDisplayControl,null),(0,n.h)(this.StyleControl,null),(0,n.h)(this.FullScreenControl,null))),this.ExportPreviewControl=()=>(0,n.h)("button",{"data-cy":"export-original-button","aria-label":"Export Preview",onClick:()=>this.exportPreview(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"file_download"),(0,n.h)("span",{class:"tooltiptext"},"Export the readalong preview version")),this.palette=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FE4365","#FC9D9A","#F9CDAD","#C8C8A9","#83AF9B","#ECD078","#D95B43","#C02942","#542437","#53777A","#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58","#774F38","#E08E79","#F1D4AF","#ECE5CE","#C5E0DC","#E8DDCB","#CDB380","#036564","#033649","#031634","#490A3D","#BD1550","#E97F02","#F8CA00","#8A9B0F","#594F4F","#547980","#45ADA8","#9DE0AD","#E5FCC2","#00A0B0","#6A4A3C","#CC333F","#EB6841","#EDC951","#E94E77","#D68189","#C6A49A","#C6E5D9","#F4EAD5","#D9CEB2","#948C75","#D5DED9","#7A6A53","#99B2B7","#FFFFFF","#CBE86B","#F2E9E1","#1C140D","#CBE86B","#EFFFCD","#DCE9BE","#555152","#2E2633","#99173C","#3FB8AF","#7FC7AF","#DAD8A7","#FF9E9D","#FF3D7F","#343838","#005F6B","#008C9E","#00B4CC","#00DFFC","#413E4A","#73626E","#B38184","#F0B49E","#F7E4BE","#99B898","#FECEA8","#FF847C","#E84A5F","#2A363B","#FF4E50","#FC913A","#F9D423","#EDE574","#E1F5C4","#554236","#F77825","#D3CE3D","#F1EFA5","#60B99A","#351330","#424254","#64908A","#E8CAA4","#CC2A41","#00A8C6","#40C0CB","#F9F2E7","#AEE239","#8FBE00","#FF4242","#F4FAD2","#D4EE5E","#E1EDB9","#F0F2EB","#655643","#80BCA3","#F6F7BD","#E6AC27","#BF4D28","#8C2318","#5E8C6A","#88A65E","#BFB35A","#F2C45A","#FAD089","#FF9C5B","#F5634A","#ED303C","#3B8183","#BCBDAC","#CFBE27","#F27435","#F02475","#3B2D38","#D1E751","#FFFFFF","#000000","#4DBCE9","#26ADE4","#FF9900","#424242","#E9E9E9","#BCBCBC","#3299BB","#5D4157","#838689","#A8CABA","#CAD7B2","#EBE3AA","#5E412F","#FCEBB6","#78C0A8","#F07818","#F0A830","#EEE6AB","#C5BC8E","#696758","#45484B","#36393B","#1B676B","#519548","#88C425","#BEF202","#EAFDE6","#F8B195","#F67280","#C06C84","#6C5B7B","#355C7D","#452632","#91204D","#E4844A","#E8BF56","#E2F7CE","#F04155","#FF823A","#F2F26F","#FFF7BD","#95CFB7","#F0D8A8","#3D1C00","#86B8B1","#F2D694","#FA2A00","#2A044A","#0B2E59","#0D6759","#7AB317","#A0C55F","#67917A","#170409","#B8AF03","#CCBF82","#E33258","#B9D7D9","#668284","#2A2829","#493736","#7B3B3B","#BBBB88","#CCC68D","#EEDD99","#EEC290","#EEAA88","#A3A948","#EDB92E","#F85931","#CE1836","#009989","#E8D5B7","#0E2430","#FC3A51","#F5B349","#E8D5B9","#B3CC57","#ECF081","#FFBE40","#EF746F","#AB3E5B","#AB526B","#BCA297","#C5CEAE","#F0E2A4","#F4EBC3","#607848","#789048","#C0D860","#F0F0D8","#604848","#3E4147","#FFFEDF","#DFBA69","#5A2E2E","#2A2C31","#300030","#480048","#601848","#C04848","#F07241","#1C2130","#028F76","#B3E099","#FFEAAD","#D14334","#A8E6CE","#DCEDC2","#FFD3B5","#FFAAA6","#FF8C94","#EDEBE6","#D6E1C7","#94C7B6","#403B33","#D3643B","#FDF1CC","#C6D6B8","#987F69","#E3AD40","#FCD036","#AAB3AB","#C4CBB7","#EBEFC9","#EEE0B7","#E8CAAF","#CC0C39","#E6781E","#C8CF02","#F8FCC1","#1693A7","#3A111C","#574951","#83988E","#BCDEA5","#E6F9BC","#FC354C","#29221F","#13747D","#0ABFBC","#FCF7C5","#B9D3B0","#81BDA4","#B28774","#F88F79","#F6AA93","#5E3929","#CD8C52","#B7D1A3","#DEE8BE","#FCF7D3","#230F2B","#F21D41","#EBEBBC","#BCE3C5","#82B3AE","#5C323E","#A82743","#E15E32","#C0D23E","#E5F04C","#4E395D","#827085","#8EBE94","#CCFC8E","#DC5B3E","#DAD6CA","#1BB0CE","#4F8699","#6A5E72","#563444","#C2412D","#D1AA34","#A7A844","#A46583","#5A1E4A","#D1313D","#E5625C","#F9BF76","#8EB2C5","#615375","#9D7E79","#CCAC95","#9A947C","#748B83","#5B756C","#1C0113","#6B0103","#A30006","#C21A01","#F03C02","#8DCCAD","#988864","#FEA6A2","#F9D6AC","#FFE9AF","#CFFFDD","#B4DEC1","#5C5863","#A85163","#FF1F4C","#75616B","#BFCFF7","#DCE4F7","#F8F3BF","#D34017","#382F32","#FFEAF2","#FCD9E5","#FBC5D8","#F1396D","#B6D8C0","#C8D9BF","#DADABD","#ECDBBC","#FEDCBA","#E3DFBA","#C8D6BF","#93CCC6","#6CBDB5","#1A1F1E","#A7C5BD","#E5DDCB","#EB7B59","#CF4647","#524656","#9DC9AC","#FFFEC7","#F56218","#FF9D2E","#919167","#413D3D","#040004","#C8FF00","#FA023C","#4B000F","#EDF6EE","#D1C089","#B3204D","#412E28","#151101","#A8A7A7","#CC527A","#E8175D","#474747","#363636","#7E5686","#A5AAD9","#E8F9A2","#F8A13F","#BA3C3D","#FFEDBF","#F7803C","#F54828","#2E0D23","#F8E4C1","#C1B398","#605951","#FBEEC2","#61A6AB","#ACCEC0","#5E9FA3","#DCD1B4","#FAB87F","#F87E7B","#B05574","#951F2B","#F5F4D7","#E0DFB1","#A5A36C","#535233","#FFFBB7","#A6F6AF","#66B6AB","#5B7C8D","#4F2958","#000000","#9F111B","#B11623","#292C37","#CCCCCC","#9CDDC8","#BFD8AD","#DDD9AB","#F7AF63","#633D2E","#EFF3CD","#B2D5BA","#61ADA0","#248F8D","#605063","#84B295","#ECCF8D","#BB8138","#AC2005","#2C1507","#FCFEF5","#E9FFE1","#CDCFB7","#D6E6C3","#FAFBE3","#0CA5B0","#4E3F30","#FEFEEB","#F8F4E4","#A5B3AA","#4D3B3B","#DE6262","#FFB88C","#FFD0B3","#F5E0D3","#B5AC01","#ECBA09","#E86E1C","#D41E45","#1B1521","#379F7A","#78AE62","#BBB749","#E0FBAC","#1F1C0D","#FFE181","#EEE9E5","#FAD3B2","#FFBA7F","#FF9C97","#4E4D4A","#353432","#94BA65","#2790B0","#2B4E72","#A70267","#F10C49","#FB6B41","#F6D86B","#339194","#30261C","#403831","#36544F","#1F5F61","#0B8185","#2D2D29","#215A6D","#3CA2A2","#92C7A3","#DFECE6","#F38A8A","#55443D","#A0CAB5","#CDE9CA","#F1EDD0","#793A57","#4D3339","#8C873E","#D1C5A5","#A38A5F","#11766D","#410936","#A40B54","#E46F0A","#F0B300","#AAFF00","#FFAA00","#FF00AA","#AA00FF","#00AAFF","#C75233","#C78933","#D6CEAA","#79B5AC","#5E2F46","#F8EDD1","#D88A8A","#474843","#9D9D93","#C5CFC6","#6DA67A","#77B885","#86C28B","#859987","#4A4857","#1B325F","#9CC4E4","#E9F2F9","#3A89C9","#F26C4F","#BED6C7","#ADC0B4","#8A7E66","#A79B83","#BBB2A1","#046D8B","#309292","#2FB8AC","#93A42A","#ECBE13","#82837E","#94B053","#BDEB07","#BFFA37","#E0E0E0","#312736","#D4838F","#D6ABB1","#D9D9D9","#C4FFEB","#E5EAA4","#A8C4A2","#69A5A4","#616382","#66245B","#6DA67A","#99A66D","#A9BD68","#B5CC6A","#C0DE5D","#395A4F","#432330","#853C43","#F25C5E","#FFA566","#331327","#991766","#D90F5A","#F34739","#FF6E27","#FDFFD9","#FFF0B8","#FFD6A3","#FAAD8E","#142F30","#E21B5A","#9E0C39","#333333","#FBFFE3","#83A300","#FBC599","#CDBB93","#9EAE8A","#335650","#F35F55","#C7FCD7","#D9D5A7","#D9AB91","#E6867A","#ED4A6A","#EC4401","#CC9B25","#13CD4A","#7B6ED6","#5E525C","#BF496A","#B39C82","#B8C99D","#F0D399","#595151","#FFEFD3","#FFFEE4","#D0ECEA","#9FD6D2","#8B7A5E","#F1396D","#FD6081","#F3FFEB","#ACC95F","#8F9924","#F6F6F6","#E8E8E8","#333333","#990100","#B90504","#261C21","#6E1E62","#B0254F","#DE4126","#EB9605","#E9E0D1","#91A398","#33605A","#070001","#68462B","#F2E3C6","#FFC6A5","#E6324B","#2B2B2B","#353634","#FFAB07","#E9D558","#72AD75","#0E8D94","#434D53","#59B390","#F0DDAA","#E47C5D","#E32D40","#152B3C","#FDE6BD","#A1C5AB","#F4DD51","#D11E48","#632F53","#E4E4C5","#B9D48B","#8D2036","#CE0A31","#D3E4C5","#512B52","#635274","#7BB0A8","#A7DBAB","#E4F5B1","#805841","#DCF7F3","#FFFCDD","#FFD8D8","#F5A2A2","#CAFF42","#EBF7F8","#D0E0EB","#88ABC2","#49708A","#595643","#4E6B66","#ED834E","#EBCC6E","#EBE1C5","#E4DED0","#ABCCBD","#7DBEB8","#181619","#E32F21","#058789","#503D2E","#D54B1A","#E3A72F","#F0ECC9","#FF003C","#FF8A00","#FABE28","#88C100","#00C176","#311D39","#67434F","#9B8E7E","#C3CCAF","#A51A41","#EFD9B4","#D6A692","#A39081","#4D6160","#292522","#C6CCA5","#8AB8A8","#6B9997","#54787D","#615145","#CC5D4C","#FFFEC6","#C7D1AF","#96B49C","#5B5847","#111625","#341931","#571B3C","#7A1E48","#9D2053","#EFEECC","#FE8B05","#FE0557","#400403","#0AABBA","#CCF390","#E0E05A","#F7C41F","#FC930A","#FF003D","#73C8A9","#DEE1B6","#E1B866","#BD5532","#373B44","#79254A","#795C64","#79927D","#AEB18E","#E3CF9E","#E0EFF1","#7DB4B5","#FFFFFF","#680148","#000000","#F06D61","#DA825F","#C4975C","#A8AB7B","#8CBF99","#2D1B33","#F36A71","#EE887A","#E4E391","#9ABC8A","#2B2726","#0A516D","#018790","#7DAD93","#BACCA4","#95A131","#C8CD3B","#F6F1DE","#F5B9AE","#EE0B5B","#360745","#D61C59","#E7D84B","#EFEAC5","#1B8798","#E3E8CD","#BCD8BF","#D3B9A3","#EE9C92","#FE857E","#807462","#A69785","#B8FAFF","#E8FDFF","#665C49","#4B1139","#3B4058","#2A6E78","#7A907C","#C9B180","#FC284F","#FF824A","#FEA887","#F6E7F7","#D1D0D7","#FFB884","#F5DF98","#FFF8D4","#C0D1C2","#2E4347","#027B7F","#FFA588","#D62957","#BF1E62","#572E4F","#80A8A8","#909D9E","#A88C8C","#FF0D51","#7A8C89","#A69E80","#E0BA9B","#E7A97E","#D28574","#3B1922","#A1DBB2","#FEE5AD","#FACA66","#F7A541","#F45D4C","#641F5E","#676077","#65AC92","#C2C092","#EDD48E","#FFF3DB","#E7E4D5","#D3C8B4","#C84648","#703E3B","#F5DD9D","#BCC499","#92A68A","#7B8F8A","#506266","#2B222C","#5E4352","#965D62","#C7956D","#F2D974","#D4F7DC","#DBE7B4","#DBC092","#E0846D","#F51441","#A32C28","#1C090B","#384030","#7B8055","#BCA875","#85847E","#AB6A6E","#F7345B","#353130","#CBCFB4","#E6B39A","#E6CBA5","#EDE3B4","#8B9E9B","#6D7578","#11644D","#A0B046","#F2C94E","#F78145","#F24E4E","#6D9788","#1E2528","#7E1C13","#BF0A0D","#E6E1C2","#23192D","#FD0A54","#F57576","#FEBF97","#F5ECB7","#EB9C4D","#F2D680","#F3FFCF","#BAC9A9","#697060","#D3D5B0","#B5CEA4","#9DC19D","#8C7C62","#71443F","#452E3C","#FF3D5A","#FFB969","#EAF27E","#3B8C88","#041122","#259073","#7FDA89","#C8E98E","#E6F99D","#B1E6D1","#77B1A9","#3D7B80","#270A33","#451A3E","#9D9E94","#C99E93","#F59D92","#E5B8AD","#D5D2C8","#FDCFBF","#FEB89F","#E23D75","#5F0D3B","#742365","#540045","#C60052","#FF714B","#EAFF87","#ACFFE9","#B7CBBF","#8C886F","#F9A799","#F4BFAD","#F5DABD","#280904","#680E34","#9A151A","#C21B12","#FC4B2A","#F0FFC9","#A9DA88","#62997A","#72243D","#3B0819","#429398","#6B5D4D","#B0A18F","#DFCDB4","#FBEED3","#E6EBA9","#ABBB9F","#6F8B94","#706482","#703D6F","#A3C68C","#879676","#6E6662","#4F364A","#340735","#44749D","#C6D4E1","#FFFFFF","#EBE7E0","#BDB8AD","#322938","#89A194","#CFC89A","#CC883A","#A14016","#CFB590","#9E9A41","#758918","#564334","#49281F","#FA6A64","#7A4E48","#4A4031","#F6E2BB","#9EC6B8","#1D1313","#24B694","#D22042","#A3B808","#30C4C9","#F6D76B","#FF9036","#D6254D","#FF5475","#FDEBA9","#E7EDEA","#FFC52C","#FB0C06","#030D4F","#CEECEF","#373737","#8DB986","#ACCE91","#BADB73","#EFEAE4","#161616","#C94D65","#E7C049","#92B35A","#1F6764","#26251C","#EB0A44","#F2643D","#F2A73D","#A0E8B7","#4B3E4D","#1E8C93","#DBD8A2","#C4AC30","#D74F33","#8D7966","#A8A39D","#D8C8B8","#E2DDD9","#F8F1E9","#F2E8C4","#98D9B6","#3EC9A7","#2B879E","#616668"]}wheelHandler(e){if(this.el.shadowRoot.querySelector(".reading")&&(e.path[0].classList.contains("sentence__word")||e.path[0].classList.contains("sentence__container")||e.path[0].classList.contains("sentence"))&&this.autoScroll){let e=this.el.shadowRoot.querySelector(".reading");e&&(this.autoScroll=!this.inPageContentOverflow(e),this.showGuide=!this.autoScroll)}}urlTransform(e){return this.useAssetsFolder&&function(e){return!/^(https?:[/]|assets)[/]\b/.test(e)}(e)?"assets/"+e:e}buildSprite(e,t){return new $({src:[e],sprite:t,rate:this.playback_rate})}tagToQuery(e){return"#"+(e=(e=e.replace(".","\\.")).replace("#","\\#"))}returnWordClosestTo(e){let t=Object.keys(this.processed_alignment);t.pop();for(let r=1;r<t.length;r++)if(1e3*e>this.processed_alignment[t[r]][0]&&this.processed_alignment[t[r+1]]&&1e3*e<this.processed_alignment[t[r+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[r]))}changePlayback(e){let t=e.currentTarget;this.playback_rate=parseInt(t.value)/100,this.audio_howl_sprites.sound.rate(this.playback_rate)}goBack(e){this.autoScroll=!1,this.play_id&&this.audio_howl_sprites.goBack(this.play_id,e),setTimeout((()=>this.autoScroll=!0),100)}goToTime(e){let t=this.returnWordClosestTo(e);if(!t)return;let r=t.id,n=this.processed_alignment[r][0];this.addHighlightingTo(t),this.goTo(n),this.scrollTo(t);let i=U._getSentenceContainerOfWord(t).parentElement.id;return i!==this.current_page&&(void 0!==this.current_page&&this.scrollToPage(i),this.current_page=i),this.inPageContentOverflow(t)&&(t.scrollIntoView(!1),this.scrollByHeight(t)),this.inParagraphContentOverflow(t)&&(t.scrollIntoView(!1),this.scrollByWidth(t)),r}getTime(e){return this.processed_alignment[e][0]/1e3}goTo(e){void 0===this.play_id&&(this.play(),this.pause()),this.autoScroll=!1,e/=1e3,this.audio_howl_sprites.goTo(this.play_id,e),setTimeout((()=>this.autoScroll=!0),100)}goToSeekAtEl(e){let t=e.currentTarget.id,r=this.processed_alignment[t][0];return this.goTo(r),t}goToSeekFromProgress(e){let t=e.currentTarget.getBoundingClientRect(),r=t.left,n=t.width,i=(e.pageX-r)/n*this.duration*1e3;this.goTo(i)}pause(){this.playing=!1,this.audio_howl_sprites.pause()}play(){this.playing=!0,void 0!==this.play_id?this.play_id=this.audio_howl_sprites.play(this.play_id):this.play_id=this.audio_howl_sprites.play("all"),this.animateProgress()}playSprite(e){let t=this.goToSeekAtEl(e);this.playing||this.audio_howl_sprites.play(t)}stop(){this.playing=!1,this.audio_howl_sprites.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.autoScroll||(this.autoScroll=!0,this.showGuide=!1)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach((e=>e.classList.toggle("hide"))),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach((e=>e.classList.toggle("hide")))}addHighlightingTo(e){this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),e.classList.add("reading")}animateProgressWithOverlay(){let e=this.el.shadowRoot.querySelector("#overlay__object"),t=e.contentDocument.querySelector("#progress-fill"),r=e.contentDocument.querySelector("#progress-trail"),n=e.contentDocument.querySelector("#progress-base");t.classList.add("stop-color--"+this.theme),n.classList.add("stop-color--"+this.theme),this.audio_howl_sprites.sounds.push(t),this.audio_howl_sprites.sounds.push(r),this.audio_howl_sprites.sound.once("end",(()=>{this.audio_howl_sprites.sounds.forEach((e=>{e.setAttribute("offset","0%")})),this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.playing=!1}),this.play_id)}animateProgressDefault(e,t){let r=document.createElement("div");r.className="progress theme--"+this.theme,r.id=e.toString(),r.dataset.sprite=t;let n=this.tagToQuery(t);this.el.shadowRoot.querySelector(n).appendChild(r),this.audio_howl_sprites.sounds.push(r),this.audio_howl_sprites.sound.once("end",(()=>{this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.playing=!1}),this.play_id)}animateProgress(e=this.play_id){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault(e,"all")}changeFill(){let e=this.el.shadowRoot.querySelector(".sentence__word"),t=window.getComputedStyle(e).color,r=this.el.shadowRoot.querySelector("#overlay__object"),n=r.contentDocument.querySelector("#progress-fill"),i=r.contentDocument.querySelector("#progress-base");r.contentDocument.querySelector("#polygon").setAttribute("stroke",t),i.setAttribute("stop-color",t),n.setAttribute("stop-color",t)}changeTheme(){"light"===this.theme?this.theme="dark":this.theme="light"}static _getSentenceContainerOfWord(e){return e.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let e=this.el.ownerDocument;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let e=this.el.shadowRoot.getElementById("read-along-container");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let e=this.el.shadowRoot.querySelector(".reading"),t=new IntersectionObserver((r=>{let[n]=r;n.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),t.unobserve(e))}));t.observe(e),this.scrollTo(e)}inParagraphContentOverflow(e){let t=U._getSentenceContainerOfWord(e).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.right<t.left,i=r.right>t.right,s=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),s.unobserve(e))}));return s.observe(e),n||i}inPageContentOverflow(e){let t=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top+r.height>t.top+t.height,i=r.top+r.height<0,s=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),s.unobserve(e))}));return s.observe(e),i||n}inPage(e){let t=U._getSentenceContainerOfWord(e).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top+r.height>t.top+t.height,i=r.top+r.height<0,s=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),s.unobserve(e))}));return s.observe(e),i||n}scrollToPage(e){let t=this.el.shadowRoot.querySelector(".pages__container"),r=this.el.shadowRoot.querySelector("#"+e);t.scrollBy({top:null!=this.pageScrolling.match("vertical")?r.offsetTop-t.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:r.offsetLeft-t.scrollLeft,behavior:"smooth"}),r.scrollTo(0,0)}scrollByHeight(e){let t=U._getSentenceContainerOfWord(e),r=e.parentElement.getBoundingClientRect();t.scrollBy({top:t.getBoundingClientRect().height-r.height,left:0,behavior:"smooth"})}scrollByWidth(e){let t=U._getSentenceContainerOfWord(e),r=e.getBoundingClientRect();t.scrollTo({left:r.left-10,top:0,behavior:"smooth"})}scrollTo(e){e.scrollIntoView({behavior:"smooth"})}audioFailedToLoad(){this.isLoaded=!0,this.assetsStatus.AUDIO=2}audioLoaded(){this.isLoaded=!0,this.assetsStatus.AUDIO=1}handleWord(e){if("ANCHOR"===this.mode){let t=e.currentTarget,r=t.id;!this.anchors.some((e=>e.id==r))?this.addAnchor(t):this.delAnchor(t);let n=R(this.text,this.anchors);window.updateAnchor.call(this,n)}else this.playSprite(e)}addAnchor(e){let t=e.id,r=e.innerHTML,n=this.processed_alignment[t][0]/1e3,i=this.palette.pop(),s=this.wavesurfer.markers.add({time:n,label:"",color:i,draggable:!0});s.id=t,s.text=r,this.anchors.push(s);let o=this.createAnchor(t,i);e.parentElement.insertBefore(o,e)}delAnchor(e){let t=e.id;var r=this.anchors.filter((e=>e.id==t))[0];let n=this.wavesurfer.markers.markers.indexOf(r);this.wavesurfer.markers.remove(n),this.anchors=this.anchors.filter((e=>e.id!=t));let i=this.el.shadowRoot.querySelector(`#svg${t}`);i.parentElement.removeChild(i)}createAnchor(e,t){var r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg"),i=document.createElementNS(r,"polygon");return n.setAttribute("viewBox","0 0 40 80"),i.setAttribute("id","polygon"),i.setAttribute("stroke","#979797"),i.setAttribute("fill",t),i.setAttribute("points","20 0 40 30 40 80 0 80 0 30"),n.appendChild(i),n.id=`svg${e}`,n.style.width="11px",n.style.height="22px",n.style.minWidth="11px",n.style.marginRight="5px",n.style.zIndex="4",n.style.cursor="pointer",n}exportPreview(){window.exportPreview.call()}exportOriginal(){window.exportOriginal.call(this,this.base)}isValidAnchorSetup(){this.anchors.sort((function(e,t){return parseInt(e.id.match(/(\d+)/g).join(""))-parseInt(t.id.match(/(\d+)/g).join(""))}));let e={time:-1};for(let t=0;t<this.anchors.length;t++){if(e.time>this.anchors[t].time)return window.toast.show.call(this,"error",`The text "${this.anchors[t].text}" is earlier than the previous text "${e.text}"`),!1;e=this.anchors[t]}return!0}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){this.language.length<3&&(null!=this.language.match("fr")?this.language="fra":this.language="eng")}componentDidLoad(){let e=this;this.processed_alignment=function(e){let t=T(e),r=(new DOMParser).parseFromString(t,"text/xml"),n=O("/i:smil/i:body/i:par/i:text/@src",r).map((e=>{let t=e.value.split("#");return t[t.length-1]})),i=O("/i:smil/i:body/i:par/i:audio/@clipBegin",r).map((e=>1e3*e.value)),s=O("/i:smil/i:body/i:par/i:audio/@clipEnd",r).map((e=>1e3*e.value)),o=[];for(var a=0;a<i.length;a++){let e=s[a]-i[a];o.push(e)}let l=(u=[i,o])[0].map((function(e,t){return u.map((function(e){return e[t]}))}));var u;let c={};for(a=0;a<n.length;a++)c[n[a]]=l[a];return c}(this.alignment),this.assetsStatus.SMIL=Object.keys(this.processed_alignment).length?1:2,this.audio_howl_sprites=new S.Howl({src:[this.audio],preload:!0,onloaderror:this.audioFailedToLoad.bind(this),onload:this.audioLoaded.bind(this)}),this.audio_howl_sprites.once("load",(()=>{var e,t;this.processed_alignment.all=[0,1e3*this.audio_howl_sprites.duration()],this.duration=this.audio_howl_sprites.duration(),this.audio_howl_sprites=this.buildSprite(this.audio,this.processed_alignment),this.reading$=this.audio_howl_sprites._reading$.pipe((r=>r.lift(new b(e,t)))).subscribe((e=>{if(this.playing){let t=this.tagToQuery(e),r=this.el.shadowRoot.querySelector(t);this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),r.classList.add("reading");let n=U._getSentenceContainerOfWord(r).parentElement.id;n!==this.current_page&&(void 0!==this.current_page&&this.scrollToPage(n),this.current_page=n),(r.getBoundingClientRect().left<0||0!==this.el.shadowRoot.querySelector("#"+n).getBoundingClientRect().left)&&this.scrollToPage(n),this.inPageContentOverflow(r)&&this.autoScroll&&(r.scrollIntoView(!1),this.scrollByHeight(r)),this.inParagraphContentOverflow(r)&&this.autoScroll&&(r.scrollIntoView(!1),this.scrollByWidth(r))}})),this.isLoaded=!0,this.assetsStatus.AUDIO=1})),this.parsed_text=function(e){let t=T(e),r=(new DOMParser).parseFromString(t,"text/xml");return O('.//div[@type="page"]',r).map((e=>{let t=e.id,n=O(`.//div[@id='${t}']/graphic/@url`,r),i={id:t,paragraphs:O(`.//div[@id='${t}']/p`,r)};return n.length>0&&(i.img=n[0].nodeValue),e.attributes&&(i.attributes=e.attributes),i}))}(this.text),this.assetsStatus.XML=this.parsed_text.length?1:2,this.waveform=this.el.shadowRoot.querySelector("#anchorWave"),this.wavesurfer=j.create({container:this.waveform,waveColor:"#A8DBA8",progressColor:"#3B8686",backend:"MediaElement",responsive:!0,plugins:[V.create({regions:[],dragSelection:{slop:5}}),W.create({markers:[{id:"-1",time:-1,label:"",position:"top",color:"white",draggable:!0}]})]}),this.wavesurfer.load(this.audio),this.wavesurfer.on("region-created",(function(t){let r=e.wavesurfer.regions.list;Object.entries(r).length>=1&&t.remove()})),this.wavesurfer.setDisabledEventEmissions("region-click"),this.wavesurfer.on("seek",(function(t){let r=t*e.wavesurfer.getDuration(),n=Object.values(e.wavesurfer.regions.list)[0];if(null!=n&&n.start<=r&&n.end>=r)n.play();else{e.wavesurfer.pause();let t=e.goToTime(r);t&&e.audio_howl_sprites.play(t)}})),this.wavesurfer.on("marker-drop",(function(){if(e.isValidAnchorSetup()){let t=R(e.text,e.anchors);window.updateAnchor.call(this,t)}}));let t=R(e.text,e.anchors);window.updateAnchor.call(this,t)}returnTranslation(e,t){void 0===t&&(t=this.language);let r={speed:{eng:"Playback Speed",fra:"Vitesse de Lecture"},"re-align":{eng:"Re-align with audio",fra:"Raligner avec l'audio"},"audio-error":{eng:"Error: The audio file could not be loaded",fra:"Erreur: le fichier audio n'a pas pu tre charg"},"text-error":{eng:"Error: The text file could not be loaded",fra:"Erreur: le fichier texte n'a pas pu tre charg"},"alignment-error":{eng:"Error: The alignment file could not be loaded",fra:"Erreur: le fichier alignement n'a pas pu tre charg"},loading:{eng:"Loading...",fra:"Chargement en cours"}};return r[e]?r[e][t]:e}render(){return(0,n.h)("div",{id:"read-along-container",class:"read-along-container"},(0,n.h)("h1",{class:"slot__header"},(0,n.h)("slot",{name:"read-along-header"})),(0,n.h)("h3",{class:"slot__subheader"},(0,n.h)("slot",{name:"read-along-subheader"})),"ANCHOR"===this.mode&&(0,n.h)("div",{id:"anchorWave"}),this.assetsStatus.AUDIO&&(0,n.h)("p",{"data-cy":"audio-error",class:"alert status-"+this.assetsStatus.AUDIO+(1==this.assetsStatus.AUDIO?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.AUDIO?"error":this.assetsStatus.AUDIO>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.AUDIO?this.returnTranslation("audio-error",this.language):this.assetsStatus.SMIL>0?"AUDIO":this.returnTranslation("loading",this.language))),this.assetsStatus.XML&&(0,n.h)("p",{"data-cy":"text-error",class:"alert status-"+this.assetsStatus.XML+(1==this.assetsStatus.XML?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.XML?"error":this.assetsStatus.XML>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.XML?this.returnTranslation("text-error",this.language):this.assetsStatus.SMIL>0?"XML":this.returnTranslation("loading",this.language))),this.assetsStatus.SMIL&&(0,n.h)("p",{"data-cy":"alignment-error",class:"alert status-"+this.assetsStatus.SMIL+(1==this.assetsStatus.SMIL?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.SMIL?"error":this.assetsStatus.SMIL>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.SMIL?this.returnTranslation("alignment-error",this.language):this.assetsStatus.SMIL>0?"SMIL":this.returnTranslation("loading",this.language))),(0,n.h)("div",{"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,n.h)(this.Guide,null):null,1==this.assetsStatus.XML&&this.parsed_text.map((e=>(0,n.h)(this.Page,{pageData:e}))),0==this.isLoaded&&(0,n.h)("div",{class:"loader"})),1==this.assetsStatus.SMIL&&(0,n.h)("div",{onClick:e=>this.goToSeekFromProgress(e),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,n.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,n.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,n.h)("link",{href:this.cssUrl,rel:"stylesheet"}))}get el(){return(0,n.g)(this)}};U.style="@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RbLtyU5rZPoAU.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RVLtyU5rZP.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjx4wXiWtFCc.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url('assets/fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2') format('woff2')}@font-face{font-family:'Material Icons Outlined';font-style:normal;font-weight:400;src:url('assets/fonts/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2') format('woff2')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:'Material Icons Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:\"Lato\", sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:\"Karla\", sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,a{font-family:\"Lato\", sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url(\"../assets/img/bg.jpg\");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.tooltip{position:relative;display:inline-block}.tooltip .tooltiptext{visibility:hidden;width:100px;background-color:#036;color:#fff;text-align:left;padding:5px;border-radius:6px;overflow-x:hidden;opacity:20%;transition:opacity 0.6s;position:absolute;z-index:1;top:20px;left:-50%}.tooltip .tooltiptext.right{left:-400%}.tooltip:hover .tooltiptext{visibility:visible;opacity:1}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:\"transparent\"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"image page-no\" \"image text\";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;float:left;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{height:100%;max-width:95%;object-fit:contain}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"page-no\" \"text\";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;max-height:98vh;height:98vh;overflow-Y:hidden;overflow-X:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-1{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-2{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}"},318:(e,t,r)=>{var n={"./read-along.entry.js":[159,179]};function i(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return r.e(t[1]).then((()=>r(i)))}i.keys=()=>Object.keys(n),i.id=318,e.exports=i}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(896);(()=>{const t="file:///Users/karenorman/Desktop/NEU/CS5500/AnchorStudio/repo/CS5500-ReadAlongs-Web-Component/dist/esm/read-along.js",r={};return r.resourcesUrl=new URL(".",t).href,(0,e.p)(r)})().then((t=>(0,e.b)([["read-along",[[1,"read-along",{text:[1025],alignment:[1025],audio:[1025],svgOverlay:[1,"svg-overlay"],theme:[1025],language:[1025],cssUrl:[1,"css-url"],useAssetsFolder:[4,"use-assets-folder"],mode:[1],base:[1],pageScrolling:[1,"page-scrolling"],playing:[32],fullscreen:[32],autoScroll:[32],isLoaded:[32],isPreviewed:[32]},[[9,"wheel","wheelHandler"]]]]]],t)))})()})();
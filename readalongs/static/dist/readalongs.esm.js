(()=>{var e={896:(e,t,r)=>{"use strict";r.d(t,{b:()=>Z,g:()=>W,h:()=>E,p:()=>c,r:()=>re});let n,i,a=!1,s=!1;const o="undefined"!=typeof window?window:{},l=o.document||{head:{}},u={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},c=e=>Promise.resolve(e),h=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),d=(e,t,r,n)=>{r&&r.map((([r,n,i])=>{const a=p(e,r),s=f(t,i),o=m(r);u.ael(a,n,s,o),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>u.rel(a,n,s,o)))}))},f=(e,t)=>r=>{try{256&e.$flags$?e.$lazyInstance$[t](r):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,r])}catch(e){ae(e)}},p=(e,t)=>8&t?o:e,m=e=>0!=(2&e),g="http://www.w3.org/1999/xlink",v=new WeakMap,y=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,i=(t.$tagName$,()=>{}),a=((e,t,r,n)=>{let i=b(t),a=le.get(i);if(e=11===e.nodeType?e:l,a)if("string"==typeof a){e=e.head||e;let t,r=v.get(e);r||v.set(e,r=new Set),r.has(i)||(t=l.createElement("style"),t.innerHTML=a,e.insertBefore(t,e.querySelector("link")),r&&r.add(i))}else e.adoptedStyleSheets.includes(a)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,a]);return i})(r.shadowRoot?r.shadowRoot:r.getRootNode(),t);10&n&&(r["s-sc"]=a,r.classList.add(a+"-h")),i()},b=(e,t)=>"sc-"+e.$tagName$,w={},A=e=>"object"===(e=typeof e)||"function"===e,E=(e,t,...r)=>{let n=null,i=null,a=!1,s=!1,o=[];const l=t=>{for(let r=0;r<t.length;r++)n=t[r],Array.isArray(n)?l(n):null!=n&&"boolean"!=typeof n&&((a="function"!=typeof e&&!A(n))&&(n=String(n)),a&&s?o[o.length-1].$text$+=n:o.push(a?C(null,n):n),s=a)};if(l(r),t){t.key&&(i=t.key);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,o,F);const u=C(e,null);return u.$attrs$=t,o.length>0&&(u.$children$=o),u.$key$=i,u},C=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null};return r},k={},F={forEach:(e,t)=>e.map(x).forEach(t),map:(e,t)=>e.map(x).map(t).map(D)},x=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),D=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),E(e.vtag,t,...e.vchildren||[])}const t=C(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},B=(e,t,r,n,i,a)=>{if(r!==n){let s=ie(e,t),l=t.toLowerCase();if("class"===t){const t=e.classList,i=_(r),a=_(n);t.remove(...i.filter((e=>e&&!a.includes(e)))),t.add(...a.filter((e=>e&&!i.includes(e))))}else if("style"===t){for(const t in r)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)r&&n[t]===r[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(s||"o"!==t[0]||"n"!==t[1]){const o=A(n);if((s||o&&null!==n)&&!i)try{if(e.tagName.includes("-"))e[t]=n;else{let i=null==n?"":n;"list"===t?s=!1:null!=r&&e[t]==i||(e[t]=i)}}catch(e){}let u=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,u=!0),null==n||!1===n?!1===n&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(g,t):e.removeAttribute(t)):(!s||4&a||i)&&!o&&(n=!0===n?"":n,u?e.setAttributeNS(g,t,n):e.setAttribute(t,n))}else t="-"===t[2]?t.slice(3):ie(o,l)?l.slice(2):l[2]+t.slice(3),r&&u.rel(e,t,r,!1),n&&u.ael(e,t,n,!1)}},P=/\s/,_=e=>e?e.split(P):[],O=(e,t,r,n)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||w,s=t.$attrs$||w;for(n in a)n in s||B(i,n,a[n],void 0,r,t.$flags$);for(n in s)B(i,n,a[n],s[n],r,t.$flags$)},R=(e,t,r,i)=>{let s,o,u=t.$children$[r],c=0;if(null!==u.$text$)s=u.$elm$=l.createTextNode(u.$text$);else{if(a||(a="svg"===u.$tag$),s=u.$elm$=l.createElementNS(a?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",u.$tag$),a&&"foreignObject"===u.$tag$&&(a=!1),O(null,u,a),null!=n&&s["s-si"]!==n&&s.classList.add(s["s-si"]=n),u.$children$)for(c=0;c<u.$children$.length;++c)o=R(e,u,c),o&&s.appendChild(o);"svg"===u.$tag$?a=!1:"foreignObject"===s.tagName&&(a=!0)}return s},S=(e,t,r,n,a,s)=>{let o,l=e;for(l.shadowRoot&&l.tagName===i&&(l=l.shadowRoot);a<=s;++a)n[a]&&(o=R(null,r,a),o&&(n[a].$elm$=o,l.insertBefore(o,t)))},$=(e,t,r,n,i)=>{for(;t<=r;++t)(n=e[t])&&(i=n.$elm$,L(n),i.remove())},M=(e,t)=>e.$tag$===t.$tag$&&e.$key$===t.$key$,j=(e,t)=>{const r=t.$elm$=e.$elm$,n=e.$children$,i=t.$children$,s=t.$tag$,o=t.$text$;null===o?(a="svg"===s||"foreignObject"!==s&&a,"slot"===s||O(e,t,a),null!==n&&null!==i?((e,t,r,n)=>{let i,a,s=0,o=0,l=0,u=0,c=t.length-1,h=t[0],d=t[c],f=n.length-1,p=n[0],m=n[f];for(;s<=c&&o<=f;)if(null==h)h=t[++s];else if(null==d)d=t[--c];else if(null==p)p=n[++o];else if(null==m)m=n[--f];else if(M(h,p))j(h,p),h=t[++s],p=n[++o];else if(M(d,m))j(d,m),d=t[--c],m=n[--f];else if(M(h,m))j(h,m),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++s],m=n[--f];else if(M(d,p))j(d,p),e.insertBefore(d.$elm$,h.$elm$),d=t[--c],p=n[++o];else{for(l=-1,u=s;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===p.$key$){l=u;break}l>=0?(a=t[l],a.$tag$!==p.$tag$?i=R(t&&t[o],r,l):(j(a,p),t[l]=void 0,i=a.$elm$),p=n[++o]):(i=R(t&&t[o],r,o),p=n[++o]),i&&h.$elm$.parentNode.insertBefore(i,h.$elm$)}s>c?S(e,null==n[f+1]?null:n[f+1].$elm$,r,n,o,f):o>f&&$(t,s,c)})(r,n,t,i):null!==i?(null!==e.$text$&&(r.textContent=""),S(r,null,t,i,0,i.length-1)):null!==n&&$(n,0,n.length-1),a&&"svg"===s&&(a=!1)):e.$text$!==o&&(r.data=o)},L=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(L)},T=(e,t)=>{const r=e.$hostElement$,a=e.$vnode$||C(null,null),s=(o=t)&&o.$tag$===k?t:E(null,null,t);var o;i=r.tagName,s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=a.$elm$=r.shadowRoot||r,n=r["s-sc"],j(a,s)},W=e=>te(e).$hostElement$,I=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))},V=(e,t)=>{if(e.$flags$|=16,4&e.$flags$)return void(e.$flags$|=512);I(e,e.$ancestorComponent$);return me((()=>N(e,t)))},N=(e,t)=>{const r=(e.$cmpMeta$.$tagName$,()=>{}),n=e.$lazyInstance$;let i;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((([e,t])=>X(n,e,t))),e.$queuedListeners$=null),i=X(n,"componentWillLoad")),r(),G(i,(()=>z(e,n,t)))},z=async(e,t,r)=>{const n=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),a=n["s-rc"];r&&y(e);const s=(e.$cmpMeta$.$tagName$,()=>{});U(e,t),a&&(a.map((e=>e())),n["s-rc"]=void 0),s(),i();{const t=n["s-p"],r=()=>q(e);0===t.length?r():(Promise.all(t).then(r),e.$flags$|=4,t.length=0)}},U=(e,t,r)=>{try{t=t.render(),e.$flags$&=-17,e.$flags$|=2,T(e,t)}catch(t){ae(t,e.$hostElement$)}return null},q=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$,r=()=>{},n=e.$lazyInstance$,i=e.$ancestorComponent$;64&e.$flags$?(X(n,"componentDidUpdate"),r()):(e.$flags$|=64,Q(t),X(n,"componentDidLoad"),r(),e.$onReadyResolve$(t),i||H()),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&pe((()=>V(e,!1))),e.$flags$&=-517},H=e=>{Q(l.documentElement),pe((()=>((e,t,r)=>{const n=u.ce(t,r);return e.dispatchEvent(n),n})(o,"appload",{detail:{namespace:"read-along"}})))},X=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){ae(e)}},G=(e,t)=>e&&e.then?e.then(t):t(),Q=e=>e.classList.add("hydrated"),Y=(e,t,r,n)=>{const i=te(e),a=i.$instanceValues$.get(t),s=i.$flags$,o=i.$lazyInstance$;var l,u;l=r,u=n.$members$[t][0],r=null==l||A(l)?l:4&u?"false"!==l&&(""===l||!!l):1&u?String(l):l,8&s&&void 0!==a||r===a||(i.$instanceValues$.set(t,r),o&&2==(18&s)&&V(i,!1))},K=(e,t,r)=>{if(t.$members$){const n=Object.entries(t.$members$),i=e.prototype;if(n.map((([e,[n]])=>{(31&n||2&r&&32&n)&&Object.defineProperty(i,e,{get(){return t=e,te(this).$instanceValues$.get(t);var t},set(r){Y(this,e,r,t)},configurable:!0,enumerable:!0})})),1&r){const t=new Map;i.attributeChangedCallback=function(e,r,n){u.jmp((()=>{const r=t.get(e);this.hasOwnProperty(r)&&(n=this[r],delete this[r]),this[r]=(null!==n||"boolean"!=typeof this[r])&&n}))},e.observedAttributes=n.filter((([e,t])=>15&t[0])).map((([e,r])=>{const n=r[1]||e;return t.set(n,e),n}))}}return e},J=async(e,t,r,n,i)=>{if(0==(32&t.$flags$)){{if(t.$flags$|=32,(i=oe(r)).then){const e=()=>{};i=await i,e()}i.isProxied||(K(i,r,2),i.isProxied=!0);const e=(r.$tagName$,()=>{});t.$flags$|=8;try{new i(t)}catch(e){ae(e)}t.$flags$&=-9,e()}if(i.style){let e=i.style;const t=b(r);if(!le.has(t)){const n=(r.$tagName$,()=>{});((e,t,r)=>{let n=le.get(e);h&&r?(n=n||new CSSStyleSheet,n.replace(t)):n=t,le.set(e,n)})(t,e,!!(1&r.$flags$)),n()}}}const a=t.$ancestorComponent$,s=()=>V(t,!0);a&&a["s-rc"]?a["s-rc"].push(s):s()},Z=(e,t={})=>{const r=()=>{},n=[],i=t.exclude||[],a=o.customElements,s=l.head,c=s.querySelector("meta[charset]"),h=l.createElement("style"),f=[];let p,m=!0;Object.assign(u,t),u.$resourcesUrl$=new URL(t.resourcesUrl||"./",l.baseURI).href,e.map((e=>e[1].map((t=>{const r={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};r.$members$=t[2],r.$listeners$=t[3];const s=r.$tagName$,o=class extends HTMLElement{constructor(e){super(e),ne(e=this,r),1&r.$flags$&&e.attachShadow({mode:"open"})}connectedCallback(){p&&(clearTimeout(p),p=null),m?f.push(this):u.jmp((()=>(e=>{if(0==(1&u.$flags$)){const t=te(e),r=t.$cmpMeta$,n=(r.$tagName$,()=>{});if(1&t.$flags$)d(e,t,r.$listeners$);else{t.$flags$|=1;{let r=e;for(;r=r.parentNode||r.host;)if(r["s-p"]){I(t,t.$ancestorComponent$=r);break}}r.$members$&&Object.entries(r.$members$).map((([t,[r]])=>{if(31&r&&e.hasOwnProperty(t)){const r=e[t];delete e[t],e[t]=r}})),J(0,t,r)}n()}})(this)))}disconnectedCallback(){u.jmp((()=>(e=>{if(0==(1&u.$flags$)){const t=te(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this)))}componentOnReady(){return te(this).$onReadyPromise$}};r.$lazyBundleId$=e[0],i.includes(s)||a.get(s)||(n.push(s),a.define(s,K(o,r,1)))})))),h.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}",h.setAttribute("data-styles",""),s.insertBefore(h,c?c.nextSibling:s.firstChild),m=!1,f.length?f.map((e=>e.connectedCallback())):u.jmp((()=>p=setTimeout(H,30))),r()},ee=new WeakMap,te=e=>ee.get(e),re=(e,t)=>ee.set(t.$lazyInstance$=e,t),ne=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return r.$onReadyPromise$=new Promise((e=>r.$onReadyResolve$=e)),e["s-p"]=[],e["s-rc"]=[],d(e,r,t.$listeners$),ee.set(e,r)},ie=(e,t)=>t in e,ae=(e,t)=>(0,console.error)(e,t),se=new Map,oe=(e,t,n)=>{const i=e.$tagName$.replace(/-/g,"_"),a=e.$lazyBundleId$,s=se.get(a);return s?s[i]:r(318)(`./${a}.entry.js`).then((e=>(se.set(a,e),e[i])),ae)},le=new Map,ue=[],ce=[],he=(e,t)=>r=>{e.push(r),s||(s=!0,t&&4&u.$flags$?pe(fe):u.raf(fe))},de=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){ae(e)}e.length=0},fe=()=>{de(ue),de(ce),(s=ue.length>0)&&u.raf(fe)},pe=e=>c().then(e),me=he(ce,!0)},159:(e,t,r)=>{"use strict";r.r(t),r.d(t,{read_along:()=>F});var n=r(896);function i(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.addEventListener("error",(function(e){console.log(e)})),t.send(),t.responseText}function a(e,t){let r=t.lookupNamespaceURI(null);let n=[],i=t.evaluate(e,t,(function(e){return{i:r}[e]||null}),XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),a=i.iterateNext();for(;a;)n.push(a),a=i.iterateNext();return n}function s(e){return a('.//div[@type="page"]',e).map((t=>{let r=t.id,n=a(`.//div[@id='${r}']/graphic/@url`,e),i={id:r,paragraphs:a(`.//div[@id='${r}']/p`,e)};return n.length>0&&(i.img=n[0].nodeValue),t.attributes&&(i.attributes=t.attributes),i}))}function o(e){let t=i(e),r=(new DOMParser).parseFromString(t,"text/xml"),n=a("/i:smil/i:body/i:par/i:text/@src",r).map((e=>{let t=e.value.split("#");return t[t.length-1]})),s=a("/i:smil/i:body/i:par/i:audio/@clipBegin",r).map((e=>1e3*e.value)),o=a("/i:smil/i:body/i:par/i:audio/@clipEnd",r).map((e=>1e3*e.value)),l=[];for(var u=0;u<s.length;u++){let e=o[u]-s[u];l.push(e)}let c=(h=[s,l])[0].map((function(e,t){return h.map((function(e){return e[t]}))}));var h;let d={};for(u=0;u<n.length;u++)d[n[u]]=c[u];return d}function l(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function u(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},r.exports),r.exports}var c=u((function(e,t){
/*!
 * wavesurfer.js 6.1.0 (2022-03-31)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
var r;self,r=function(){return(()=>{var e={"./src/drawer.canvasentry.js":
/*!***********************************!*\
  !*** ./src/drawer.canvasentry.js ***!
  \***********************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(/*! ./util/style */"./src/util/style.js")),i=a(r(/*! ./util/get-id */"./src/util/get-id.js"));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wave=null,this.waveCtx=null,this.progress=null,this.progressCtx=null,this.start=0,this.end=1,this.id=(0,i.default)(void 0!==this.constructor.name?this.constructor.name.toLowerCase()+"_":"canvasentry_"),this.canvasContextAttributes={}}var t,r,a;return t=e,(r=[{key:"initWave",value:function(e){this.wave=e,this.waveCtx=this.wave.getContext("2d",this.canvasContextAttributes)}},{key:"initProgress",value:function(e){this.progress=e,this.progressCtx=this.progress.getContext("2d",this.canvasContextAttributes)}},{key:"updateDimensions",value:function(e,t,r,i){this.start=this.wave.offsetLeft/t||0,this.end=this.start+e/t,this.wave.width=r,this.wave.height=i;var a={width:e+"px"};(0,n.default)(this.wave,a),this.hasProgressCanvas&&(this.progress.width=r,this.progress.height=i,(0,n.default)(this.progress,a))}},{key:"clearWave",value:function(){this.waveCtx.clearRect(0,0,this.waveCtx.canvas.width,this.waveCtx.canvas.height),this.hasProgressCanvas&&this.progressCtx.clearRect(0,0,this.progressCtx.canvas.width,this.progressCtx.canvas.height)}},{key:"setFillStyles",value:function(e,t){this.waveCtx.fillStyle=this.getFillStyle(this.waveCtx,e),this.hasProgressCanvas&&(this.progressCtx.fillStyle=this.getFillStyle(this.progressCtx,t))}},{key:"getFillStyle",value:function(e,t){if("string"==typeof t||t instanceof CanvasGradient)return t;var r=e.createLinearGradient(0,0,0,e.canvas.height);return t.forEach((function(e,n){return r.addColorStop(n/t.length,e)})),r}},{key:"applyCanvasTransforms",value:function(e){e&&(this.waveCtx.setTransform(0,1,1,0,0,0),this.hasProgressCanvas&&this.progressCtx.setTransform(0,1,1,0,0,0))}},{key:"fillRects",value:function(e,t,r,n,i){this.fillRectToContext(this.waveCtx,e,t,r,n,i),this.hasProgressCanvas&&this.fillRectToContext(this.progressCtx,e,t,r,n,i)}},{key:"fillRectToContext",value:function(e,t,r,n,i,a){e&&(a?this.drawRoundedRect(e,t,r,n,i,a):e.fillRect(t,r,n,i))}},{key:"drawRoundedRect",value:function(e,t,r,n,i,a){0!==i&&(i<0&&(r-=i*=-1),e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+n-a,r),e.quadraticCurveTo(t+n,r,t+n,r+a),e.lineTo(t+n,r+i-a),e.quadraticCurveTo(t+n,r+i,t+n-a,r+i),e.lineTo(t+a,r+i),e.quadraticCurveTo(t,r+i,t,r+i-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath(),e.fill())}},{key:"drawLines",value:function(e,t,r,n,i,a){this.drawLineToContext(this.waveCtx,e,t,r,n,i,a),this.hasProgressCanvas&&this.drawLineToContext(this.progressCtx,e,t,r,n,i,a)}},{key:"drawLineToContext",value:function(e,t,r,n,i,a,s){if(e){var o,l,u,c=t.length/2,h=Math.round(c*this.start),d=h,f=Math.round(c*this.end)+1,p=this.wave.width/(f-d-1),m=n+i,g=r/n;for(e.beginPath(),e.moveTo((d-h)*p,m),e.lineTo((d-h)*p,m-Math.round((t[2*d]||0)/g)),o=d;o<f;o++)l=t[2*o]||0,u=Math.round(l/g),e.lineTo((o-h)*p+this.halfPixel,m-u);for(var v=f-1;v>=d;v--)l=t[2*v+1]||0,u=Math.round(l/g),e.lineTo((v-h)*p+this.halfPixel,m-u);e.lineTo((d-h)*p,m-Math.round((t[2*d+1]||0)/g)),e.closePath(),e.fill()}}},{key:"destroy",value:function(){this.waveCtx=null,this.wave=null,this.progressCtx=null,this.progress=null}},{key:"getImage",value:function(e,t,r){var n=this;return"blob"===r?new Promise((function(r){n.wave.toBlob(r,e,t)})):"dataURL"===r?this.wave.toDataURL(e,t):void 0}}])&&s(t.prototype,r),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=o,e.exports=t.default},"./src/drawer.js":
/*!***********************!*\
  !*** ./src/drawer.js ***!
  \***********************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var i=c(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(u,e);var t,r,n,a=l(u);function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=a.call(this)).container=i.withOrientation(e,t.vertical),r.params=t,r.width=0,r.height=t.height*r.params.pixelRatio,r.lastPos=0,r.wrapper=null,r}return t=u,(r=[{key:"style",value:function(e,t){return i.style(e,t)}},{key:"createWrapper",value:function(){this.wrapper=i.withOrientation(this.container.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",cursor:this.params.hideCursor?"none":"auto",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(e,t){!t&&e.preventDefault();var r,n=i.withOrientation(e.targetTouches?e.targetTouches[0]:e,this.params.vertical).clientX,a=this.wrapper.getBoundingClientRect(),s=this.width,o=this.getWidth(),l=this.getProgressPixels(a,n);return r=!this.params.fillParent&&s<o?l*(this.params.pixelRatio/s)||0:(l+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,i.clamp(r,0,1)}},{key:"getProgressPixels",value:function(e,t){return this.params.rtl?e.right-t:t-e.left}},{key:"setupWrapperEvents",value:function(){var e=this;this.wrapper.addEventListener("click",(function(t){var r=i.withOrientation(t,e.params.vertical),n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!==n){var a=e.wrapper.getBoundingClientRect();if(r.clientY>=a.bottom-n)return}e.params.interact&&e.fireEvent("click",t,e.handleEvent(t))})),this.wrapper.addEventListener("dblclick",(function(t){e.params.interact&&e.fireEvent("dblclick",t,e.handleEvent(t))})),this.wrapper.addEventListener("scroll",(function(t){return e.fireEvent("scroll",t)}))}},{key:"drawPeaks",value:function(e,t,r,n){this.setWidth(t)||this.clearWave(),this.params.barWidth?this.drawBars(e,0,r,n):this.drawWave(e,0,r,n)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(e){var t=this.wrapper.scrollWidth*e;this.recenterOnPosition(t,!0)}},{key:"recenterOnPosition",value:function(e,t){var r=this.wrapper.scrollLeft,n=~~(this.wrapper.clientWidth/2),i=this.wrapper.scrollWidth-this.wrapper.clientWidth,a=e-n,s=a-r;if(0!=i){if(!t&&-n<=s&&s<n){var o=this.params.autoCenterRate;o/=n,o*=i,a=r+(s=Math.max(-o,Math.min(o,s)))}(a=Math.max(0,Math.min(i,a)))!=r&&(this.wrapper.scrollLeft=a)}}},{key:"getScrollX",value:function(){var e=0;if(this.wrapper){var t=this.params.pixelRatio;if(e=Math.round(this.wrapper.scrollLeft*t),this.params.scrollParent){var r=~~(this.wrapper.scrollWidth*t-this.getWidth());e=Math.min(r,Math.max(0,e))}}return e}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(e){if(this.width==e)return!1;if(this.width=e,this.params.fillParent||this.params.scrollParent)this.style(this.wrapper,{width:""});else{var t=~~(this.width/this.params.pixelRatio)+"px";this.style(this.wrapper,{width:t})}return this.updateSize(),!0}},{key:"setHeight",value:function(e){return e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(e){var t=1/this.params.pixelRatio,r=Math.round(e*this.width)*t;if(r<this.lastPos||r-this.lastPos>=t){if(this.lastPos=r,this.params.scrollParent&&this.params.autoCenter){var n=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(n,this.params.autoCenterImmediately)}this.updateProgress(r)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container.domElement&&this.container.removeChild(this.wrapper.domElement),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(e,t,r,n){}},{key:"drawWave",value:function(e,t,r,n){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(e){}}])&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(i.Observer);t.default=h,e.exports=t.default},"./src/drawer.multicanvas.js":
/*!***********************************!*\
  !*** ./src/drawer.multicanvas.js ***!
  \***********************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=l(r(/*! ./drawer */"./src/drawer.js")),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js")),s=l(r(/*! ./drawer.canvasentry */"./src/drawer.canvasentry.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},c(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var i=f(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(o,e);var t,r,n,i=h(o);function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=i.call(this,e,t)).maxCanvasWidth=t.maxCanvasWidth,r.maxCanvasElementWidth=Math.round(t.maxCanvasWidth/t.pixelRatio),r.hasProgressCanvas=t.waveColor!=t.progressColor,r.halfPixel=.5/t.pixelRatio,r.canvases=[],r.progressWave=null,r.EntryClass=s.default,r.canvasContextAttributes=t.drawingContextAttributes,r.overlap=2*Math.ceil(t.pixelRatio/2),r.barRadius=t.barRadius||0,r.vertical=t.vertical,r}return t=o,r=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=a.withOrientation(this.wrapper.appendChild(document.createElement("wave")),this.params.vertical),this.style(this.progressWave,{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"}),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var e=this,t=Math.round(this.width/this.params.pixelRatio),r=Math.ceil(t/(this.maxCanvasElementWidth+this.overlap));this.canvases.length<r;)this.addCanvas();for(;this.canvases.length>r;)this.removeCanvas();var n=this.maxCanvasWidth+this.overlap,i=this.canvases.length-1;this.canvases.forEach((function(t,r){r==i&&(n=e.width-e.maxCanvasWidth*i),e.updateDimensions(t,n,e.height),t.clearWave()}))}},{key:"addCanvas",value:function(){var e=new this.EntryClass;e.canvasContextAttributes=this.canvasContextAttributes,e.hasProgressCanvas=this.hasProgressCanvas,e.halfPixel=this.halfPixel;var t=this.maxCanvasElementWidth*this.canvases.length,r=a.withOrientation(this.wrapper.appendChild(document.createElement("canvas")),this.params.vertical);if(this.style(r,{position:"absolute",zIndex:2,left:t+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"}),e.initWave(r),this.hasProgressCanvas){var n=a.withOrientation(this.progressWave.appendChild(document.createElement("canvas")),this.params.vertical);this.style(n,{position:"absolute",left:t+"px",top:0,bottom:0,height:"100%"}),e.initProgress(n)}this.canvases.push(e)}},{key:"removeCanvas",value:function(){var e=this.canvases[this.canvases.length-1];e.wave.parentElement.removeChild(e.wave.domElement),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress.domElement),e&&(e.destroy(),e=null),this.canvases.pop()}},{key:"updateDimensions",value:function(e,t,r){var n=Math.round(t/this.params.pixelRatio),i=Math.round(this.width/this.params.pixelRatio);e.updateDimensions(n,i,t,r),this.style(this.progressWave,{display:"block"})}},{key:"clearWave",value:function(){var e=this;a.frame((function(){e.canvases.forEach((function(e){return e.clearWave()}))}))()}},{key:"drawBars",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,(function(e){var t=e.absmax,a=e.hasMinVals,s=e.offsetY,o=e.halfH,l=e.peaks,u=e.channelIndex;if(void 0!==r)for(var c=a?2:1,h=l.length/c,d=i.params.barWidth*i.params.pixelRatio,f=d+(null===i.params.barGap?Math.max(i.params.pixelRatio,~~(d/2)):Math.max(i.params.pixelRatio,i.params.barGap*i.params.pixelRatio)),p=h/i.width,m=n,g=r;g<m;g+=f){var v=0,y=Math.floor(g*p)*c,b=Math.floor((g+f)*p)*c;do{var w=Math.abs(l[y]);w>v&&(v=w),y+=c}while(y<b);var A=Math.round(v/t*o);0==A&&i.params.barMinHeight&&(A=i.params.barMinHeight),i.fillRect(g+i.halfPixel,o-A+s,d+i.halfPixel,2*A,i.barRadius,u)}}))}},{key:"drawWave",value:function(e,t,r,n){var i=this;return this.prepareDraw(e,t,r,n,(function(e){var t=e.absmax,a=e.hasMinVals,s=e.offsetY,o=e.halfH,l=e.peaks,u=e.channelIndex;if(!a){for(var c=[],h=l.length,d=0;d<h;d++)c[2*d]=l[d],c[2*d+1]=-l[d];l=c}void 0!==r&&i.drawLine(l,t,o,s,r,n,u),i.fillRect(0,o+s-i.halfPixel,i.width,i.halfPixel,i.barRadius,u)}))}},{key:"drawLine",value:function(e,t,r,n,i,a,s){var o=this,l=this.params.splitChannelsOptions.channelColors[s]||{},u=l.waveColor,c=l.progressColor;this.canvases.forEach((function(s,l){o.setFillStyles(s,u,c),o.applyCanvasTransforms(s,o.params.vertical),s.drawLines(e,t,r,n,i,a)}))}},{key:"fillRect",value:function(e,t,r,n,i,a){for(var s=Math.floor(e/this.maxCanvasWidth),o=Math.min(Math.ceil((e+r)/this.maxCanvasWidth)+1,this.canvases.length),l=s;l<o;l++){var u=this.canvases[l],c=l*this.maxCanvasWidth,h={x1:Math.max(e,l*this.maxCanvasWidth),y1:t,x2:Math.min(e+r,l*this.maxCanvasWidth+u.wave.width),y2:t+n};if(h.x1<h.x2){var d=this.params.splitChannelsOptions.channelColors[a]||{},f=d.waveColor,p=d.progressColor;this.setFillStyles(u,f,p),this.applyCanvasTransforms(u,this.params.vertical),u.fillRects(h.x1-c,h.y1,h.x2-h.x1,h.y2-h.y1,i)}}}},{key:"hideChannel",value:function(e){return this.params.splitChannels&&this.params.splitChannelsOptions.filterChannels.includes(e)}},{key:"prepareDraw",value:function(e,t,r,n,i,s,o){var l=this;return a.frame((function(){if(e[0]instanceof Array){var u=e;if(l.params.splitChannels){var c,h=u.filter((function(e,t){return!l.hideChannel(t)}));return l.params.splitChannelsOptions.overlay||l.setHeight(Math.max(h.length,1)*l.params.height*l.params.pixelRatio),l.params.splitChannelsOptions&&l.params.splitChannelsOptions.relativeNormalization&&(c=a.max(u.map((function(e){return a.absMax(e)})))),u.forEach((function(e,t){return l.prepareDraw(e,t,r,n,i,h.indexOf(e),c)}))}e=u[0]}if(!l.hideChannel(t)){var d=1/l.params.barHeight;l.params.normalize&&(d=void 0===o?a.absMax(e):o);var f=[].some.call(e,(function(e){return e<0})),p=l.params.height*l.params.pixelRatio,m=p/2,g=p*s||0;return l.params.splitChannelsOptions&&l.params.splitChannelsOptions.overlay&&(g=0),i({absmax:d,hasMinVals:f,height:p,offsetY:g,halfH:m,peaks:e,channelIndex:t})}}))()}},{key:"setFillStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.params.waveColor,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.params.progressColor;e.setFillStyles(t,r)}},{key:"applyCanvasTransforms",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.applyCanvasTransforms(t)}},{key:"getImage",value:function(e,t,r){if("blob"===r)return Promise.all(this.canvases.map((function(n){return n.getImage(e,t,r)})));if("dataURL"===r){var n=this.canvases.map((function(n){return n.getImage(e,t,r)}));return n.length>1?n:n[0]}}},{key:"updateProgress",value:function(e){this.style(this.progressWave,{width:e+"px"})}}],r&&u(t.prototype,r),n&&u(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(i.default);t.default=p,e.exports=t.default},"./src/mediaelement-webaudio.js":
/*!**************************************!*\
  !*** ./src/mediaelement-webaudio.js ***!
  \**************************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i;function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=o(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},s.apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}function l(e,t){return l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},l(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(o,e);var t,r,n,i=u(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).params=e,t.sourceMediaElement=null,t}return t=o,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer(),this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode()}},{key:"_load",value:function(e,t,r){s(h(o.prototype),"_load",this).call(this,e,t,r),this.createMediaElementSource(e)}},{key:"createMediaElementSource",value:function(e){this.sourceMediaElement=this.ac.createMediaElementSource(e),this.sourceMediaElement.connect(this.analyser)}},{key:"play",value:function(e,t){return this.resumeAudioContext(),s(h(o.prototype),"play",this).call(this,e,t)}},{key:"destroy",value:function(){s(h(o.prototype),"destroy",this).call(this),this.destroyWebAudio()}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(((i=r(/*! ./mediaelement */"./src/mediaelement.js"))&&i.__esModule?i:{default:i}).default);t.default=d,e.exports=t.default},"./src/mediaelement.js":
/*!*****************************!*\
  !*** ./src/mediaelement.js ***!
  \*****************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,a=(i=r(/*! ./webaudio */"./src/webaudio.js"))&&i.__esModule?i:{default:i},s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=c(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},u.apply(this,arguments)}function c(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return f(this,r)}}function f(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,r,n,i=d(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).params=e,t.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},t.mediaType=e.mediaType.toLowerCase(),t.elementPosition=e.elementPosition,t.peaks=null,t.playbackRate=1,t.volume=1,t.isMuted=!1,t.buffer=null,t.onPlayEnd=null,t.mediaListeners={},t}return t=a,(r=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"_setupMediaListeners",value:function(){var e=this;this.mediaListeners.error=function(){e.fireEvent("error","Error loading media element")},this.mediaListeners.canplay=function(){e.fireEvent("canplay")},this.mediaListeners.ended=function(){e.fireEvent("finish")},this.mediaListeners.play=function(){e.fireEvent("play")},this.mediaListeners.pause=function(){e.fireEvent("pause")},this.mediaListeners.seeked=function(t){e.fireEvent("seek")},this.mediaListeners.volumechange=function(t){e.isMuted=e.media.muted,e.isMuted?e.volume=0:e.volume=e.media.volume,e.fireEvent("volume")},Object.keys(this.mediaListeners).forEach((function(t){e.media.removeEventListener(t,e.mediaListeners[t]),e.media.addEventListener(t,e.mediaListeners[t])}))}},{key:"createTimer",value:function(){var e=this;this.on("play",(function t(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),s.frame(t)())})),this.on("pause",(function(){e.fireEvent("audioprocess",e.getCurrentTime())}))}},{key:"load",value:function(e,t,r,n){var i=document.createElement(this.mediaType);i.controls=this.params.mediaControls,i.autoplay=this.params.autoplay||!1,i.preload=null==n?"auto":n,i.src=e,i.style.width="100%";var a=t.querySelector(this.mediaType);a&&t.removeChild(a),t.appendChild(i),this._load(i,r,n)}},{key:"loadElt",value:function(e,t){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,t,e.preload)}},{key:"_load",value:function(e,t,r){if(!(e instanceof HTMLMediaElement)||void 0===e.addEventListener)throw new Error("media parameter is not a valid media element");"function"!=typeof e.load||t&&"none"==r||e.load(),this.media=e,this._setupMediaListeners(),this.peaks=t,this.onPlayEnd=null,this.buffer=null,this.isMuted=e.muted,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(e){null==e||isNaN(e)||(this.media.currentTime=e),this.clearPlayEnd()}},{key:"play",value:function(e,t){this.seekTo(e);var r=this.media.play();return t&&this.setPlayEnd(t),r}},{key:"pause",value:function(){var e;return this.media&&(e=this.media.pause()),this.clearPlayEnd(),e}},{key:"setPlayEnd",value:function(e){var t=this;this.clearPlayEnd(),this._onPlayEnd=function(r){r>=e&&(t.pause(),t.seekTo(e))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(e,t,r){return this.buffer?u(p(a.prototype),"getPeaks",this).call(this,e,t,r):this.peaks||[]}},{key:"setSinkId",value:function(e){return e?this.media.setSinkId?this.media.setSinkId(e):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){this.volume=e,this.media.volume!==this.volume&&(this.media.volume=this.volume)}},{key:"setMute",value:function(e){this.isMuted=this.media.muted=e}},{key:"destroy",value:function(){var e=this;this.pause(),this.unAll(),this.destroyed=!0,Object.keys(this.mediaListeners).forEach((function(t){e.media&&e.media.removeEventListener(t,e.mediaListeners[t])})),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&l(t.prototype,r),n&&l(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(a.default);t.default=m,e.exports=t.default},"./src/peakcache.js":
/*!**************************!*\
  !*** ./src/peakcache.js ***!
  \**************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,n,i;return t=e,(n=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(e,t,r){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var n=[],i=0;i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<t;)i++;for(i%2==0&&n.push(t);i<this.peakCacheRanges.length&&this.peakCacheRanges[i]<=r;)n.push(this.peakCacheRanges[i]),i++;i%2==0&&n.push(r),n=n.filter((function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(n),this.peakCacheRanges=this.peakCacheRanges.sort((function(e,t){return e-t})).filter((function(e,t,r){return 0==t?e!=r[t+1]:t==r.length-1?e!=r[t-1]:e!=r[t-1]&&e!=r[t+1]}));var a=[];for(i=0;i<n.length;i+=2)a.push([n[i],n[i+1]]);return a}},{key:"getCacheRanges",value:function(){var e,t=[];for(e=0;e<this.peakCacheRanges.length;e+=2)t.push([this.peakCacheRanges[e],this.peakCacheRanges[e+1]]);return t}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=n,e.exports=t.default},"./src/util/absMax.js":
/*!****************************!*\
  !*** ./src/util/absMax.js ***!
  \****************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=(0,n.default)(e),r=(0,i.default)(e);return-r>t?-r:t};var n=a(r(/*! ./max */"./src/util/max.js")),i=a(r(/*! ./min */"./src/util/min.js"));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},"./src/util/clamp.js":
/*!***************************!*\
  !*** ./src/util/clamp.js ***!
  \***************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){return Math.min(Math.max(t,e),r)},e.exports=t.default},"./src/util/fetch.js":
/*!***************************!*\
  !*** ./src/util/fetch.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("fetch options missing");if(!e.url)throw new Error("fetch url missing");var t=new i.default,r=new Headers,n=new Request(e.url);t.controller=new AbortController,e&&e.requestHeaders&&e.requestHeaders.forEach((function(e){r.append(e.key,e.value)}));var a=e.responseType||"json",o={method:e.method||"GET",headers:r,mode:e.mode||"cors",credentials:e.credentials||"same-origin",cache:e.cache||"default",redirect:e.redirect||"follow",referrer:e.referrer||"client",signal:t.controller.signal};return fetch(n,o).then((function(e){t.response=e;var r=!0;e.body||(r=!1);var n=e.headers.get("content-length");return null===n&&(r=!1),r?(t.onProgress=function(e){t.fireEvent("progress",e)},new Response(new ReadableStream(new s(t,n,e)),o)):e})).then((function(e){var t;if(e.ok)switch(a){case"arraybuffer":return e.arrayBuffer();case"json":return e.json();case"blob":return e.blob();case"text":return e.text();default:t="Unknown responseType: "+a}throw t||(t="HTTP error status: "+e.status),new Error(t)})).then((function(e){t.fireEvent("success",e)})).catch((function(e){t.fireEvent("error",e)})),t.fetchRequest=n,t};var n,i=(n=r(/*! ./observer */"./src/util/observer.js"))&&n.__esModule?n:{default:n};function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.instance=t,this.instance._reader=n.body.getReader(),this.total=parseInt(r,10),this.loaded=0}var t,r,n;return t=e,(r=[{key:"start",value:function(e){var t=this;!function r(){t.instance._reader.read().then((function(n){var i=n.done,a=n.value;if(i)return 0===t.total&&t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!1}),void e.close();t.loaded+=a.byteLength,t.instance.onProgress.call(t.instance,{loaded:t.loaded,total:t.total,lengthComputable:!(0===t.total)}),e.enqueue(a),r()})).catch((function(t){e.error(t)}))}()}}])&&a(t.prototype,r),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();e.exports=t.default},"./src/util/frame.js":
/*!***************************!*\
  !*** ./src/util/frame.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return(0,i.default)((function(){return e.apply(void 0,r)}))}};var n,i=(n=r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js"))&&n.__esModule?n:{default:n};e.exports=t.default},"./src/util/get-id.js":
/*!****************************!*\
  !*** ./src/util/get-id.js ***!
  \****************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return void 0===e&&(e="wavesurfer_"),e+Math.random().toString(32).substring(2)},e.exports=t.default},"./src/util/index.js":
/*!***************************!*\
  !*** ./src/util/index.js ***!
  \***************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Observer",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"absMax",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"clamp",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"debounce",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"fetchFile",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"frame",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"getId",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"ignoreSilenceMode",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"max",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"min",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"preventClick",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"requestAnimationFrame",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"style",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"withOrientation",{enumerable:!0,get:function(){return m.default}});var n=v(r(/*! ./get-id */"./src/util/get-id.js")),i=v(r(/*! ./max */"./src/util/max.js")),a=v(r(/*! ./min */"./src/util/min.js")),s=v(r(/*! ./absMax */"./src/util/absMax.js")),o=v(r(/*! ./observer */"./src/util/observer.js")),l=v(r(/*! ./style */"./src/util/style.js")),u=v(r(/*! ./request-animation-frame */"./src/util/request-animation-frame.js")),c=v(r(/*! ./frame */"./src/util/frame.js")),h=v(r(/*! debounce */"./node_modules/debounce/index.js")),d=v(r(/*! ./prevent-click */"./src/util/prevent-click.js")),f=v(r(/*! ./fetch */"./src/util/fetch.js")),p=v(r(/*! ./clamp */"./src/util/clamp.js")),m=v(r(/*! ./orientation */"./src/util/orientation.js")),g=v(r(/*! ./silence-mode */"./src/util/silence-mode.js"));function v(e){return e&&e.__esModule?e:{default:e}}},"./src/util/max.js":
/*!*************************!*\
  !*** ./src/util/max.js ***!
  \*************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=-1/0;return Object.keys(e).forEach((function(r){e[r]>t&&(t=e[r])})),t},e.exports=t.default},"./src/util/min.js":
/*!*************************!*\
  !*** ./src/util/min.js ***!
  \*************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=Number(1/0);return Object.keys(e).forEach((function(r){e[r]<t&&(t=e[r])})),t},e.exports=t.default},"./src/util/observer.js":
/*!******************************!*\
  !*** ./src/util/observer.js ***!
  \******************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._disabledEventEmissions=[],this.handlers=null}var t,n,i;return t=e,n=[{key:"on",value:function(e,t){var r=this;this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(t),{name:e,callback:t,un:function(e,t){return r.un(e,t)}}}},{key:"un",value:function(e,t){if(this.handlers){var r,n=this.handlers[e];if(n)if(t)for(r=n.length-1;r>=0;r--)n[r]==t&&n.splice(r,1);else n.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(e,t){var r=this;return this.on(e,(function n(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];t.apply(r,a),setTimeout((function(){r.un(e,n)}),0)}))}},{key:"setDisabledEventEmissions",value:function(e){this._disabledEventEmissions=e}},{key:"_isDisabledEventEmission",value:function(e){return this._disabledEventEmissions&&this._disabledEventEmissions.includes(e)}},{key:"fireEvent",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(this.handlers&&!this._isDisabledEventEmission(e)){var i=this.handlers[e];i&&i.forEach((function(e){e.apply(void 0,r)}))}}}],n&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=n,e.exports=t.default},"./src/util/orientation.js":
/*!*********************************!*\
  !*** ./src/util/orientation.js ***!
  \*********************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(t,r){return t[i]?t:new Proxy(t,{get:function(t,a,s){if(a===i)return!0;if("domElement"===a)return t;if("style"===a)return e(t.style,r);if("canvas"===a)return e(t.canvas,r);if("getBoundingClientRect"===a)return function(){return e(t.getBoundingClientRect.apply(t,arguments),r)};if("getContext"===a)return function(){return e(t.getContext.apply(t,arguments),r)};var o=t[n(a,r)];return"function"==typeof o?o.bind(t):o},set:function(e,t,i){return e[n(t,r)]=i,!0}})};var r={width:"height",height:"width",overflowX:"overflowY",overflowY:"overflowX",clientWidth:"clientHeight",clientHeight:"clientWidth",clientX:"clientY",clientY:"clientX",scrollWidth:"scrollHeight",scrollLeft:"scrollTop",offsetLeft:"offsetTop",offsetTop:"offsetLeft",offsetHeight:"offsetWidth",offsetWidth:"offsetHeight",left:"top",right:"bottom",top:"left",bottom:"right",borderRightStyle:"borderBottomStyle",borderRightWidth:"borderBottomWidth",borderRightColor:"borderBottomColor"};function n(e,t){return Object.prototype.hasOwnProperty.call(r,e)&&t?r[e]:e}var i=Symbol("isProxy");e.exports=t.default},"./src/util/prevent-click.js":
/*!***********************************!*\
  !*** ./src/util/prevent-click.js ***!
  \***********************************/(e,t)=>{function r(e){e.stopPropagation(),document.body.removeEventListener("click",r,!0)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){document.body.addEventListener("click",r,!0)},e.exports=t.default},"./src/util/request-animation-frame.js":
/*!*********************************************!*\
  !*** ./src/util/request-animation-frame.js ***!
  \*********************************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){return setTimeout(e,1e3/60)}).bind(window);t.default=r,e.exports=t.default},"./src/util/silence-mode.js":
/*!**********************************!*\
  !*** ./src/util/silence-mode.js ***!
  \**********************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.createElement("div");e.innerHTML='<audio x-webkit-airplay="deny"></audio>';var t=e.children.item(0);t.src="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAAWGluZwAAAA8AAAACAAACcQCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA//////////////////////////////////////////////////////////////////8AAABhTEFNRTMuMTAwA8MAAAAAAAAAABQgJAUHQQAB9AAAAnGMHkkIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//sQxAADgnABGiAAQBCqgCRMAAgEAH///////////////7+n/9FTuQsQH//////2NG0jWUGlio5gLQTOtIoeR2WX////X4s9Atb/JRVCbBUpeRUq//////////////////9RUi0f2jn/+xDECgPCjAEQAABN4AAANIAAAAQVTEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVQ==",t.preload="auto",t.type="audio/mpeg",t.disableRemotePlayback=!0,t.play(),t.remove(),e.remove()},e.exports=t.default},"./src/util/style.js":
/*!***************************!*\
  !*** ./src/util/style.js ***!
  \***************************/(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Object.keys(t).forEach((function(r){e.style[r]!==t[r]&&(e.style[r]=t[r])})),e},e.exports=t.default},"./src/wavesurfer.js":
/*!***************************!*\
  !*** ./src/wavesurfer.js ***!
  \***************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var o=a?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js")),a=c(r(/*! ./drawer.multicanvas */"./src/drawer.multicanvas.js")),s=c(r(/*! ./webaudio */"./src/webaudio.js")),o=c(r(/*! ./mediaelement */"./src/mediaelement.js")),l=c(r(/*! ./peakcache */"./src/peakcache.js")),u=c(r(/*! ./mediaelement-webaudio */"./src/mediaelement-webaudio.js"));function c(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=g(e);if(t){var i=g(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return p(this,r)}}function p(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(h,e);var t,r,n,c=f(h);function h(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),v(m(t=c.call(this)),"defaultParams",{audioContext:null,audioScriptProcessor:null,audioRate:1,autoCenter:!0,autoCenterRate:5,autoCenterImmediately:!1,backend:"WebAudio",backgroundColor:null,barHeight:1,barRadius:0,barGap:null,barMinHeight:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,drawingContextAttributes:{desynchronized:!1},duration:null,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,hideCursor:!1,ignoreSilenceMode:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:a.default,responsive:!1,rtl:!1,scrollParent:!1,skipLength:2,splitChannels:!1,splitChannelsOptions:{overlay:!1,channelColors:{},filterChannels:[],relativeNormalization:!1},vertical:!1,waveColor:"#999",xhr:{}}),v(m(t),"backends",{MediaElement:o.default,WebAudio:s.default,MediaElementWebAudio:u.default}),v(m(t),"util",i),t.params=Object.assign({},t.defaultParams,e),t.params.splitChannelsOptions=Object.assign({},t.defaultParams.splitChannelsOptions,e.splitChannelsOptions),t.container="string"==typeof e.container?document.querySelector(t.params.container):t.params.container,!t.container)throw new Error("Container element not found");if(null==t.params.mediaContainer?t.mediaContainer=t.container:"string"==typeof t.params.mediaContainer?t.mediaContainer=document.querySelector(t.params.mediaContainer):t.mediaContainer=t.params.mediaContainer,!t.mediaContainer)throw new Error("Media Container element not found");if(t.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(t.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(!0===t.params.rtl&&(!0===t.params.vertical?i.style(t.container,{transform:"rotateX(180deg)"}):i.style(t.container,{transform:"rotateY(180deg)"})),t.params.backgroundColor&&t.setBackgroundColor(t.params.backgroundColor),t.savedVolume=0,t.isMuted=!1,t.tmpEvents=[],t.currentRequest=null,t.arraybuffer=null,t.drawer=null,t.backend=null,t.peakCache=null,"function"!=typeof t.params.renderer)throw new Error("Renderer parameter is invalid");t.Drawer=t.params.renderer,"AudioElement"==t.params.backend&&(t.params.backend="MediaElement"),"WebAudio"!=t.params.backend&&"MediaElementWebAudio"!==t.params.backend||s.default.prototype.supportsWebAudio.call(null)||(t.params.backend="MediaElement"),t.Backend=t.backends[t.params.backend],t.initialisedPluginList={},t.isDestroyed=!1,t.isReady=!1;var r=0;return t._onResize=i.debounce((function(){r==t.drawer.wrapper.clientWidth||t.params.scrollParent||(r=t.drawer.wrapper.clientWidth)&&t.drawer.fireEvent("redraw")}),"number"==typeof t.params.responsive?t.params.responsive:100),p(t,m(t))}return t=h,r=[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(e){var t=this;return e.forEach((function(e){return t.addPlugin(e)})),e.forEach((function(e){e.deferInit||t.initPlugin(e.name)})),this.fireEvent("plugins-registered",e),this}},{key:"getActivePlugins",value:function(){return this.initialisedPluginList}},{key:"addPlugin",value:function(e){var t=this;if(!e.name)throw new Error("Plugin does not have a name!");if(!e.instance)throw new Error("Plugin ".concat(e.name," does not have an instance property!"));e.staticProps&&Object.keys(e.staticProps).forEach((function(r){t[r]=e.staticProps[r]}));var r=e.instance;return Object.getOwnPropertyNames(i.Observer.prototype).forEach((function(e){r.prototype[e]=i.Observer.prototype[e]})),this[e.name]=new r(e.params||{},this),this.fireEvent("plugin-added",e.name),this}},{key:"initPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet!"));return this.initialisedPluginList[e]&&this.destroyPlugin(e),this[e].init(),this.initialisedPluginList[e]=!0,this.fireEvent("plugin-initialised",e),this}},{key:"destroyPlugin",value:function(e){if(!this[e])throw new Error("Plugin ".concat(e," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[e])throw new Error("Plugin ".concat(e," is not active and cannot be destroyed!"));if("function"!=typeof this[e].destroy)throw new Error("Plugin ".concat(e," does not have a destroy function!"));return this[e].destroy(),delete this.initialisedPluginList[e],this.fireEvent("plugin-destroyed",e),this}},{key:"destroyAllPlugins",value:function(){var e=this;Object.keys(this.initialisedPluginList).forEach((function(t){return e.destroyPlugin(t)}))}},{key:"createDrawer",value:function(){var e=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())})),this.drawer.on("click",(function(t,r){setTimeout((function(){return e.seekTo(r)}),0)})),this.drawer.on("scroll",(function(t){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",t)}))}},{key:"createBackend",value:function(){var e=this;this.backend&&this.backend.destroy(),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("finish")})),this.backend.on("play",(function(){return e.fireEvent("play")})),this.backend.on("pause",(function(){return e.fireEvent("pause")})),this.backend.on("audioprocess",(function(t){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",t)})),"MediaElement"!==this.params.backend&&"MediaElementWebAudio"!==this.params.backend||(this.backend.on("seek",(function(){e.drawer.progress(e.backend.getPlayedPercents())})),this.backend.on("volume",(function(){var t=e.getVolume();e.fireEvent("volume",t),e.backend.isMuted!==e.isMuted&&(e.isMuted=e.backend.isMuted,e.fireEvent("mute",e.isMuted))})))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new l.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(e){e>=this.getDuration()?this.seekTo(1):this.seekTo(e/this.getDuration())}},{key:"play",value:function(e,t){var r=this;return this.params.ignoreSilenceMode&&i.ignoreSilenceMode(),this.fireEvent("interaction",(function(){return r.play(e,t)})),this.backend.play(e,t)}},{key:"setPlayEnd",value:function(e){this.backend.setPlayEnd(e)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(e){this.skip(-e||-this.params.skipLength)}},{key:"skipForward",value:function(e){this.skip(e||this.params.skipLength)}},{key:"skip",value:function(e){var t=this.getDuration()||1,r=this.getCurrentTime()||0;r=Math.max(0,Math.min(t,r+(e||0))),this.seekAndCenter(r/t)}},{key:"seekAndCenter",value:function(e){this.seekTo(e),this.drawer.recenter(e)}},{key:"seekTo",value:function(e){var t=this;if("number"!=typeof e||!isFinite(e)||e<0||e>1)throw new Error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return t.seekTo(e)}));var r="WebAudio"===this.params.backend,n=this.backend.isPaused();r&&!n&&this.backend.pause();var i=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(e),r&&!n&&this.backend.play(),this.params.scrollParent=i,this.fireEvent("seek",e)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(e){return this.backend.setSinkId(e)}},{key:"setVolume",value:function(e){this.backend.setVolume(e),this.fireEvent("volume",e)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(e){this.backend.setPlaybackRate(e)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(e){e!==this.isMuted?(this.backend.setMute?(this.backend.setMute(e),this.isMuted=e):e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume)),this.fireEvent("mute",this.isMuted)):this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].waveColor:this.params.waveColor}},{key:"setWaveColor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].waveColor=e:this.params.waveColor=e,this.drawBuffer()}},{key:"getProgressColor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.params.splitChannelsOptions.channelColors[e]?this.params.splitChannelsOptions.channelColors[e].progressColor:this.params.progressColor}},{key:"setProgressColor",value:function(e,t){this.params.splitChannelsOptions.channelColors[t]?this.params.splitChannelsOptions.channelColors[t].progressColor=e:this.params.progressColor=e,this.drawBuffer()}},{key:"getBackgroundColor",value:function(){return this.params.backgroundColor}},{key:"setBackgroundColor",value:function(e){this.params.backgroundColor=e,i.style(this.container,{background:this.params.backgroundColor})}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(e){this.params.cursorColor=e,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(e){this.params.height=e,this.drawer.setHeight(e*this.params.pixelRatio),this.drawBuffer()}},{key:"setFilteredChannels",value:function(e){this.params.splitChannelsOptions.filterChannels=e,this.drawBuffer()}},{key:"drawBuffer",value:function(){var e,t=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),r=this.drawer.getWidth(),n=t,i=0,a=Math.max(i+r,n);if(this.params.fillParent&&(!this.params.scrollParent||t<r)&&(i=0,a=n=r),this.params.partialRender){var s,o=this.peakCache.addRangeToPeakCache(n,i,a);for(s=0;s<o.length;s++)e=this.backend.getPeaks(n,o[s][0],o[s][1]),this.drawer.drawPeaks(e,n,o[s][0],o[s][1])}else e=this.backend.getPeaks(n,i,a),this.drawer.drawPeaks(e,n,i,a);this.fireEvent("redraw",e,n)}},{key:"zoom",value:function(e){e?(this.params.minPxPerSec=e,this.params.scrollParent=!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,this.params.scrollParent=!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)}},{key:"loadArrayBuffer",value:function(e){var t=this;this.decodeArrayBuffer(e,(function(e){t.isDestroyed||t.loadDecodedBuffer(e)}))}},{key:"loadDecodedBuffer",value:function(e){this.backend.load(e),this.drawBuffer(),this.isReady=!0,this.fireEvent("ready")}},{key:"loadBlob",value:function(e){var t=this,r=new FileReader;r.addEventListener("progress",(function(e){return t.onProgress(e)})),r.addEventListener("load",(function(e){return t.loadArrayBuffer(e.target.result)})),r.addEventListener("error",(function(){return t.fireEvent("error","Error reading file")})),r.readAsArrayBuffer(e),this.empty()}},{key:"load",value:function(e,t,r,n){if(!e)throw new Error("url parameter cannot be empty");if(this.empty(),r){var i={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(r),"Peaks are not provided":!t,"Backend is not of type 'MediaElement' or 'MediaElementWebAudio'":-1===["MediaElement","MediaElementWebAudio"].indexOf(this.params.backend),"Url is not of type string":"string"!=typeof e},a=Object.keys(i).filter((function(e){return i[e]}));a.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+a.join("\n\t- ")),r=null)}switch("WebAudio"===this.params.backend&&e instanceof HTMLMediaElement&&(e=e.src),this.params.backend){case"WebAudio":return this.loadBuffer(e,t,n);case"MediaElement":case"MediaElementWebAudio":return this.loadMediaElement(e,t,r,n)}}},{key:"loadBuffer",value:function(e,t,r){var n=this,i=function(t){return t&&n.tmpEvents.push(n.once("ready",t)),n.getArrayBuffer(e,(function(e){return n.loadArrayBuffer(e)}))};if(!t)return i();this.backend.setPeaks(t,r),this.drawBuffer(),this.fireEvent("waveform-ready"),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(e,t,r,n){var i=this,a=e;if("string"==typeof e)this.backend.load(a,this.mediaContainer,t,r);else{var s=e;this.backend.loadElt(s,t),a=s.src}this.tmpEvents.push(this.backend.once("canplay",(function(){i.backend.destroyed||(i.drawBuffer(),i.isReady=!0,i.fireEvent("ready"))})),this.backend.once("error",(function(e){return i.fireEvent("error",e)}))),t&&(this.backend.setPeaks(t,n),this.drawBuffer(),this.fireEvent("waveform-ready")),t&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(a,(function(e){i.decodeArrayBuffer(e,(function(e){i.backend.buffer=e,i.backend.setPeaks(null),i.drawBuffer(),i.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(e,t){var r=this;this.isDestroyed||(this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(n){r.isDestroyed||r.arraybuffer!=e||(t(n),r.arraybuffer=null)}),(function(){return r.fireEvent("error","Error decoding audiobuffer")})))}},{key:"getArrayBuffer",value:function(e,t){var r=this,n=Object.assign({url:e,responseType:"arraybuffer"},this.params.xhr),a=i.fetchFile(n);return this.currentRequest=a,this.tmpEvents.push(a.on("progress",(function(e){r.onProgress(e)})),a.on("success",(function(e){t(e),r.currentRequest=null})),a.on("error",(function(e){r.fireEvent("error",e),r.currentRequest=null}))),a}},{key:"onProgress",value:function(e){var t;t=e.lengthComputable?e.loaded/e.total:e.loaded/(e.loaded+1e6),this.fireEvent("loading",Math.round(100*t),e.target)}},{key:"exportPCM",value:function(e,t,r,n,i){e=e||1024,n=n||0,t=t||1e4,r=r||!1;var a=this.backend.getPeaks(e,n,i),s=[].map.call(a,(function(e){return Math.round(e*t)/t}));return new Promise((function(e,t){if(!r){var n=new Blob([JSON.stringify(s)],{type:"application/json;charset=utf-8"}),i=URL.createObjectURL(n);window.open(i),URL.revokeObjectURL(i)}e(s)}))}},{key:"exportImage",value:function(e,t,r){return e||(e="image/png"),t||(t=1),r||(r="dataURL"),this.drawer.getImage(e,t,r)}},{key:"cancelAjax",value:function(){this.currentRequest&&this.currentRequest.controller&&(this.currentRequest._reader&&this.currentRequest._reader.cancel().catch((function(e){})),this.currentRequest.controller.abort(),this.currentRequest=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(e){return e.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend&&(this.backend.destroy(),this.backend=null),this.drawer&&this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}],n=[{key:"create",value:function(e){return new h(e).init()}}],r&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(i.Observer);t.default=b,v(b,"VERSION","6.1.0"),v(b,"util",i),e.exports=t.default},"./src/webaudio.js":
/*!*************************!*\
  !*** ./src/webaudio.js ***!
  \*************************/(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=s?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}return i.default=e,r&&r.set(e,i),i}(r(/*! ./util */"./src/util/index.js"));function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var i=h(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return c(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f="playing",p="paused",m="finished",g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(a,e);var t,r,n,i=l(a);function a(e){var t,r,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),d(c(n=i.call(this)),"audioContext",null),d(c(n),"offlineAudioContext",null),d(c(n),"stateBehaviors",(d(t={},f,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),d(t,p,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}}),d(t,m,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),t)),n.params=e,n.ac=e.audioContext||(n.supportsWebAudio()?n.getAudioContext():{}),n.lastPlay=n.ac.currentTime,n.startPosition=0,n.scheduledPause=null,n.states=(d(r={},f,Object.create(n.stateBehaviors.playing)),d(r,p,Object.create(n.stateBehaviors.paused)),d(r,m,Object.create(n.stateBehaviors.finished)),r),n.buffer=null,n.filters=[],n.gainNode=null,n.mergedPeaks=null,n.offlineAc=null,n.peaks=null,n.playbackRate=1,n.analyser=null,n.scriptNode=null,n.source=null,n.splitPeaks=[],n.state=null,n.explicitDuration=e.duration,n.sinkStreamDestination=null,n.sinkAudioElement=null,n.destroyed=!1,n}return t=a,r=[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(e){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),window.WaveSurferOfflineAudioContext}},{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(p),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(e){e&&e.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.setFilters(t)}},{key:"setFilters",value:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce((function(e,t){return e.connect(t),t}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(a.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(a.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var e=this;this.scriptNode.onaudioprocess=function(){var t=e.getCurrentTime();t>=e.getDuration()?(e.setState(m),e.fireEvent("pause")):t>=e.scheduledPause?e.pause():e.state===e.states.playing&&e.fireEvent("audioprocess",t)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(e){return e?(this.sinkAudioElement||(this.sinkAudioElement=new window.Audio,this.sinkAudioElement.autoplay=!0),this.sinkAudioElement.setSinkId?(this.sinkStreamDestination||(this.sinkStreamDestination=this.ac.createMediaStreamDestination()),this.gainNode.disconnect(),this.gainNode.connect(this.sinkStreamDestination),this.sinkAudioElement.srcObject=this.sinkStreamDestination.stream,this.sinkAudioElement.setSinkId(e)):Promise.reject(new Error("setSinkId is not supported in your browser"))):Promise.reject(new Error("Invalid deviceId: "+e))}},{key:"setVolume",value:function(e){this.gainNode.gain.setValueAtTime(e,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(e,t,r){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),"webkitAudioContext"in window?this.offlineAc.decodeAudioData(e,(function(e){return t(e)}),r):this.offlineAc.decodeAudioData(e).then((function(e){return t(e)})).catch((function(e){return r(e)}))}},{key:"setPeaks",value:function(e,t){null!=t&&(this.explicitDuration=t),this.peaks=e}},{key:"setLength",value:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var t,r=this.buffer?this.buffer.numberOfChannels:1;for(t=0;t<r;t++)this.splitPeaks[t]=[],this.splitPeaks[t][2*(e-1)]=0,this.splitPeaks[t][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}}},{key:"getPeaks",value:function(e,t,r){if(this.peaks)return this.peaks;if(!this.buffer)return[];if(t=t||0,r=r||e-1,this.setLength(e),!this.buffer)return this.params.splitChannels?this.splitPeaks:this.mergedPeaks;if(!this.buffer.length){var n=this.createBuffer(1,4096,this.sampleRate);this.buffer=n.buffer}var i,a=this.buffer.length/e,s=~~(a/10)||1,o=this.buffer.numberOfChannels;for(i=0;i<o;i++){var l=this.splitPeaks[i],u=this.buffer.getChannelData(i),c=void 0;for(c=t;c<=r;c++){var h=~~(c*a),d=~~(h+a),f=u[h],p=f,m=void 0;for(m=h;m<d;m+=s){var g=u[m];g>p&&(p=g),g<f&&(f=g)}l[2*c]=p,l[2*c+1]=f,(0==i||p>this.mergedPeaks[2*c])&&(this.mergedPeaks[2*c]=p),(0==i||f<this.mergedPeaks[2*c+1])&&(this.mergedPeaks[2*c+1]=f)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroyWebAudio",value:function(){this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null),this.sinkStreamDestination&&(this.sinkAudioElement.pause(),this.sinkAudioElement.srcObject=null,this.sinkStreamDestination.disconnect(),this.sinkStreamDestination=null)}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.destroyed=!0,this.destroyWebAudio()}},{key:"load",value:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.setPlaybackRate(this.playbackRate),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"resumeAudioContext",value:function(){"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume()}},{key:"isPaused",value:function(){return this.state!==this.states.playing}},{key:"getDuration",value:function(){return this.explicitDuration?this.explicitDuration:this.buffer?this.buffer.duration:0}},{key:"seekTo",value:function(e,t){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==t&&(t=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states.finished&&this.setState(p),{start:e,end:t}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(e,t){if(this.buffer){this.createSource();var r=this.seekTo(e,t);e=r.start,t=r.end,this.scheduledPause=t,this.source.start(0,e),this.resumeAudioContext(),this.setState(f),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime();try{this.source&&this.source.stop(0)}catch(e){}this.setState(p),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){this.playbackRate=e||1,this.source&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime)}},{key:"setPlayEnd",value:function(e){this.scheduledPause=e}}],r&&s(t.prototype,r),n&&s(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(i.Observer);t.default=g,d(g,"scriptBufferSize",256),e.exports=t.default},"./node_modules/debounce/index.js":
/*!****************************************!*\
  !*** ./node_modules/debounce/index.js ***!
  \****************************************/e=>{function t(e,t,r){var n,i,a,s,o;function l(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,r||(o=e.apply(a,i),a=i=null))}null==t&&(t=100);var u=function(){a=this,i=arguments,s=Date.now();var u=r&&!n;return n||(n=setTimeout(l,t)),u&&(o=e.apply(a,i),a=i=null),o};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(o=e.apply(a,i),a=i=null,clearTimeout(n),n=null)},u}t.debounce=t,e.exports=t}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}("./src/wavesurfer.js");return r})()},e.exports=r()}));const h=l(c);var d=u((function(e,t){
/*!
 * wavesurfer.js markers plugin 6.1.0 (2022-03-31)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
var r;self,r=function(){return(()=>{var e={"./src/plugin/markers/index.js":
/*!*************************************!*\
  !*** ./src/plugin/markers/index.js ***!
  \*************************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.wavesurfer=r,this.util=r.util,this.style=this.util.style,this.markerLineWidth=1,this.markerWidth=11,this.markerHeight=22,this.dragging=!1,this._onResize=function(){n._updateMarkerPositions()},this._onBackendCreated=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n.params.markers&&n.params.markers.forEach((function(e){return n.add(e)})),window.addEventListener("resize",n._onResize,!0),window.addEventListener("orientationchange",n._onResize,!0),n.wavesurfer.on("zoom",n._onResize),n.markers.find((function(e){return e.draggable}))&&(n.onMouseMove=function(e){return n._onMouseMove(e)},window.addEventListener("mousemove",n.onMouseMove),n.onMouseUp=function(e){return n._onMouseUp(e)},window.addEventListener("mouseup",n.onMouseUp))},this.markers=[],this._onReady=function(){n.wrapper=n.wavesurfer.drawer.wrapper,n._updateMarkerPositions()}}var t,n,i;return t=e,i=[{key:"create",value:function(t){return{name:"markers",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{addMarker:function(e){return this.initialisedPluginList.markers||this.initPlugin("markers"),this.markers.add(e)},clearMarkers:function(){this.markers&&this.markers.clear()}},instance:e}}}],(n=[{key:"init",value:function(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.un("zoom",this._onResize),window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0),this.onMouseMove&&window.removeEventListener("mousemove",this.onMouseMove),this.onMouseUp&&window.removeEventListener("mouseup",this.onMouseUp),this.clear()}},{key:"add",value:function(e){var t={time:e.time,label:e.label,color:e.color||"#D8D8D8",position:e.position||"bottom",draggable:!!e.draggable};return t.el=this._createMarkerElement(t,e.markerElement),this.wrapper.appendChild(t.el),this.markers.push(t),this._updateMarkerPositions(),t}},{key:"remove",value:function(e){var t=this.markers[e];t&&(this.wrapper.removeChild(t.el),this.markers.splice(e,1))}},{key:"_createPointerSVG",value:function(e,t){var r="http://www.w3.org/2000/svg",n=document.createElementNS(r,"svg"),i=document.createElementNS(r,"polygon");return n.setAttribute("viewBox","0 0 40 80"),i.setAttribute("id","polygon"),i.setAttribute("stroke","#979797"),i.setAttribute("fill",e),i.setAttribute("points","20 0 40 30 40 80 0 80 0 30"),"top"==t&&i.setAttribute("transform","rotate(180, 20 40)"),n.appendChild(i),this.style(n,{width:this.markerWidth+"px",height:this.markerHeight+"px","min-width":this.markerWidth+"px","margin-right":"5px","z-index":4}),n}},{key:"_createMarkerElement",value:function(e,t){var r=this,n=e.label,i=document.createElement("marker");i.className="wavesurfer-marker",this.style(i,{position:"absolute",height:"100%",display:"flex",overflow:"hidden","flex-direction":"top"==e.position?"column-reverse":"column"});var a=document.createElement("div"),s=t?t.width:this.markerWidth;e.offset=(s-this.markerLineWidth)/2,this.style(a,{"flex-grow":1,"margin-left":e.offset+"px",background:"black",width:this.markerLineWidth+"px",opacity:.1}),i.appendChild(a);var o=document.createElement("div"),l=t||this._createPointerSVG(e.color,e.position);if(e.draggable&&(l.draggable=!1),o.appendChild(l),n){var u=document.createElement("span");u.innerText=n,this.style(u,{"font-family":"monospace","font-size":"90%"}),o.appendChild(u)}return this.style(o,{display:"flex","align-items":"center",cursor:"pointer"}),i.appendChild(o),o.addEventListener("click",(function(t){t.stopPropagation(),r.dragging||(r.wavesurfer.setCurrentTime(e.time),r.wavesurfer.fireEvent("marker-click",e,t))})),e.draggable&&o.addEventListener("mousedown",(function(t){r.selectedMarker=e})),i}},{key:"_updateMarkerPositions",value:function(){for(var e=0;e<this.markers.length;e++){var t=this.markers[e];this._updateMarkerPosition(t)}}},{key:"_updateMarkerPosition",value:function(e){var t=this.wavesurfer.getDuration(),r=this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio,n=r*Math.min(e.time/t,1)-e.offset;this.style(e.el,{left:n+"px","max-width":r-n+"px"})}},{key:"_onMouseMove",value:function(e){this.selectedMarker&&(this.dragging||(this.dragging=!0,this.wavesurfer.fireEvent("marker-drag",this.selectedMarker,e)),this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(e)*this.wavesurfer.getDuration(),this._updateMarkerPositions())}},{key:"_onMouseUp",value:function(e){var t=this;if(this.selectedMarker&&setTimeout((function(){t.selectedMarker=!1,t.dragging=!1}),0),this.dragging){e.stopPropagation();var r=this.wavesurfer.getDuration();this.selectedMarker.time=this.wavesurfer.drawer.handleEvent(e)*r,this._updateMarkerPositions(),this.wavesurfer.fireEvent("marker-drop",this.selectedMarker,e)}}},{key:"clear",value:function(){for(;this.markers.length>0;)this.remove(0)}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=n,e.exports=t.default}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}("./src/plugin/markers/index.js");return r})()},e.exports=r()}));const f=l(d);var p=u((function(e,t){
/*!
 * wavesurfer.js regions plugin 6.1.0 (2022-03-31)
 * https://wavesurfer-js.org
 * @license BSD-3-Clause
 */
var r;self,r=function(){return(()=>{var e={"./src/plugin/regions/index.js":
/*!*************************************!*\
  !*** ./src/plugin/regions/index.js ***!
  \*************************************/(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(/*! ./region.js */"./src/plugin/regions/region.js");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.wavesurfer=r,this.util=a(a({},r.util),{},{getRegionSnapToGridValue:function(e){return i.getRegionSnapToGridValue(e,t)}}),this.maxRegions=t.maxRegions,this.regionsMinLength=t.regionsMinLength||null,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((function(e){n.Region.prototype[e]=i.util.Observer.prototype[e]})),this.wavesurfer.Region=n.Region,this._onBackendCreated=function(){i.wrapper=i.wavesurfer.drawer.wrapper,i.orientation=i.wavesurfer.drawer.orientation,i.defaultEdgeScrollWidth=.05*i.wrapper.clientWidth,i.params.regions&&i.params.regions.forEach((function(e){i.add(e)}))},this.list={},this._onReady=function(){i.wrapper=i.wavesurfer.drawer.wrapper,i.vertical=i.wavesurfer.drawer.params.vertical,i.params.dragSelection&&i.enableDragSelection(i.params),Object.keys(i.list).forEach((function(e){i.list[e].updateRender()}))}}var t,r,i;return t=e,i=[{key:"create",value:function(t){return{name:"regions",deferInit:!(!t||!t.deferInit)&&t.deferInit,params:t,staticProps:{addRegion:function(e){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(e)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(e){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(e)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:e}}}],(r=[{key:"init",value:function(){this.wavesurfer.isReady?(this._onBackendCreated(),this._onReady()):(this.wavesurfer.once("ready",this._onReady),this.wavesurfer.once("backend-created",this._onBackendCreated))}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.wavesurfer.un("backend-created",this._onBackendCreated),this.wavesurfer.setDisabledEventEmissions(["region-removed"]),this.disableDragSelection(),this.clear()}},{key:"wouldExceedMaxRegions",value:function(){return this.maxRegions&&Object.keys(this.list).length>=this.maxRegions}},{key:"add",value:function(e){var t=this;if(this.wouldExceedMaxRegions())return null;!(e=a({edgeScrollWidth:this.params.edgeScrollWidth||this.defaultEdgeScrollWidth},e)).formatTimeCallback&&this.params.formatTimeCallback&&(e=a(a({},e),{},{formatTimeCallback:this.params.formatTimeCallback})),!e.minLength&&this.regionsMinLength&&(e=a(a({},e),{},{minLength:this.regionsMinLength}));var r=new this.wavesurfer.Region(e,this.util,this.wavesurfer);return this.list[r.id]=r,r.on("remove",(function(){delete t.list[r.id]})),r}},{key:"clear",value:function(){var e=this;Object.keys(this.list).forEach((function(t){e.list[t].remove()}))}},{key:"enableDragSelection",value:function(e){var t=this;this.disableDragSelection();var r,n,i,a,s,o,l,u=e.slop||2,c=this.wavesurfer.drawer.container,h=!1!==e.scroll&&this.wavesurfer.params.scrollParent,d=e.scrollSpeed||1,f=e.scrollThreshold||10,p=this.wavesurfer.getDuration(),m=0,g=function e(r){if(a&&o){var s=t.wrapper.scrollLeft+d*o;t.wrapper.scrollLeft=s=Math.min(n,Math.max(0,s));var l=t.wavesurfer.drawer.handleEvent(r);a.update({start:Math.min(l*p,i*p),end:Math.max(l*p,i*p)}),s<n&&s>0&&window.requestAnimationFrame((function(){e(r)}))}},v=function(u){if(!(u.touches&&u.touches.length>1)){if(p=t.wavesurfer.getDuration(),s=u.targetTouches?u.targetTouches[0].identifier:null,n=t.wrapper.scrollWidth-t.wrapper.clientWidth,l=t.util.withOrientation(t.wrapper.getBoundingClientRect(),t.vertical),t.wavesurfer.params.splitChannels){var c=(u.touches?u.touches[0].clientY:u.clientY)-l.top,h=null!=t.wavesurfer.backend.buffer?t.wavesurfer.backend.buffer.numberOfChannels:1,d=t.wrapper.clientHeight/h,f=Math.floor(c/d);e.channelIdx=f;var m=t.wavesurfer.params.splitChannelsOptions.channelColors[f];m&&m.dragColor&&(e.color=m.dragColor)}r=!0,i=t.wavesurfer.drawer.handleEvent(u,!0),a=null,o=null}};this.wrapper.addEventListener("mousedown",v),this.wrapper.addEventListener("touchstart",v),this.on("disable-drag-selection",(function(){t.wrapper.removeEventListener("touchstart",v),t.wrapper.removeEventListener("mousedown",v)}));var y=function(e){e.touches&&e.touches.length>1||(r=!1,m=0,o=null,a&&(t.util.preventClick(),a.fireEvent("update-end",e),t.wavesurfer.fireEvent("region-update-end",a,e)),a=null)};this.wrapper.addEventListener("mouseleave",y),this.wrapper.addEventListener("mouseup",y),this.wrapper.addEventListener("touchend",y),document.body.addEventListener("mouseup",y),document.body.addEventListener("touchend",y),this.on("disable-drag-selection",(function(){document.body.removeEventListener("mouseup",y),document.body.removeEventListener("touchend",y),t.wrapper.removeEventListener("touchend",y),t.wrapper.removeEventListener("mouseup",y),t.wrapper.removeEventListener("mouseleave",y)}));var b=function(n){if(r&&!(++m<=u)&&!(n.touches&&n.touches.length>1)&&(!n.targetTouches||n.targetTouches[0].identifier==s)&&(a||(a=t.add(e||{})))){var d=t.wavesurfer.drawer.handleEvent(n),v=t.wavesurfer.regions.util.getRegionSnapToGridValue(i*p),y=t.wavesurfer.regions.util.getRegionSnapToGridValue(d*p);a.update({start:Math.min(y,v),end:Math.max(y,v)});var b=t.util.withOrientation(n,t.vertical);if(h&&c.clientWidth<t.wrapper.scrollWidth){var w=b.clientX-l.left;(o=w<=f?-1:w>=l.right-f?1:null)&&g(n)}}};this.wrapper.addEventListener("mousemove",b),this.wrapper.addEventListener("touchmove",b),this.on("disable-drag-selection",(function(){t.wrapper.removeEventListener("touchmove",b),t.wrapper.removeEventListener("mousemove",b)})),this.wavesurfer.on("region-created",(function(e){t.regionsMinLength&&(e.minLength=t.regionsMinLength)}))}},{key:"disableDragSelection",value:function(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function(){var e=this,t=this.wavesurfer.getCurrentTime(),r=null;return Object.keys(this.list).forEach((function(n){var i=e.list[n];i.start<=t&&i.end>=t&&(!r||i.end-i.start<r.end-r.start)&&(r=i)})),r}},{key:"getRegionSnapToGridValue",value:function(e,t){if(t.snapToGridInterval){var r=t.snapToGridOffset||0;return Math.round((e-r)/t.snapToGridInterval)*t.snapToGridInterval+r}return e}}])&&o(t.prototype,r),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l,e.exports=t.default},"./src/plugin/regions/region.js":
/*!**************************************!*\
  !*** ./src/plugin/regions/region.js ***!
  \**************************************/(e,t)=>{function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Region=void 0;var n=function(){function e(t,r,n){var i,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wavesurfer=n,this.wrapper=n.drawer.wrapper,this.util=n.util,this.style=this.util.style,this.regionsUtil=r,this.vertical=n.drawer.params.vertical,this.id=null==t.id?n.util.getId():t.id,this.start=Number(t.start)||0,this.end=null==t.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(t.end),this.resize=void 0===t.resize||Boolean(t.resize),this.drag=void 0===t.drag||Boolean(t.drag),this.isResizing=!1,this.isDragging=!1,this.loop=Boolean(t.loop),this.color=t.color||"rgba(0, 0, 0, 0.1)",this.handleStyle=t.handleStyle||{left:{},right:{}},this.handleLeftEl=null,this.handleRightEl=null,this.data=t.data||{},this.attributes=t.attributes||{},this.showTooltip=null===(i=t.showTooltip)||void 0===i||i,this.maxLength=t.maxLength,this.minLength=t.minLength,this._onRedraw=function(){return a.updateRender()},this.scroll=!1!==t.scroll&&n.params.scrollParent,this.scrollSpeed=t.scrollSpeed||1,this.scrollThreshold=t.scrollThreshold||10,this.preventContextMenu=void 0!==t.preventContextMenu&&Boolean(t.preventContextMenu);var s=null==t.channelIdx?-1:parseInt(t.channelIdx);if(this.channelIdx=s,this.regionHeight="100%",this.marginTop="0px",-1!==s){var o=null!=this.wavesurfer.backend.buffer?this.wavesurfer.backend.buffer.numberOfChannels:-1;o>=0&&s<o&&(this.regionHeight=Math.floor(1/o*100)+"%",this.marginTop=this.wavesurfer.getHeight()*s+"px")}this.formatTimeCallback=t.formatTimeCallback,this.edgeScrollWidth=t.edgeScrollWidth,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}var t,n,i;return t=e,(n=[{key:"update",value:function(e,t){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.handleStyle&&(this.handleStyle=e.handleStyle),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize),this.updateHandlesResize(this.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this,t)}},{key:"remove",value:function(){this.element&&(this.wrapper.removeChild(this.element.domElement),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function(e){var t=e||this.start;this.wavesurfer.play(t,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function(e){this.loop=!0,this.play(e)}},{key:"setLoop",value:function(e){this.loop=e}},{key:"render",value:function(){for(var e in this.element=this.util.withOrientation(this.wrapper.appendChild(document.createElement("region")),this.vertical),this.element.className="wavesurfer-region",this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end)),this.element.setAttribute("data-id",this.id),this.attributes)this.element.setAttribute("data-region-"+e,this.attributes[e]);if(this.style(this.element,{position:"absolute",zIndex:3,height:this.regionHeight,top:this.marginTop}),this.resize){this.handleLeftEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleRightEl=this.util.withOrientation(this.element.appendChild(document.createElement("handle")),this.vertical),this.handleLeftEl.className="wavesurfer-handle wavesurfer-handle-start",this.handleRightEl.className="wavesurfer-handle wavesurfer-handle-end";var t={cursor:this.vertical?"row-resize":"col-resize",position:"absolute",top:"0px",width:"2px",height:"100%",backgroundColor:"rgba(0, 0, 0, 1)"},r="none"!==this.handleStyle.left?Object.assign({left:"0px"},t,this.handleStyle.left):null,n="none"!==this.handleStyle.right?Object.assign({right:"0px"},t,this.handleStyle.right):null;r&&this.style(this.handleLeftEl,r),n&&this.style(this.handleRightEl,n)}this.updateRender(),this.bindEvents()}},{key:"formatTime",value:function(e,t){return this.formatTimeCallback?this.formatTimeCallback(e,t):(e==t?[e]:[e,t]).map((function(e){return[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2)].join(":")})).join("-")}},{key:"getWidth",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function(){var e=this.wavesurfer.getDuration(),t=this.getWidth(),r=this.start,n=this.end;if(r<0&&(n-=r=0),n>e&&(r=e-((n=e)-r)),null!=this.minLength&&(n=Math.max(r+this.minLength,n)),null!=this.maxLength&&(n=Math.min(r+this.maxLength,n)),null!=this.element){var i=Math.round(r/e*t),a=Math.round(n/e*t)-i;for(var s in this.style(this.element,{left:i+"px",width:a+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+s,this.attributes[s]);this.showTooltip&&(this.element.title=this.formatTime(this.start,this.end))}}},{key:"bindInOut",value:function(){var e=this;this.firedIn=!1,this.firedOut=!1;var t=function(t){var r=Math.round(10*e.start)/10,n=Math.round(10*e.end)/10;t=Math.round(10*t)/10,!e.firedOut&&e.firedIn&&(r>t||n<=t)&&(e.firedOut=!0,e.firedIn=!1,e.fireEvent("out"),e.wavesurfer.fireEvent("region-out",e)),!e.firedIn&&r<=t&&n>t&&(e.firedIn=!0,e.firedOut=!1,e.fireEvent("in"),e.wavesurfer.fireEvent("region-in",e))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",(function(){e.wavesurfer.backend.un("audioprocess",t)})),this.on("out",(function(){if(e.loop){var t=e.wavesurfer.getCurrentTime();t>=e.start&&t<=e.end&&e.wavesurfer.play(e.start)}}))}},{key:"bindEvents",value:function(){var e=this,t=this.preventContextMenu;this.element.addEventListener("mouseenter",(function(t){e.fireEvent("mouseenter",t),e.wavesurfer.fireEvent("region-mouseenter",e,t)})),this.element.addEventListener("mouseleave",(function(t){e.fireEvent("mouseleave",t),e.wavesurfer.fireEvent("region-mouseleave",e,t)})),this.element.addEventListener("click",(function(t){t.preventDefault(),e.fireEvent("click",t),e.wavesurfer.fireEvent("region-click",e,t)})),this.element.addEventListener("dblclick",(function(t){t.stopPropagation(),t.preventDefault(),e.fireEvent("dblclick",t),e.wavesurfer.fireEvent("region-dblclick",e,t)})),this.element.addEventListener("contextmenu",(function(r){t&&r.preventDefault(),e.fireEvent("contextmenu",r),e.wavesurfer.fireEvent("region-contextmenu",e,r)})),(this.drag||this.resize)&&this.bindDragEvents()}},{key:"bindDragEvents",value:function(){var e,t,r,n,i,a,s,o,l,u=this,c=this.wavesurfer.drawer.container,h=this.scrollSpeed,d=!1,f=function t(c){var d=u.util.withOrientation(c,u.vertical),f=u.wavesurfer.getDuration();if(a&&(r||i)){var p=d.clientX,m=0,g=0,v=0,y=u.regionsUtil.getRegionSnapToGridValue(u.wavesurfer.drawer.handleEvent(c)*f);if(r)-1===a?(g=o*u.wavesurfer.params.minPxPerSec,m=p-s.left):(g=l*u.wavesurfer.params.minPxPerSec,m=s.right-p);else{var b=u.minLength;b||(b=0),"start"===i?(y>u.end-b&&(y=u.end-b,v=h*a),y<0&&(y=0)):"end"===i&&(y<u.start+b&&(y=u.start+b,v=h*a),y>f&&(y=f))}var w=u.wrapper.scrollLeft;if(-1===a){if(0===Math.round(w))return;if(Math.round(w-g+m)<=0)return}else{if(Math.round(w)===n)return;if(Math.round(w+g-m)>=n)return}var A=w-v+h*a;if(-1===a){var E=Math.max(0+g-m,A);u.wrapper.scrollLeft=A=E}else{var C=Math.min(n-g+m,A);u.wrapper.scrollLeft=A=C}var k=y-e;e=y,r?u.onDrag(k):u.onResize(k,i),window.requestAnimationFrame((function(){t(c)}))}},p=function(a){var c=u.wavesurfer.getDuration();a.touches&&a.touches.length>1||(t=a.targetTouches?a.targetTouches[0].identifier:null,(u.drag||u.resize)&&a.stopPropagation(),e=u.regionsUtil.getRegionSnapToGridValue(u.wavesurfer.drawer.handleEvent(a,!0)*c),o=e-u.start,l=u.end-e,n=u.wrapper.scrollWidth-u.wrapper.clientWidth,s=u.util.withOrientation(u.wrapper.getBoundingClientRect(),u.vertical),u.isResizing=!1,u.isDragging=!1,"handle"===a.target.tagName.toLowerCase()?(u.isResizing=!0,i=a.target.classList.contains("wavesurfer-handle-start")?"start":"end"):(u.isDragging=!0,r=!0,i=!1))},m=function(e){e.touches&&e.touches.length>1||((r||i)&&(u.isDragging=!1,u.isResizing=!1,r=!1,a=null,i=!1),d&&(d=!1,u.util.preventClick(),u.fireEvent("update-end",e),u.wavesurfer.fireEvent("region-update-end",u,e)))},g=function(n){var h=u.wavesurfer.getDuration(),p=u.util.withOrientation(n,u.vertical);if(!(n.touches&&n.touches.length>1)&&(!n.targetTouches||n.targetTouches[0].identifier==t)&&(r||i)){var m=u.regionsUtil.getRegionSnapToGridValue(u.wavesurfer.drawer.handleEvent(n)*h);if(r){var g=u.wavesurfer.getDuration();m>g-l&&(m=g-l),m-o<0&&(m=o)}if(i){var v=u.minLength;v||(v=0),"start"===i?(m>u.end-v&&(m=u.end-v),m<0&&(m=0)):"end"===i&&(m<u.start+v&&(m=u.start+v),m>h&&(m=h))}var y=m-e;if(e=m,u.drag&&r&&(d=d||!!y,u.onDrag(y)),u.resize&&i&&(d=d||!!y,u.onResize(y,i)),u.scroll&&c.clientWidth<u.wrapper.scrollWidth){var b=p.clientX;(a=b<s.left+u.edgeScrollWidth?-1:b>s.right-u.edgeScrollWidth?1:null)&&f(n)}}};this.element.addEventListener("mousedown",p),this.element.addEventListener("touchstart",p),document.body.addEventListener("mousemove",g),document.body.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("mouseup",m),document.body.addEventListener("touchend",m),this.on("remove",(function(){document.removeEventListener("mouseup",m),document.body.removeEventListener("touchend",m),document.body.removeEventListener("mousemove",g),document.body.removeEventListener("touchmove",g)})),this.wavesurfer.on("destroy",(function(){document.removeEventListener("mouseup",m),document.body.removeEventListener("touchend",m)}))}},{key:"onDrag",value:function(e){var t=this.wavesurfer.getDuration();this.end+e>t&&(e=t-this.end),this.start+e<0&&(e=-1*this.start);var r={direction:this._getDragDirection(e),action:"drag"};this.update({start:this.start+e,end:this.end+e},r)}},{key:"_getDragDirection",value:function(e){return e<0?"left":e>0?"right":null}},{key:"onResize",value:function(e,t){var r=this.wavesurfer.getDuration(),n={action:"resize",direction:"start"===t?"left":"right"};"start"===t?(e>0&&this.end-(this.start+e)<this.minLength&&(e=this.end-this.minLength-this.start),e<0&&this.end-(this.start+e)>this.maxLength&&(e=this.end-this.start-this.maxLength),e<0&&this.start+e<0&&(e=-1*this.start),this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)},n)):(e<0&&this.end+e-this.start<this.minLength&&(e=this.start+this.minLength-this.end),e>0&&this.end+e-this.start>this.maxLength&&(e=this.maxLength-(this.end-this.start)),e>0&&this.end+e>r&&(e=r-this.end),this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)},n))}},{key:"updateHandlesResize",value:function(e){var t;t=e?this.vertical?"row-resize":"col-resize":"auto",this.handleLeftEl&&this.style(this.handleLeftEl,{cursor:t}),this.handleRightEl&&this.style(this.handleRightEl,{cursor:t})}}])&&r(t.prototype,n),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Region=n}},t={},r=function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}("./src/plugin/regions/index.js");return r})()},e.exports=r()}));const m=l(p),g=(e,t,r="eng")=>{void 0===t&&(t=r);let n={speed:{eng:"Playback Speed",fra:"Vitesse de Lecture"},"re-align":{eng:"Re-align with audio",fra:"Raligner avec l'audio"},"audio-error":{eng:"Error: The audio file could not be loaded",fra:"Erreur: le fichier audio n'a pas pu tre charg"},"text-error":{eng:"Error: The text file could not be loaded",fra:"Erreur: le fichier texte n'a pas pu tre charg"},"alignment-error":{eng:"Error: The alignment file could not be loaded",fra:"Erreur: le fichier alignement n'a pas pu tre charg"},loading:{eng:"Loading...",fra:"Chargement en cours"},"zoom-waveform":{eng:"Zoom Waveform",fra:"agrandir la forme d'onde"}};return n[e]?n[e][t]:e},v=["#69D2E7","#A7DBD8","#E0E4CC","#F38630","#FA6900","#FE4365","#FC9D9A","#F9CDAD","#C8C8A9","#83AF9B","#ECD078","#D95B43","#C02942","#542437","#53777A","#556270","#4ECDC4","#C7F464","#FF6B6B","#C44D58","#774F38","#E08E79","#F1D4AF","#ECE5CE","#C5E0DC","#E8DDCB","#CDB380","#036564","#033649","#031634","#490A3D","#BD1550","#E97F02","#F8CA00","#8A9B0F","#594F4F","#547980","#45ADA8","#9DE0AD","#E5FCC2","#00A0B0","#6A4A3C","#CC333F","#EB6841","#EDC951","#E94E77","#D68189","#C6A49A","#C6E5D9","#F4EAD5","#D9CEB2","#948C75","#D5DED9","#7A6A53","#99B2B7","#FFFFFF","#CBE86B","#F2E9E1","#1C140D","#CBE86B","#EFFFCD","#DCE9BE","#555152","#2E2633","#99173C","#3FB8AF","#7FC7AF","#DAD8A7","#FF9E9D","#FF3D7F","#343838","#005F6B","#008C9E","#00B4CC","#00DFFC","#413E4A","#73626E","#B38184","#F0B49E","#F7E4BE","#99B898","#FECEA8","#FF847C","#E84A5F","#2A363B","#FF4E50","#FC913A","#F9D423","#EDE574","#E1F5C4","#554236","#F77825","#D3CE3D","#F1EFA5","#60B99A","#351330","#424254","#64908A","#E8CAA4","#CC2A41","#00A8C6","#40C0CB","#F9F2E7","#AEE239","#8FBE00","#FF4242","#F4FAD2","#D4EE5E","#E1EDB9","#F0F2EB","#655643","#80BCA3","#F6F7BD","#E6AC27","#BF4D28","#8C2318","#5E8C6A","#88A65E","#BFB35A","#F2C45A","#FAD089","#FF9C5B","#F5634A","#ED303C","#3B8183","#BCBDAC","#CFBE27","#F27435","#F02475","#3B2D38","#D1E751","#FFFFFF","#000000","#4DBCE9","#26ADE4","#FF9900","#424242","#E9E9E9","#BCBCBC","#3299BB","#5D4157","#838689","#A8CABA","#CAD7B2","#EBE3AA","#5E412F","#FCEBB6","#78C0A8","#F07818","#F0A830","#EEE6AB","#C5BC8E","#696758","#45484B","#36393B","#1B676B","#519548","#88C425","#BEF202","#EAFDE6","#F8B195","#F67280","#C06C84","#6C5B7B","#355C7D","#452632","#91204D","#E4844A","#E8BF56","#E2F7CE","#F04155","#FF823A","#F2F26F","#FFF7BD","#95CFB7","#F0D8A8","#3D1C00","#86B8B1","#F2D694","#FA2A00","#2A044A","#0B2E59","#0D6759","#7AB317","#A0C55F","#67917A","#170409","#B8AF03","#CCBF82","#E33258","#B9D7D9","#668284","#2A2829","#493736","#7B3B3B","#BBBB88","#CCC68D","#EEDD99","#EEC290","#EEAA88","#A3A948","#EDB92E","#F85931","#CE1836","#009989","#E8D5B7","#0E2430","#FC3A51","#F5B349","#E8D5B9","#B3CC57","#ECF081","#FFBE40","#EF746F","#AB3E5B","#AB526B","#BCA297","#C5CEAE","#F0E2A4","#F4EBC3","#607848","#789048","#C0D860","#F0F0D8","#604848","#3E4147","#FFFEDF","#DFBA69","#5A2E2E","#2A2C31","#300030","#480048","#601848","#C04848","#F07241","#1C2130","#028F76","#B3E099","#FFEAAD","#D14334","#A8E6CE","#DCEDC2","#FFD3B5","#FFAAA6","#FF8C94","#EDEBE6","#D6E1C7","#94C7B6","#403B33","#D3643B","#FDF1CC","#C6D6B8","#987F69","#E3AD40","#FCD036","#AAB3AB","#C4CBB7","#EBEFC9","#EEE0B7","#E8CAAF","#CC0C39","#E6781E","#C8CF02","#F8FCC1","#1693A7","#3A111C","#574951","#83988E","#BCDEA5","#E6F9BC","#FC354C","#29221F","#13747D","#0ABFBC","#FCF7C5","#B9D3B0","#81BDA4","#B28774","#F88F79","#F6AA93","#5E3929","#CD8C52","#B7D1A3","#DEE8BE","#FCF7D3","#230F2B","#F21D41","#EBEBBC","#BCE3C5","#82B3AE","#5C323E","#A82743","#E15E32","#C0D23E","#E5F04C","#4E395D","#827085","#8EBE94","#CCFC8E","#DC5B3E","#DAD6CA","#1BB0CE","#4F8699","#6A5E72","#563444","#C2412D","#D1AA34","#A7A844","#A46583","#5A1E4A","#D1313D","#E5625C","#F9BF76","#8EB2C5","#615375","#9D7E79","#CCAC95","#9A947C","#748B83","#5B756C","#1C0113","#6B0103","#A30006","#C21A01","#F03C02","#8DCCAD","#988864","#FEA6A2","#F9D6AC","#FFE9AF","#CFFFDD","#B4DEC1","#5C5863","#A85163","#FF1F4C","#75616B","#BFCFF7","#DCE4F7","#F8F3BF","#D34017","#382F32","#FFEAF2","#FCD9E5","#FBC5D8","#F1396D","#B6D8C0","#C8D9BF","#DADABD","#ECDBBC","#FEDCBA","#E3DFBA","#C8D6BF","#93CCC6","#6CBDB5","#1A1F1E","#A7C5BD","#E5DDCB","#EB7B59","#CF4647","#524656","#9DC9AC","#FFFEC7","#F56218","#FF9D2E","#919167","#413D3D","#040004","#C8FF00","#FA023C","#4B000F","#EDF6EE","#D1C089","#B3204D","#412E28","#151101","#A8A7A7","#CC527A","#E8175D","#474747","#363636","#7E5686","#A5AAD9","#E8F9A2","#F8A13F","#BA3C3D","#FFEDBF","#F7803C","#F54828","#2E0D23","#F8E4C1","#C1B398","#605951","#FBEEC2","#61A6AB","#ACCEC0","#5E9FA3","#DCD1B4","#FAB87F","#F87E7B","#B05574","#951F2B","#F5F4D7","#E0DFB1","#A5A36C","#535233","#FFFBB7","#A6F6AF","#66B6AB","#5B7C8D","#4F2958","#000000","#9F111B","#B11623","#292C37","#CCCCCC","#9CDDC8","#BFD8AD","#DDD9AB","#F7AF63","#633D2E","#EFF3CD","#B2D5BA","#61ADA0","#248F8D","#605063","#84B295","#ECCF8D","#BB8138","#AC2005","#2C1507","#FCFEF5","#E9FFE1","#CDCFB7","#D6E6C3","#FAFBE3","#0CA5B0","#4E3F30","#FEFEEB","#F8F4E4","#A5B3AA","#4D3B3B","#DE6262","#FFB88C","#FFD0B3","#F5E0D3","#B5AC01","#ECBA09","#E86E1C","#D41E45","#1B1521","#379F7A","#78AE62","#BBB749","#E0FBAC","#1F1C0D","#FFE181","#EEE9E5","#FAD3B2","#FFBA7F","#FF9C97","#4E4D4A","#353432","#94BA65","#2790B0","#2B4E72","#A70267","#F10C49","#FB6B41","#F6D86B","#339194","#30261C","#403831","#36544F","#1F5F61","#0B8185","#2D2D29","#215A6D","#3CA2A2","#92C7A3","#DFECE6","#F38A8A","#55443D","#A0CAB5","#CDE9CA","#F1EDD0","#793A57","#4D3339","#8C873E","#D1C5A5","#A38A5F","#11766D","#410936","#A40B54","#E46F0A","#F0B300","#AAFF00","#FFAA00","#FF00AA","#AA00FF","#00AAFF","#C75233","#C78933","#D6CEAA","#79B5AC","#5E2F46","#F8EDD1","#D88A8A","#474843","#9D9D93","#C5CFC6","#6DA67A","#77B885","#86C28B","#859987","#4A4857","#1B325F","#9CC4E4","#E9F2F9","#3A89C9","#F26C4F","#BED6C7","#ADC0B4","#8A7E66","#A79B83","#BBB2A1","#046D8B","#309292","#2FB8AC","#93A42A","#ECBE13","#82837E","#94B053","#BDEB07","#BFFA37","#E0E0E0","#312736","#D4838F","#D6ABB1","#D9D9D9","#C4FFEB","#E5EAA4","#A8C4A2","#69A5A4","#616382","#66245B","#6DA67A","#99A66D","#A9BD68","#B5CC6A","#C0DE5D","#395A4F","#432330","#853C43","#F25C5E","#FFA566","#331327","#991766","#D90F5A","#F34739","#FF6E27","#FDFFD9","#FFF0B8","#FFD6A3","#FAAD8E","#142F30","#E21B5A","#9E0C39","#333333","#FBFFE3","#83A300","#FBC599","#CDBB93","#9EAE8A","#335650","#F35F55","#C7FCD7","#D9D5A7","#D9AB91","#E6867A","#ED4A6A","#EC4401","#CC9B25","#13CD4A","#7B6ED6","#5E525C","#BF496A","#B39C82","#B8C99D","#F0D399","#595151","#FFEFD3","#FFFEE4","#D0ECEA","#9FD6D2","#8B7A5E","#F1396D","#FD6081","#F3FFEB","#ACC95F","#8F9924","#F6F6F6","#E8E8E8","#333333","#990100","#B90504","#261C21","#6E1E62","#B0254F","#DE4126","#EB9605","#E9E0D1","#91A398","#33605A","#070001","#68462B","#F2E3C6","#FFC6A5","#E6324B","#2B2B2B","#353634","#FFAB07","#E9D558","#72AD75","#0E8D94","#434D53","#59B390","#F0DDAA","#E47C5D","#E32D40","#152B3C","#FDE6BD","#A1C5AB","#F4DD51","#D11E48","#632F53","#E4E4C5","#B9D48B","#8D2036","#CE0A31","#D3E4C5","#512B52","#635274","#7BB0A8","#A7DBAB","#E4F5B1","#805841","#DCF7F3","#FFFCDD","#FFD8D8","#F5A2A2","#CAFF42","#EBF7F8","#D0E0EB","#88ABC2","#49708A","#595643","#4E6B66","#ED834E","#EBCC6E","#EBE1C5","#E4DED0","#ABCCBD","#7DBEB8","#181619","#E32F21","#058789","#503D2E","#D54B1A","#E3A72F","#F0ECC9","#FF003C","#FF8A00","#FABE28","#88C100","#00C176","#311D39","#67434F","#9B8E7E","#C3CCAF","#A51A41","#EFD9B4","#D6A692","#A39081","#4D6160","#292522","#C6CCA5","#8AB8A8","#6B9997","#54787D","#615145","#CC5D4C","#FFFEC6","#C7D1AF","#96B49C","#5B5847","#111625","#341931","#571B3C","#7A1E48","#9D2053","#EFEECC","#FE8B05","#FE0557","#400403","#0AABBA","#CCF390","#E0E05A","#F7C41F","#FC930A","#FF003D","#73C8A9","#DEE1B6","#E1B866","#BD5532","#373B44","#79254A","#795C64","#79927D","#AEB18E","#E3CF9E","#E0EFF1","#7DB4B5","#FFFFFF","#680148","#000000","#F06D61","#DA825F","#C4975C","#A8AB7B","#8CBF99","#2D1B33","#F36A71","#EE887A","#E4E391","#9ABC8A","#2B2726","#0A516D","#018790","#7DAD93","#BACCA4","#95A131","#C8CD3B","#F6F1DE","#F5B9AE","#EE0B5B","#360745","#D61C59","#E7D84B","#EFEAC5","#1B8798","#E3E8CD","#BCD8BF","#D3B9A3","#EE9C92","#FE857E","#807462","#A69785","#B8FAFF","#E8FDFF","#665C49","#4B1139","#3B4058","#2A6E78","#7A907C","#C9B180","#FC284F","#FF824A","#FEA887","#F6E7F7","#D1D0D7","#FFB884","#F5DF98","#FFF8D4","#C0D1C2","#2E4347","#027B7F","#FFA588","#D62957","#BF1E62","#572E4F","#80A8A8","#909D9E","#A88C8C","#FF0D51","#7A8C89","#A69E80","#E0BA9B","#E7A97E","#D28574","#3B1922","#A1DBB2","#FEE5AD","#FACA66","#F7A541","#F45D4C","#641F5E","#676077","#65AC92","#C2C092","#EDD48E","#FFF3DB","#E7E4D5","#D3C8B4","#C84648","#703E3B","#F5DD9D","#BCC499","#92A68A","#7B8F8A","#506266","#2B222C","#5E4352","#965D62","#C7956D","#F2D974","#D4F7DC","#DBE7B4","#DBC092","#E0846D","#F51441","#A32C28","#1C090B","#384030","#7B8055","#BCA875","#85847E","#AB6A6E","#F7345B","#353130","#CBCFB4","#E6B39A","#E6CBA5","#EDE3B4","#8B9E9B","#6D7578","#11644D","#A0B046","#F2C94E","#F78145","#F24E4E","#6D9788","#1E2528","#7E1C13","#BF0A0D","#E6E1C2","#23192D","#FD0A54","#F57576","#FEBF97","#F5ECB7","#EB9C4D","#F2D680","#F3FFCF","#BAC9A9","#697060","#D3D5B0","#B5CEA4","#9DC19D","#8C7C62","#71443F","#452E3C","#FF3D5A","#FFB969","#EAF27E","#3B8C88","#041122","#259073","#7FDA89","#C8E98E","#E6F99D","#B1E6D1","#77B1A9","#3D7B80","#270A33","#451A3E","#9D9E94","#C99E93","#F59D92","#E5B8AD","#D5D2C8","#FDCFBF","#FEB89F","#E23D75","#5F0D3B","#742365","#540045","#C60052","#FF714B","#EAFF87","#ACFFE9","#B7CBBF","#8C886F","#F9A799","#F4BFAD","#F5DABD","#280904","#680E34","#9A151A","#C21B12","#FC4B2A","#F0FFC9","#A9DA88","#62997A","#72243D","#3B0819","#429398","#6B5D4D","#B0A18F","#DFCDB4","#FBEED3","#E6EBA9","#ABBB9F","#6F8B94","#706482","#703D6F","#A3C68C","#879676","#6E6662","#4F364A","#340735","#44749D","#C6D4E1","#FFFFFF","#EBE7E0","#BDB8AD","#322938","#89A194","#CFC89A","#CC883A","#A14016","#CFB590","#9E9A41","#758918","#564334","#49281F","#FA6A64","#7A4E48","#4A4031","#F6E2BB","#9EC6B8","#1D1313","#24B694","#D22042","#A3B808","#30C4C9","#F6D76B","#FF9036","#D6254D","#FF5475","#FDEBA9","#E7EDEA","#FFC52C","#FB0C06","#030D4F","#CEECEF","#373737","#8DB986","#ACCE91","#BADB73","#EFEAE4","#161616","#C94D65","#E7C049","#92B35A","#1F6764","#26251C","#EB0A44","#F2643D","#F2A73D","#A0E8B7","#4B3E4D","#1E8C93","#DBD8A2","#C4AC30","#D74F33","#8D7966","#A8A39D","#D8C8B8","#E2DDD9","#F8F1E9","#F2E8C4","#98D9B6","#3EC9A7","#2B879E","#616668"],y="11px",b="context-menu--active",w="#3c4369",A="#FFFFFF",E="context-menu--one",C="context-menu--two",k="hidden",F=class{constructor(e){(0,n.r)(this,e),this.theme="light",this.language="eng",this.useAssetsFolder=!0,this.pageScrolling="horizontal",this.mode="READ-ONLY",this.playing=!1,this.playback_rate=1,this.fullscreen=!1,this.autoScroll=!0,this.isLoaded=!1,this.showGuide=!1,this.anchorAlertMessage={show:!1,message:""},this.hasTextTranslations=!1,this.assetsStatus={AUDIO:0,XML:0,SMIL:0},this.toggleMenuOff=()=>{this.contextMenuElement=null;let e=this.el.shadowRoot.querySelector("#context-menu");e.classList.remove(b),e.classList.remove(E),e.classList.remove(C)},this.toggleMenuOn=(e,{x:t,y:r})=>{let n=e.id,i=this.el.shadowRoot,a=i.querySelector("#context-menu"),s=i.querySelector('[data-action="add-anchor"]'),o=i.querySelector('[data-action="add-anchor-after"]'),l=i.querySelector('[data-action="del-anchor"]');if("svg"===e.tagName||"polygon"===e.tagName)n=e.id.substring(0,e.id.length-e.tagName.length-1),s.classList.contains(k)||s.classList.add(k),o.classList.contains(k)||o.classList.add(k),l.classList.remove(k);else{let e=this.workingXmlDoc.getElementById(n),t=this.getPreviousWordOrAnchor(e),r=this.getPreviousWordOrAnchor(t),i=!(t&&"anchor"===t.tagName&&r&&"anchor"===r.tagName),u=!1;if(this.isLastWordOfParagraph(n)){let t=this.getNextWordOrAnchor(e),r=this.getNextWordOrAnchor(t);u=!(t&&"anchor"===t.tagName&&r&&"anchor"===r.tagName)}if(!u&&!i)return;i?s.classList.remove(k):s.classList.contains(k)||s.classList.add(k),u?o.classList.remove(k):o.classList.contains(k)||o.classList.add(k),i&&u?a.classList.add(C):a.classList.add(E),l.classList.contains(k)||l.classList.add(k),this.workingAnchorTime=this.processed_alignment[n]}a.classList.add(b),a.setAttribute("data-id",n),this.positionMenu(t,r,"#context-menu")},this.getAnchorId=e=>{let t=0,r=`${e}anchor${t}`;for(;this.allAnchors[r];)r=`${e}anchor${++t}`;return r},this.insertAnchorAfter=e=>{this.insertAnchor(e,!1)},this.insertAnchorBefore=e=>{this.insertAnchor(e,!0)},this.insertAnchor=(e,t)=>{e.preventDefault();let r=this.el.shadowRoot.querySelector("#context-menu").getAttribute("data-id"),n=this.xmlDoc,i=n.getElementById(r),a=this.getAnchorId(i.parentElement.id),o=this.palette.pop(),l=(t?this.workingAnchorTime[0]:this.workingAnchorTime[0]+this.workingAnchorTime[1])/1e3;this.wavesurfer.markers.add({time:l,label:"",color:o,draggable:!0}).id=a;let u=n.createElement("anchor");u.setAttribute("id",a),u.setAttribute("time",`${l.toFixed(2)}s`),this.allAnchors[a]={id:a,color:o,element:u,time:l};let c=this.workingXmlDoc.createElement("anchor");c.setAttribute("id",a),c.setAttribute("time",`${l.toFixed(2)}s`);let h=this.workingXmlDoc.getElementById(r);t?(i.parentElement.insertBefore(u,i),h.parentElement.insertBefore(c,h)):i.nextSibling?(i.parentElement.insertBefore(u,i.nextSibling),h.parentElement.insertBefore(c,h.nextSibling)):(i.parentElement.appendChild(u),h.parentElement.appendChild(c)),this.parsed_text=s(this.workingXmlDoc),this.updateAnchorBackend(),this.toggleMenuOff()},this.deleteAnchor=e=>{e.preventDefault();let t=this.el.shadowRoot.querySelector("#context-menu").getAttribute("data-id"),r=this.xmlDoc.getElementById(t);r.parentElement.removeChild(r);let n=this.workingXmlDoc;r=n.getElementById(t),r.parentElement.removeChild(r),this.parsed_text=s(n);let i=this.wavesurfer.markers.markers.findIndex((e=>e.id===t));this.wavesurfer.markers.remove(i),delete this.allAnchors[t],this.updateAnchorBackend(),this.toggleMenuOff()},this.updateAnchorBackend=()=>{let e=window.updateAnchor;if("function"!=typeof e)return void console.log("Invalid updateAnchor");let t=(new XMLSerializer).serializeToString(this.xmlDoc);t=t.replace(/<w id="[a-z|0-9]*">/g,""),t=t.replace(/<\/w>/g,""),e.call(this,t)},this.closeAnchorAlert=e=>{e.preventDefault(),this.anchorAlertMessage={show:!1,message:""}},this.exportPreview=()=>{let e=window.exportPreview;"function"==typeof e?e.call():console.log("Invalid exportPreview")},this.zoomWaveform=e=>{let t=e.currentTarget,r=parseInt(t.value);this.wavesurfer.zoom(r)},this.positionMenu=(e,t,r)=>{let n=this.el.shadowRoot.querySelector(r),i=n.offsetWidth+4,a=n.offsetHeight+4,s=window.innerWidth,o=window.innerHeight;n.style.left=s-e<i?s-i+"px":e+"px",n.style.top=o-t<a?o-a+"px":t+"px"},this.clickedInside=(e,t)=>{let r=e.srcElement||e.target;if(r.classList.contains(t))return!0;for(;r=r.parentElement;)if(r.classList&&r.classList.contains(t))return!0;return!1},this.getPosition=e=>{var t=0,r=0;return e?(e.pageX||e.pageY?(t=e.pageX,r=e.pageY):(e.clientX||e.clientY)&&(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,r=e.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:t,y:r}):{x:0,y:0}},this.lookupElement=e=>{let t=this.el.shadowRoot.querySelector("[data-cy=text-container]");if(this.isPointerEventInsideElement(e,t)){let r=t.querySelectorAll("svg");for(let t=0;t<r.length;t++)if(this.isPointerEventInsideElement(e,r[t]))return r[t];let n=t.querySelectorAll(".page");for(let t=0;t<n.length;t++)if(this.isPointerEventInsideElement(e,n[t])){let r=n[t].querySelectorAll(".page__col__text");for(let t=0;t<r.length;t++)if(this.isPointerEventInsideElement(e,r[t])){let n=r[t].querySelectorAll(".sentence");for(let t=0;t<n.length;t++)if(this.isPointerEventInsideElement(e,n[t])){let r=n[t].querySelectorAll(".sentence__word");for(let t=0;t<r.length;t++){let n=r[t];if(this.isPointerEventInsideElement(e,n))return n}}}}}},this.isPointerEventInsideElement=(e,t)=>{var r=(e.targetTouches?e.targetTouches[0].pageX:e.pageX)-scrollX,n=(e.targetTouches?e.targetTouches[0].pageY:e.pageY)-scrollY,i=t.getBoundingClientRect();return r<i.right&&r>i.left&&n<i.bottom&&n>i.top},this.getPreviousWordOrAnchor=e=>{if(!e)return null;let t=e.previousElementSibling;for(;t&&"w"!==t.tagName&&"anchor"!==t.tagName;){let e=t.querySelectorAll("w, anchor");if(e.length>0)return e.item(e.length-1);t=t.previousElementSibling}return t||this.getPreviousWordOrAnchor(e.parentElement)},this.getNextWordOrAnchor=e=>{if(!e)return null;let t=e.nextElementSibling;for(;t&&"w"!==t.tagName&&"anchor"!==t.tagName;){let e=t.getElementsByTagName("w, anchor");if(e.length>0)return e.item(0);t=t.nextElementSibling}return t||this.getNextWordOrAnchor(e.parentElement)},this.isLastWordOfParagraph=e=>{let t=this.xmlDoc.querySelectorAll("s:last-child w:last-of-type");for(let r=0;r<t.length;r++)if(t.item(r).id===e)return!0;return!1},this.changePlayback=e=>{let t=e.currentTarget;this.playback_rate=parseInt(t.value)/100,this.wavesurfer.setPlaybackRate(this.playback_rate)},this.goBack=e=>{this.wavesurfer.skipBackward(e)},this.playPause=()=>{this.wavesurfer.playPause(),this.playing=this.wavesurfer.isPlaying()},this.playRegion=()=>{let e;e=Object.values(this.wavesurfer.regions.list)[0],e?(e.play(),this.playing=this.wavesurfer.isPlaying()):alert("There is no region selected")},this.deleteRegion=()=>{this.wavesurfer.regions.clear()},this.playSprite=e=>{let t=e.currentTarget,[r,n]=this.processed_alignment[t.id],i=r/1e3;this.wavesurfer.setCurrentTime(i),this.addHighlightingTo(t),this.playingWord=t,this.wavesurfer.play(i,i+n/1e3)},this.stop=()=>{this.wavesurfer.isPlaying()&&this.playPause(),this.wavesurfer.stop(),this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),this.progressBarElement&&(this.progressBarElement.setAttribute("offset","0%"),this.progressBarElement.style.width="0%")},this.createWaveSurfer=()=>{let e=h.create({container:this.el.shadowRoot.querySelector("#wave"),waveColor:"#A8DBA8",progressColor:"#3B8686",backgroundColor:"light"==this.theme?A:w,backend:"MediaElement",responsive:!0,plugins:[m.create({regions:[],dragSelection:{slop:5},maxRegions:1}),f.create({markers:[{id:"dummy",time:-1,label:"",position:"top",color:"#ffaa11",draggable:!0}]})]});try{e.load(this.audio)}catch(e){console.log(e),this.isLoaded=!0,this.assetsStatus.AUDIO=2}e.setDisabledEventEmissions("region-click"),e.on("marker-drop",(e=>{let t=this.allAnchors,r=0,n=this.wavesurfer.getDuration()+999,i=t[e.id].time;for(let a in t){if(a===e.id)continue;let s=t[a].time;s<i&&s>r?r=s:s>i&&s<n&&(n=s)}if(r<e.time&&e.time<n)return t[e.id].element.setAttribute("time",`${e.time.toFixed(2)}s`),void this.updateAnchorBackend();let a=this.wavesurfer.markers.markers.findIndex((t=>t.id===e.id));this.wavesurfer.markers.remove(a),this.wavesurfer.markers.add({time:i,label:"",color:e.color,draggable:!0}).id=e.id,this.anchorAlertMessage={show:!0,message:"Invalid anchor location"}})),e.on("ready",(()=>{for(let e in this.allAnchors){let t=this.allAnchors[e];this.wavesurfer.markers.add({time:t.time,label:"",color:t.color,draggable:!0}).id=e}this.isLoaded=!0,this.assetsStatus.AUDIO=1,this.processed_alignment.all=[0,1e3*this.wavesurfer.getDuration()]})),e.on("error",(e=>{console.log(e),this.isLoaded=!0,this.assetsStatus.AUDIO=2})),e.on("audioprocess",(()=>{let e=this.returnWordClosestTo(this.wavesurfer.getCurrentTime());if(!e||this.playingWord&&this.playingWord===e||(this.addHighlightingTo(e),this.playingWord=e),this.progressBarElement){let e=this.wavesurfer.getCurrentTime()/this.wavesurfer.getDuration()*100+"%";this.progressBarElement.setAttribute("offset",e),this.progressBarElement.style.width=e}})),e.on("seek",(e=>{let t=e*this.wavesurfer.getDuration(),r=this.returnWordClosestTo(t);r&&this.addHighlightingTo(r),this.progressBarElement||this.animateProgress(),this.progressBarElement.setAttribute("offset",100*e+"%"),this.progressBarElement.style.width=100*e+"%"})),e.on("pause",(()=>{this.playing=!1,this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading")))})),e.on("finish",(()=>{this.stop(),this.playing=!1})),this.wavesurfer=e},this.changeTheme=()=>{"light"===this.theme?(this.theme="dark",this.wavesurfer.setBackgroundColor(w)):(this.theme="light",this.wavesurfer.setBackgroundColor(A))},this.Guide=()=>(0,n.h)("button",{class:"scroll-guide__container ripple ui-button theme--"+this.theme,onClick:()=>this.hideGuideAndScroll()},(0,n.h)("span",{class:"scroll-guide__text theme--"+this.theme},g("re-align",this.language))),this.Overlay=()=>(0,n.h)("object",{onClick:e=>this.goToSeekFromProgress(e),id:"overlay__object",type:"image/svg+xml",data:this.svgOverlay}),this.Img=e=>(0,n.h)("div",{class:"image__container page__col__image theme--"+this.theme},(0,n.h)("img",{alt:"image",class:"image",src:this.urlTransform(e.url)})),this.PageCount=e=>(0,n.h)("div",{class:"page__counter color--"+this.theme},"Page"," ",(0,n.h)("span",{"data-cy":"page-count__current"},e.currentPage)," / ",(0,n.h)("span",{"data-cy":"page-count__total"},e.pgCount)),this.Page=e=>(0,n.h)("div",{class:"page page__container page--multi animate-transition  theme--"+this.theme+" "+(e.pageData.attributes.class?e.pageData.attributes.class.value:""),id:e.pageData.id},this.parsed_text.length>1?(0,n.h)(this.PageCount,{pgCount:this.parsed_text.length,currentPage:this.parsed_text.indexOf(e.pageData)+1}):null,e.pageData.img?(0,n.h)(this.Img,{url:e.pageData.img}):null,(0,n.h)("div",{class:"page__col__text paragraph__container theme--"+this.theme},e.pageData.paragraphs.map((e=>(0,n.h)(this.Paragraph,{sentences:Array.from(e.childNodes),attributes:e.attributes}))))),this.Paragraph=e=>(0,n.h)("div",{class:"paragraph sentence__container theme--"+this.theme+" "+(e.attributes.class?e.attributes.class.value:"")},e.sentences.map((e=>e.childNodes.length>0&&(0,n.h)(this.Sentence,{words:Array.from(e.childNodes),attributes:e.attributes})))),this.Sentence=e=>{!this.hasTextTranslations&&e.attributes.class&&(this.hasTextTranslations=null!=e.attributes.class.value.match("translation"));let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("div",Object.assign({},t,{class:"sentence "+(e.attributes.class?e.attributes.class.value:"")}),e.words.map(((t,r)=>{if("#text"===t.nodeName)return(0,n.h)(this.NonWordText,{text:t.textContent,attributes:t.attributes,id:(e.attributes.id?e.attributes.id.value:"P")+"text"+r});if("w"===t.nodeName)return(0,n.h)(this.Word,{text:t.textContent,id:t.id,attributes:t.attributes});if("anchor"===t.nodeName){if("ANCHOR"!==this.mode)return null;let e=this.allAnchors[t.id].color;return(0,n.h)(this.Anchor,{id:t.id,color:e})}if(t){let i={};return t.attributes["xml:lang"]&&(i.lang=e.attributes["xml:lang"].value),t.attributes.lang&&(i.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},i,{class:"sentence__text theme--"+this.theme+" "+t.className,id:t.id?t.id:"text_"+r}),t.textContent)}})))},this.NonWordText=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},t,{class:"sentence__text theme--"+this.theme,id:e.id}),e.text)},this.Anchor=e=>(0,n.h)("svg",{viewBox:"0 0 40 80",id:`${e.id}-svg`,style:{width:y,height:"22px",minWidth:y,marginRight:"5px",zIndex:"4",cursor:"pointer"}},(0,n.h)("polygon",{id:`${e.id}-polygon`,stroke:"#979797",fill:e.color,points:"20 0 40 30 40 80 0 80 0 30"})),this.Word=e=>{let t={};return e.attributes&&e.attributes["xml:lang"]&&(t.lang=e.attributes["xml:lang"].value),e.attributes&&e.attributes.lang&&(t.lang=e.attributes.lang.value),(0,n.h)("span",Object.assign({},t,{class:"sentence__word theme--"+this.theme+" "+(e&&e.attributes.class?e.attributes.class.value:""),id:e.id,onClick:this.playSprite}),e.text)},this.PlayControl=()=>(0,n.h)("button",{"data-cy":"play-button",disabled:!this.isLoaded,"aria-label":"Play",onClick:this.playPause,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},this.wavesurfer.isPlaying()?"pause":"play_arrow"),(0,n.h)("span",{class:"tooltiptext"},this.wavesurfer.isPlaying()?"Pause":"Play")),this.ReplayControl=()=>(0,n.h)("button",{"data-cy":"replay-button",disabled:!this.isLoaded,"aria-label":"Rewind",onClick:()=>this.goBack(5),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},"replay_5"),(0,n.h)("span",{class:"tooltiptext"},"Rewind")),this.StopControl=()=>(0,n.h)("button",{"data-cy":"stop-button",disabled:!this.isLoaded,"aria-label":"Stop",onClick:this.stop,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},"stop"),(0,n.h)("span",{class:"tooltiptext"},"Stop")),this.ExportPreviewControl=()=>(0,n.h)("button",{"data-cy":"export-original-button","aria-label":"Export Preview",onClick:this.exportPreview,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"file_download"),(0,n.h)("span",{class:"tooltiptext"},"Export the readalong preview version")),this.PlayReginControl=()=>(0,n.h)("button",{"data-cy":"export-original-button","aria-label":"Export Preview",onClick:this.playRegion,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons"},"play_circle"),(0,n.h)("span",{class:"tooltiptext"},"Play selected region")),this.DeleteReginControl=()=>(0,n.h)("button",{"data-cy":"export-original-button","aria-label":"Export Preview",onClick:this.deleteRegion,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"highlight_off"),(0,n.h)("span",{class:"tooltiptext"},"Delete region")),this.PlaybackSpeedControl=()=>(0,n.h)("div",null,(0,n.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},g("speed",this.language)),(0,n.h)("input",{type:"range",min:"75",max:"125",value:100*this.playback_rate,class:"slider control-panel__control",id:"myRange",onInput:e=>this.changePlayback(e)})),this.WaveFormControl=()=>(0,n.h)("div",null,(0,n.h)("h5",{class:"control-panel__buttons__header color--"+this.theme},g("zoom-waveform",this.language)),(0,n.h)("input",{type:"range",min:"1",max:"100",value:"0",class:"slider control-panel__control",id:"myRange",onInput:e=>this.zoomWaveform(e)})),this.StyleControl=()=>(0,n.h)("button",{"aria-label":"Change theme",onClick:this.changeTheme,class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"style"),(0,n.h)("span",{class:"tooltiptext right"},"Change theme")),this.FullScreenControl=()=>(0,n.h)("button",{"aria-label":"Full screen mode",onClick:()=>this.toggleFullscreen(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons","aria-label":"Full screen mode"},this.fullscreen?"fullscreen_exit":"fullscreen"),(0,n.h)("span",{class:"tooltiptext right"},"Toogle screen mode")),this.TextTranslationDisplayControl=()=>(0,n.h)("button",{"data-cy":"translation-toggle","aria-label":"Toggle Translation",onClick:()=>this.toggleTextTranslation(),class:"tooltip control-panel__control ripple theme--"+this.theme+" background--"+this.theme},(0,n.h)("i",{class:"material-icons-outlined"},"subtitles"),(0,n.h)("span",{class:"tooltiptext right"},"Toggle translation")),this.ControlPanel=()=>(0,n.h)("div",{"data-cy":"control-panel",class:"control-panel theme--"+this.theme+" background--"+this.theme},(0,n.h)("div",{class:"control-panel__buttons--left"},(0,n.h)(this.PlayControl,null),(0,n.h)(this.ReplayControl,null),(0,n.h)(this.StopControl,null),"ANCHOR"===this.mode&&(0,n.h)(this.PlayReginControl,null),"ANCHOR"===this.mode&&(0,n.h)(this.DeleteReginControl,null),"PREVIEW"===this.mode&&(0,n.h)(this.ExportPreviewControl,null)),(0,n.h)("div",{class:"control-panel__buttons--center"},(0,n.h)(this.PlaybackSpeedControl,null)),"ANCHOR"!==this.mode?(0,n.h)("div",null):(0,n.h)("div",{class:"control-panel__buttons--center"},(0,n.h)(this.WaveFormControl,null)),(0,n.h)("div",{class:"control-panel__buttons--right"},this.hasTextTranslations&&(0,n.h)(this.TextTranslationDisplayControl,null),(0,n.h)(this.StyleControl,null),(0,n.h)(this.FullScreenControl,null)))}wheelHandler(e){if(this.el.shadowRoot.querySelector(".reading")){let t=e.composedPath()[0];if((t.classList.contains("sentence__word")||t.classList.contains("sentence__container")||t.classList.contains("sentence"))&&this.autoScroll){let e=this.el.shadowRoot.querySelector(".reading");e&&(this.autoScroll=!this.inPageContentOverflow(e),this.showGuide=!this.autoScroll)}}this.toggleMenuOff()}contextMenuHandler(e){if("ANCHOR"!==this.mode)return;let t=this.lookupElement(e);this.contextMenuElement=t,t?(e.preventDefault(),this.toggleMenuOn(t,this.getPosition(e))):this.toggleMenuOff()}keyUpHandler(e){"Escape"===e.key&&this.toggleMenuOff()}resizeHandler(){this.toggleMenuOff()}clickHandler(e){this.clickedInside(e,"context-menu__link")||this.clickedInside(e,"context-menu")||1!==e.which&&1!==e.button||this.toggleMenuOff()}urlTransform(e){return this.useAssetsFolder&&function(e){return!/^(https?:[/]|assets)[/]\b/.test(e)}(e)?"assets/"+e:e}tagToQuery(e){return"#"+(e=(e=e.replace(".","\\.")).replace("#","\\#"))}returnWordClosestTo(e){let t=Object.keys(this.processed_alignment);t.pop();let r=1e3*e;if(r<500*this.wavesurfer.getDuration()){for(let e=0;e<t.length;e++)if(r>this.processed_alignment[t[e]][0]&&this.processed_alignment[t[e+1]]&&r<this.processed_alignment[t[e+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[e]));if(r>this.processed_alignment[t[t.length-1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[t.length-1]))}else{let e=t.length-1;if(r>this.processed_alignment[t[e]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[e]));for(e=t.length-2;e>=0;e--)if(r>this.processed_alignment[t[e]][0]&&this.processed_alignment[t[e+1]]&&r<this.processed_alignment[t[e+1]][0])return this.el.shadowRoot.querySelector(this.tagToQuery(t[e]))}}goTo(e){void 0===this.play_id&&(this.playPause(),this.playPause()),this.autoScroll=!1,e/=1e3,this.wavesurfer.setCurrentTime(e),setTimeout((()=>this.autoScroll=!0),100)}goToSeekFromProgress(e){let t=e.currentTarget.getBoundingClientRect(),r=t.left,n=t.width,i=(e.pageX-r)/n*this.wavesurfer.getDuration()*1e3;this.goTo(i)}toggleTextTranslation(){this.el.shadowRoot.querySelectorAll(".translation").forEach((e=>e.classList.toggle("invisible"))),this.el.shadowRoot.querySelectorAll(".sentence__translation").forEach((e=>e.classList.toggle("invisible")))}addHighlightingTo(e){this.el.shadowRoot.querySelectorAll(".reading").forEach((e=>e.classList.remove("reading"))),e.classList.add("reading");let t=F._getSentenceContainerOfWord(e).parentElement.id;t!==this.current_page&&(void 0!==this.current_page&&this.scrollToPage(t),this.current_page=t),(e.getBoundingClientRect().left<0||0!==this.el.shadowRoot.querySelector("#"+t).getBoundingClientRect().left)&&this.scrollToPage(t),this.inPageContentOverflow(e)&&this.autoScroll&&(e.scrollIntoView(!1),this.scrollByHeight(e)),this.inParagraphContentOverflow(e)&&this.autoScroll&&(e.scrollIntoView(!1),this.scrollByWidth(e))}animateProgressWithOverlay(){let e=this.el.shadowRoot.querySelector("#overlay__object"),t=e.contentDocument.querySelector("#progress-fill"),r=e.contentDocument.querySelector("#progress-base");t.classList.add("stop-color--"+this.theme),r.classList.add("stop-color--"+this.theme)}animateProgressDefault(e){if(this.progressBarElement)return;let t=document.createElement("div");t.className="progress theme--"+this.theme,t.dataset.sprite=e;let r=this.tagToQuery(e);this.el.shadowRoot.querySelector(r).appendChild(t),this.progressBarElement=t}animateProgress(){this.svgOverlay?this.animateProgressWithOverlay():this.animateProgressDefault("all")}changeFill(){let e=this.el.shadowRoot.querySelector(".sentence__word"),t=window.getComputedStyle(e).color,r=this.el.shadowRoot.querySelector("#overlay__object"),n=r.contentDocument.querySelector("#progress-fill"),i=r.contentDocument.querySelector("#progress-base");r.contentDocument.querySelector("#polygon").setAttribute("stroke",t),i.setAttribute("stop-color",t),n.setAttribute("stop-color",t)}static _getSentenceContainerOfWord(e){return e.parentElement.parentElement.parentElement}toggleFullscreen(){if(this.fullscreen){let e=this.el.ownerDocument;e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.msExitFullscreen&&e.msExitFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.remove("read-along-container--fullscreen")}else{let e=this.el.shadowRoot.getElementById("read-along-container");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this.el.shadowRoot.getElementById("read-along-container").classList.add("read-along-container--fullscreen")}this.fullscreen=!this.fullscreen}hideGuideAndScroll(){let e=this.el.shadowRoot.querySelector(".reading"),t=new IntersectionObserver((r=>{let[n]=r;n.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),t.unobserve(e))}));t.observe(e),this.scrollTo(e)}inParagraphContentOverflow(e){let t=F._getSentenceContainerOfWord(e).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.right<t.left,i=r.right>t.right,a=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),a.unobserve(e))}));return a.observe(e),n||i}inPageContentOverflow(e){let t=this.el.shadowRoot.querySelector("#"+this.current_page).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top+r.height>t.top+t.height,i=r.top+r.height<0,a=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),a.unobserve(e))}));return a.observe(e),i||n}inPage(e){let t=F._getSentenceContainerOfWord(e).getBoundingClientRect(),r=e.getBoundingClientRect(),n=r.top+r.height>t.top+t.height,i=r.top+r.height<0,a=new IntersectionObserver((t=>{let[r]=t;r.isIntersecting&&(setTimeout((()=>{this.showGuide=!1,this.autoScroll=!0}),100),a.unobserve(e))}));return a.observe(e),i||n}scrollToPage(e){let t=this.el.shadowRoot.querySelector(".pages__container"),r=this.el.shadowRoot.querySelector("#"+e);t.scrollBy({top:null!=this.pageScrolling.match("vertical")?r.offsetTop-t.scrollTop:0,left:null!=this.pageScrolling.match("vertical")?0:r.offsetLeft-t.scrollLeft,behavior:"smooth"}),r.scrollTo(0,0)}scrollByHeight(e){let t=F._getSentenceContainerOfWord(e),r=e.parentElement.getBoundingClientRect();t.scrollBy({top:t.getBoundingClientRect().height-r.height,left:0,behavior:"smooth"})}scrollByWidth(e){let t=F._getSentenceContainerOfWord(e),r=e.getBoundingClientRect();t.scrollTo({left:r.left-10,top:0,behavior:"smooth"})}scrollTo(e){e.scrollIntoView({behavior:"smooth"})}componentDidUpdate(){this.svgOverlay&&this.changeFill()}componentWillLoad(){this.language.length<3&&(null!=this.language.match("fr")?this.language="fra":this.language="eng");let e=i(this.text);this.xmlDoc=(new DOMParser).parseFromString(e,"text/xml");let t=(new DOMParser).parseFromString(e,"text/xml");this.workingXmlDoc=t;let r=t.querySelectorAll("w,anchor");this.palette=v.slice(),this.allAnchors={};for(let e=0;e<r.length;e++){let n=r.item(e);if("anchor"!==n.tagName)continue;let i=t.getElementById(n.id),a=i.getAttribute("time"),s=0;a.endsWith("ms")?s=Number(a.substring(0,a.length-2))/1e3:a.endsWith("s")&&(s=Number(a.substring(0,a.length-1)));let o=n.id;if(this.allAnchors[o]={id:o,color:this.palette.pop(),element:i,time:s},!i.parentElement||"s"!==i.parentElement.tagName){if(i.nextElementSibling){let n=null;for(let t=e+1;t<r.length;t++)if("w"===r[t].tagName){n=r[t];break}if(n){let e=t.getElementById(n.id);e.parentElement.insertBefore(i,e);continue}}if(i.previousElementSibling){let n=null;for(let t=e-1;t>=0;t--)if("w"===r[t].tagName){n=r[t];break}if(n){t.getElementById(n.id).parentElement.appendChild(i)}}}}this.parsed_text=s(t),"ANCHOR"===this.mode&&this.updateAnchorBackend(),this.assetsStatus.XML=this.parsed_text.length?1:2,this.processed_alignment=o(this.alignment),this.assetsStatus.SMIL=Object.keys(this.processed_alignment).length?1:2}componentDidLoad(){this.processed_alignment=o(this.alignment),this.assetsStatus.SMIL=Object.keys(this.processed_alignment).length?1:2,this.createWaveSurfer()}render(){return(0,n.h)("div",{id:"read-along-container",class:"read-along-container"},(0,n.h)("h1",{class:"slot__header"},(0,n.h)("slot",{name:"read-along-header"})),(0,n.h)("h3",{class:"slot__subheader"},(0,n.h)("slot",{name:"read-along-subheader"})),(0,n.h)("div",{id:"wave",hidden:"ANCHOR"!==this.mode}),this.assetsStatus.AUDIO&&(0,n.h)("p",{"data-cy":"audio-error",class:"alert status-"+this.assetsStatus.AUDIO+(1==this.assetsStatus.AUDIO?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.AUDIO?"error":this.assetsStatus.AUDIO>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.AUDIO?g("audio-error",this.language):this.assetsStatus.SMIL>0?"AUDIO":g("loading",this.language))),this.assetsStatus.XML&&(0,n.h)("p",{"data-cy":"text-error",class:"alert status-"+this.assetsStatus.XML+(1==this.assetsStatus.XML?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.XML?"error":this.assetsStatus.XML>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.XML?g("text-error",this.language):this.assetsStatus.SMIL>0?"XML":g("loading",this.language))),this.assetsStatus.SMIL&&(0,n.h)("p",{"data-cy":"alignment-error",class:"alert status-"+this.assetsStatus.SMIL+(1==this.assetsStatus.SMIL?" fade":"")},(0,n.h)("span",{class:"material-icons-outlined"}," ",2==this.assetsStatus.SMIL?"error":this.assetsStatus.SMIL>0?"done":"pending_actions"),(0,n.h)("span",null,2==this.assetsStatus.SMIL?g("alignment-error",this.language):this.assetsStatus.SMIL>0?"SMIL":g("loading",this.language))),this.anchorAlertMessage&&this.anchorAlertMessage.show&&(0,n.h)("p",{"data-cy":"anchor-error",class:"alert status-2"},(0,n.h)("span",{class:"material-icons-outlined"}," error "),(0,n.h)("span",null,this.anchorAlertMessage.message),(0,n.h)("button",{style:{border:"none",padding:"0px",float:"right"},class:"alert status-2",onClick:this.closeAnchorAlert},(0,n.h)("span",{class:"material-icons"},"cancel"))),(0,n.h)("div",{"data-cy":"text-container",class:"pages__container theme--"+this.theme+" "+this.pageScrolling},this.showGuide?(0,n.h)(this.Guide,null):null,1==this.assetsStatus.XML&&this.parsed_text.map((e=>(0,n.h)(this.Page,{pageData:e}))),0==this.isLoaded&&(0,n.h)("div",{class:"loader"})),1==this.assetsStatus.SMIL&&(0,n.h)("div",{onClick:e=>this.goToSeekFromProgress(e),id:"all","data-cy":"progress-bar",class:"overlay__container theme--"+this.theme+" background--"+this.theme},this.svgOverlay?(0,n.h)(this.Overlay,null):null),1==this.assetsStatus.AUDIO&&(0,n.h)(this.ControlPanel,null),this.cssUrl&&null!=this.cssUrl.match(".css")&&(0,n.h)("link",{href:this.cssUrl,rel:"stylesheet"}),(0,n.h)("div",null,(0,n.h)("nav",{id:"context-menu",class:"context-menu","data-id":""},(0,n.h)("ul",{class:"context-menu__items"},(0,n.h)("li",null,(0,n.h)("div",{class:"context-menu__item",id:"context-menu-div"},(0,n.h)("a",{href:"#",class:"context-menu__link","data-action":"add-anchor",onClick:this.insertAnchorBefore},"Insert Anchor Before"))),(0,n.h)("li",null,(0,n.h)("div",{class:"context-menu__item",id:"context-menu-div"},(0,n.h)("a",{href:"#",class:"context-menu__link","data-action":"add-anchor-after",onClick:this.insertAnchorAfter},"Insert Anchor After"))),(0,n.h)("li",null,(0,n.h)("div",{class:"context-menu__item",id:"context-menu-div"},(0,n.h)("a",{href:"#",class:"context-menu__link","data-action":"del-anchor",onClick:this.deleteAnchor},"Remove")))))))}get el(){return(0,n.g)(this)}};F.style="@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RbLtyU5rZPoAU.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Karla';font-style:normal;font-weight:400;src:local('Karla'), local('Karla-Regular'), url('assets/fonts/qkBbXvYC6trAT7RVLtyU5rZP.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjxAwXiWtFCfQ7A.woff2') format('woff2');unicode-range:U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF}@font-face{font-family:'Lato';font-style:normal;font-weight:400;src:local('Lato Regular'), local('Lato-Regular'), url('assets/fonts/S6uyw4BMUTPHjx4wXiWtFCc.woff2') format('woff2');unicode-range:U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD}@font-face{font-family:'Material Icons';font-style:normal;font-weight:400;src:url('assets/fonts/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2') format('woff2')}@font-face{font-family:'Material Icons Outlined';font-style:normal;font-weight:400;src:url('assets/fonts/gok-H7zzDkdnRel8-DQ6KAXJ69wP1tGnf4ZGhUcel5euIg.woff2') format('woff2')}.material-icons{font-family:'Material Icons';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.material-icons-outlined{font-family:'Material Icons Outlined';font-weight:normal;font-style:normal;font-size:24px;line-height:1;letter-spacing:normal;text-transform:none;display:inline-block;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:'liga';-webkit-font-smoothing:antialiased}.font-weight--100{font-weight:100}.font-weight--200{font-weight:200}.font-weight--300{font-weight:300}.font-weight--400{font-weight:400}.font-weight--500{font-weight:500}.font-weight--600{font-weight:600}.font-weight--700{font-weight:700}.font-weight--800{font-weight:800}.font-weight--900{font-weight:900}.shadowed{text-shadow:0.3px 0.2px black}.theme--light.sentence,.theme--light.page__col__image,.theme--light.page__container,.theme--light.scroll-guide__container{background-color:#fff}.theme--dark.sentence,.theme--dark.page__col__image,.theme--dark.page__container,.theme--dark.scroll-guide__container{background-color:#3c4369}.sentence__word,.sentence__text,.scroll-guide__text{line-height:1.5;border-radius:0.3125em;position:relative;padding:0.0625em;font-size:1em}.theme--light.ripple,.theme--light.reading,.theme--light.sentence__word,.theme--light.sentence__text,.theme--light.scroll-guide__text{color:#040508}.theme--dark.ripple,.theme--dark.reading,.theme--dark.sentence__word,.theme--dark.sentence__text,.theme--dark.scroll-guide__text{color:#fff}.theme--light.ripple:active,.theme--light.reading:active,.theme--light.sentence__word:hover{color:#fff;background:gray radial-gradient(circle, transparent 1%, gray 1%) center/15000%}.theme--dark.ripple:active,.theme--dark.reading:active,.theme--dark.sentence__word:hover{color:#fff;background:#a6a6a6 radial-gradient(circle, transparent 1%, #a6a6a6 1%) center/15000%}.theme--light.sentence__word.reading{color:#fff;background:#666666 radial-gradient(circle, transparent 1%, #666666 1%) center/15000%}.theme--dark.sentence__word.reading{color:#040508;background:#fff radial-gradient(circle, transparent 1%, #fff 1%) center/15000%}.theme--light.scroll-guide__container,.theme--light.overlay__container{border:0.046875em solid gray}.theme--dark.scroll-guide__container,.theme--dark.overlay__container{border:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-left:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-left:0.046875em solid #a6a6a6}.theme--light.page--multi,.theme--light.pages__container,.theme--light.control-panel{border-right:0.046875em solid gray}.theme--dark.page--multi,.theme--dark.pages__container,.theme--dark.control-panel{border-right:0.046875em solid #a6a6a6}.theme--light.pages__container{border-top:0.046875em solid gray}.theme--dark.pages__container{border-top:0.046875em solid #a6a6a6}.theme--light.control-panel{border-bottom:0.046875em solid gray}.theme--dark.control-panel{border-bottom:0.046875em solid #a6a6a6}.ripple:hover,.reading:hover,.sentence__word:hover{cursor:pointer}@viewport{width:device-width}button{border:0;cursor:pointer}html{background-color:#fff;box-sizing:border-box;height:100%}*:before,*:after{box-sizing:inherit}body{-webkit-font-smoothing:antialiased;color:#040508;font-family:\"Lato\", sans-serif;min-height:100%;overflow-x:hidden;overflow-y:hidden;text-rendering:optimizeLegibility}a{background:transparent;color:#c69;text-decoration:none;transition:color 0.2s;outline:none}a:active,a:focus{outline:none}img{height:90%;max-width:90%;object-fit:cover}h1,h2,h3,h4,h5,h6{font-family:\"Karla\", sans-serif;font-weight:normal}p,mat-chip,mat-tab-label,span,button,a{font-family:\"Lato\", sans-serif}.theme--light::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--light::-webkit-scrollbar-track{background:#fff}.theme--light::-webkit-scrollbar-thumb{background:#040508;border-radius:0.3125em;height:0.625em;width:0.625em}.theme--dark::-webkit-scrollbar{width:0.5em;height:0.5em}.theme--dark::-webkit-scrollbar-track{background:#3c4369}.theme--dark::-webkit-scrollbar-thumb{background:#fff;border-radius:0.3125em;height:0.625em;width:0.625em}.bg-img{background-image:url(\"../assets/img/bg.jpg\");height:100vh;overflow:overlay;overflow-x:hidden;background-position:center;background-repeat:no-repeat;background-size:cover;min-height:100%}.shadow-box{box-shadow:0 0.3125rem 1rem 0 rgba(0, 0, 0, 0.24);padding:25px;background:rgba(255, 255, 255, 0.94);border-radius:5px}.font-xs{font-size:0.5em}.font-sm{font-size:0.75em}.font-md{font-size:1em}.font-lg{font-size:1.25em}.font-xl{font-size:1.5em}.font-xxl{font-size:2em}.faded{opacity:0.2;color:black}table{table-layout:fixed}.center{margin-left:auto;margin-right:auto;text-align:center}.container{max-width:80em}.background--light{background:#fff}.stop-color--light{fill:#fff}.color--light{color:#040508}.background--dark{background:#3c4369}.stop-color--dark{fill:#3c4369}.color--dark{color:#fff}.abs{position:absolute}.top-0{top:0}.left-0{left:0}.right-0{right:0}.top-5{top:0.3125em}.left-5{left:0.3125em}.right-5{right:0.3125em}.top-10{top:0.625em}.left-10{left:0.625em}.right-10{right:0.625em}.top-15{top:0.9375em}.left-15{left:0.9375em}.right-15{right:0.9375em}.top-20{top:1.25em}.left-20{left:1.25em}.right-20{right:1.25em}.top-25{top:1.5625em}.left-25{left:1.5625em}.right-25{right:1.5625em}.top-30{top:1.875em}.left-30{left:1.875em}.right-30{right:1.875em}.top-35{top:2.1875em}.left-35{left:2.1875em}.right-35{right:2.1875em}.top-40{top:2.5em}.left-40{left:2.5em}.right-40{right:2.5em}.top-45{top:2.8125em}.left-45{left:2.8125em}.right-45{right:2.8125em}.top-50{top:3.125em}.left-50{left:3.125em}.right-50{right:3.125em}.tooltip{position:relative;display:inline-block}.tooltip .tooltiptext{visibility:hidden;width:100px;background-color:#036;color:#fff;text-align:left;padding:5px;border-radius:6px;overflow-x:hidden;opacity:20%;transition:opacity 0.6s;position:absolute;z-index:1;top:20px;left:-50%}.tooltip .tooltiptext.right{left:-400%}.tooltip:hover .tooltiptext{visibility:visible;opacity:1}.context-menu{display:none;position:fixed;z-index:10;padding:10px;height:20px;background-color:#fff;border:solid 1px #dfdfdf;box-shadow:1px 1px 2px #cfcfcf}.context-menu--two{height:40px}.context-menu--one{height:20px}.context-menu--active{display:block}.context-menu__items{list-style:none;margin:0;padding:0}.context-menu__link{color:#337ab7;text-decoration:none;background-color:transparent;transition:color 0.2s;outline:none;font-family:\"Lato\", sans-serif;cursor:pointer}.context-menu__link:hover{color:#fff;background-color:#0066aa}.hidden{display:none}.invisible{visibility:hidden !important}.control-panel{border-radius:0 0 0.3125em 0.3125em;position:relative;min-width:100%;display:inline-flex}.control-panel__buttons--left{width:25%;float:left;margin-top:0.3125em;padding:0.3125em}.control-panel__buttons--center{width:25%;text-align:center;margin:0 auto}.control-panel__buttons--right{width:25%;text-align:right;float:right;margin-top:0.3125em;margin-right:0.3125em}.control-panel__buttons__header{margin:0.3125em}.control-panel__control{border-radius:0.3125em;margin:0.5em auto}.control-panel__control:focus{outline:none}.settings{margin-left:0;margin-right:0;text-align:center}.settings__option__header{margin-bottom:0.5em}#waveform{background-size:contain;background-repeat:no-repeat;background-position:center center;width:100%;height:100%;position:absolute;top:0;left:0}.low{z-index:700}.overlay__container{width:100%;max-width:100%;height:3.125em;position:relative;z-index:8000}#overlay__object{z-index:700;max-height:100%;min-width:100%;fill:\"transparent\"}#overlay__object.theme--light{stroke:gray}#overlay__object.theme--dark{stroke:#a6a6a6}.scroll-guide__container{text-align:center;z-index:700;width:20%;position:fixed;left:50%;transform:translate(-50%, 0)}.scroll-guide__text{font-size:1.25em}.pages__container{overflow:auto;max-height:55vh;height:100%;max-width:100%;width:100%;position:relative;display:-webkit-inline-flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;border-radius:0.3125em 0.3125em 0 0}.page{overflow-y:hidden;overflow-x:auto;flex-grow:1;min-width:99.6%;width:100%;max-width:55em}.page__container{display:grid;grid-template-columns:[col-start] [col-end];grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"image page-no\" \"image text\";justify-items:stretch}.page__counter{grid-area:page-no;margin:0.625em 0 0 0.9375em;text-align:right;padding-right:0.9375em;max-height:5rem}.page__col__image{grid-area:image;float:left;max-height:100%;text-align:center;margin:5%;padding:0;border-radius:0 0 0 0;position:relative}.page__col__image img{height:100%;max-width:95%;object-fit:contain}.page__col__text{grid-area:text}.page.two-column-layout-page{grid-template-columns:40% auto}.page.one-column-layout-page{display:grid;grid-template-columns:auto;grid-template-rows:[row-start] 5% [row-end] 95%;grid-template-areas:\"page-no\" \"text\";justify-items:stretch}.page.one-column-layout-page .page__col__image{grid-area:text}.hide-page-counter .page__counter{display:none}.pages__container.vertical{flex-direction:column !important}.pages__container.vertical>.page{min-height:100%}.paragraph__container{overflow-y:auto;min-width:40%;padding-bottom:0.75em}.sentence{margin:0 1.5em;text-align:left;max-width:90%}.sentence__container{margin:3.75em 0.625em 3.75em 0.625em;scroll-behavior:smooth;max-width:100%;position:relative;overflow-y:auto;overflow-x:hidden}.sentence__container__buttons{position:absolute;top:0;right:0}.sentence__word{font-size:1.5em}.sentence__translation .sentence__text,.sentence__translation .sentence__word{color:#777;font-style:italic;font-size:95%}.paragraph.visually_aligned .sentence .sentence__text,.paragraph.visually_aligned .sentence .sentence__word{display:table-cell}.paragraph.visually_aligned .sentence .sentence__text:empty{display:none}.paragraph.visually_aligned{display:table}.paragraph.visually_aligned .sentence{display:table-row}.read-along-container{max-width:75em;margin:0 auto;max-height:98vh;height:98vh;overflow-Y:hidden;overflow-X:hidden;padding:0.3125em;position:relative}.read-along-container--fullscreen{max-width:80%;min-width:80%}.slot__header{margin-bottom:0.3125em}.slot__subheader{margin-top:0;margin-left:1em}.loader{border:16px solid #eee;border-radius:50%;border-right-color:#aa0;border-bottom-color:#a33;border-left-color:#111;width:10rem;height:10rem;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite;position:fixed;top:calc(50vh - 10rem);left:calc(50vw - 10rem);z-index:1000;box-shadow:0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg)}}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.alert{position:relative;padding:1rem 1rem;margin-bottom:1rem;border:1px solid transparent;border-radius:0.25rem;transition-delay:2s;transition:visibility 5s height 5s}.alert.status-1{color:#0f5132;background-color:#d1e7dd;border-color:#badbcc}.alert.status-2{color:#842029;background-color:#f8d7da;border-color:#f5c2c7}.alert.fade{visibility:collapse;height:0 !important;overflow:hidden !important;line-height:0 !important;padding:0 !important;margin:0 !important;border:0 !important}.animate-transition,.ripple,.reading{transition:background 0.4s}.animate-transition:active,.ripple:active,.reading:active{transition:background 0s}.ripple,.reading{background-position:center;padding:0.0625em}.ripple:active,.reading:active{background-size:100%}.progress{position:absolute;top:0;left:0;height:100%;width:0}.progress.theme--light{background-color:rgba(128, 128, 128, 0.2)}.progress.theme--dark{background-color:rgba(166, 166, 166, 0.2)}"},318:(e,t,r)=>{var n={"./read-along.entry.js":[159,179]};function i(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],i=t[0];return r.e(t[1]).then((()=>r(i)))}i.keys=()=>Object.keys(n),i.id=318,e.exports=i}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e=r(896);(()=>{const t="file:///Users/karenorman/Desktop/NEU/CS5500/AnchorStudio/repo/ReadAlongs-Web-Component/dist/esm/read-along.js",r={};return r.resourcesUrl=new URL(".",t).href,(0,e.p)(r)})().then((t=>(0,e.b)([["read-along",[[1,"read-along",{text:[1025],alignment:[1025],audio:[1025],svgOverlay:[1,"svg-overlay"],theme:[1025],language:[1025],cssUrl:[1,"css-url"],useAssetsFolder:[4,"use-assets-folder"],pageScrolling:[1,"page-scrolling"],mode:[1],playing:[32],fullscreen:[32],autoScroll:[32],isLoaded:[32],parsed_text:[32],anchorAlertMessage:[32]},[[9,"wheel","wheelHandler"],[8,"contextmenu","contextMenuHandler"],[8,"keyup","keyUpHandler"],[9,"resize","resizeHandler"],[8,"click","clickHandler"]]]]]],t)))})()})();